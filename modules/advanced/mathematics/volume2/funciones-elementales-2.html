<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funciones Elementales II - Matem√°ticas Avanzadas</title>
    <link rel="stylesheet" href="../../../../css/core.css">
    <link rel="stylesheet" href="../../../../css/components.css">
</head>
<body>
    <div id="header-container"></div>
    <div id="tabs-container"></div>
    <div id="score-container"></div>

    <div class="container">
        <!-- Tab 1: Glosario -->
        <div class="content-section active" id="glosario">
            <h2>üìñ Glosario de Funciones Elementales II</h2>

            <div class="info-box bg-gradient-primary-white">
                <p class="white-text-mt0">Aprende los t√©rminos clave relacionados con funciones exponenciales, logar√≠tmicas y trigonom√©tricas:</p>
            </div>

            <div class="term-card">
                <h3>üîµ Funci√≥n Exponencial</h3>
                <p><strong>Definici√≥n:</strong> Una funci√≥n de la forma f(x) = aÀ£ donde a > 0 y a ‚â† 1. La base a es una constante y el exponente x es la variable. La funci√≥n exponencial natural usa base e ‚âà 2.71828.</p>
                <p><strong>Ejemplo:</strong> f(x) = 2À£ crece r√°pidamente; f(0) = 1, f(1) = 2, f(2) = 4, f(3) = 8.</p>
            </div>

            <div class="term-card">
                <h3>üîµ Funci√≥n Logar√≠tmica</h3>
                <p><strong>Definici√≥n:</strong> La funci√≥n logar√≠tmica y = log‚Çê(x) es la funci√≥n inversa de la exponencial a ∏ = x. Responde: "¬øa qu√© exponente debo elevar a para obtener x?". El logaritmo natural ln(x) usa base e.</p>
                <p><strong>Ejemplo:</strong> log‚ÇÇ(8) = 3 porque 2¬≥ = 8; ln(e¬≤) = 2 porque e¬≤ = e¬≤.</p>
            </div>

            <div class="term-card">
                <h3>üîµ N√∫mero de Euler (e)</h3>
                <p><strong>Definici√≥n:</strong> Constante matem√°tica fundamental e ‚âà 2.71828..., definida como lim(1 + 1/n)‚Åø cuando n‚Üí‚àû. Base natural de exponenciales y logaritmos, fundamental en c√°lculo.</p>
                <p><strong>Ejemplo:</strong> e aparece en crecimiento continuo: A(t) = A‚ÇÄ¬∑e ≥·µó (inter√©s compuesto continuo).</p>
            </div>

            <div class="term-card">
                <h3>üîµ Funciones Trigonom√©tricas</h3>
                <p><strong>Definici√≥n:</strong> Las funciones sin(x), cos(x), tan(x) relacionan √°ngulos con razones en tri√°ngulos. Son peri√≥dicas: sin y cos tienen per√≠odo 2œÄ, tan tiene per√≠odo œÄ. Valores en [-1, 1] para sin y cos.</p>
                <p><strong>Ejemplo:</strong> sin(œÄ/2) = 1, cos(0) = 1, tan(œÄ/4) = 1.</p>
            </div>

            <div class="term-card">
                <h3>üîµ Funciones Trigonom√©tricas Inversas</h3>
                <p><strong>Definici√≥n:</strong> Las funciones arcsin(x), arccos(x), arctan(x) son las inversas de las funciones trigonom√©tricas en sus dominios restringidos. Devuelven el √°ngulo cuyo seno/coseno/tangente es x.</p>
                <p><strong>Ejemplo:</strong> arcsin(1/2) = œÄ/6 porque sin(œÄ/6) = 1/2; arctan(1) = œÄ/4.</p>
            </div>
        </div>

        <!-- Tab 2: S√≠mbolos -->
        <div class="content-section" id="simbolos">
            <h2>üî£ S√≠mbolos y Notaci√≥n</h2>

            <div class="info-box bg-gradient-primary-white">
                <p class="white-text-mt0">Notaci√≥n matem√°tica esencial para funciones exponenciales, logar√≠tmicas y trigonom√©tricas:</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">e</span>
                    <span class="symbol-name">N√∫mero de Euler</span>
                </div>
                <p><strong>Significado:</strong> Constante matem√°tica fundamental ‚âà 2.71828...</p>
                <p><strong>Uso:</strong> Base de logaritmos naturales y exponenciales naturales. e = lim(1 + 1/n)‚Åø</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">aÀ£, eÀ£</span>
                    <span class="symbol-name">Funci√≥n exponencial</span>
                </div>
                <p><strong>Significado:</strong> Exponenciaci√≥n con base a o e</p>
                <p><strong>Uso:</strong> f(x) = 2À£, f(x) = eÀ£. Crecimiento o decaimiento exponencial.</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">ln(x), log(x), log‚Çê(x)</span>
                    <span class="symbol-name">Funci√≥n logar√≠tmica</span>
                </div>
                <p><strong>Significado:</strong> Logaritmo natural (base e), decimal (base 10), o base a</p>
                <p><strong>Uso:</strong> y = log‚Çê(x) ‚áî a ∏ = x. Inversa de la exponencial.</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">sin, cos, tan</span>
                    <span class="symbol-name">Funciones trigonom√©tricas</span>
                </div>
                <p><strong>Significado:</strong> Seno, coseno, tangente de un √°ngulo</p>
                <p><strong>Uso:</strong> sin(x), cos(x), tan(x). Funciones peri√≥dicas fundamentales.</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">arcsin, arccos, arctan</span>
                    <span class="symbol-name">Funciones trigonom√©tricas inversas</span>
                </div>
                <p><strong>Significado:</strong> Arco seno, arco coseno, arco tangente</p>
                <p><strong>Uso:</strong> Devuelven el √°ngulo. arcsin(1/2) = œÄ/6.</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">œÄ</span>
                    <span class="symbol-name">Pi</span>
                </div>
                <p><strong>Significado:</strong> Constante œÄ ‚âà 3.14159... (relaci√≥n circunferencia/di√°metro)</p>
                <p><strong>Uso:</strong> Medida de √°ngulos, per√≠odos trigonom√©tricos. 2œÄ rad = 360¬∞</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">‚âà</span>
                    <span class="symbol-name">Aproximadamente igual</span>
                </div>
                <p><strong>Significado:</strong> Indica valor aproximado o redondeado</p>
                <p><strong>Uso:</strong> e ‚âà 2.718, œÄ ‚âà 3.142</p>
            </div>
        </div>

        <!-- Tab 3: Introducci√≥n -->
        <div class="content-section" id="introduccion">
            <h2>üìö Introducci√≥n a Funciones Elementales II</h2>

            <div class="info-box bg-gradient-primary-white">
                <p class="white-text-mt0">Las funciones exponenciales, logar√≠tmicas y trigonom√©tricas son esenciales en m√∫ltiples campos. ¬°Descubre sus aplicaciones!</p>
            </div>

            <div class="application-card">
                <h3>üåç Ciencias Naturales y Biolog√≠a</h3>
                <ul>
                    <li><strong>Crecimiento poblacional:</strong> P(t) = P‚ÇÄ¬∑e ≥·µó modela poblaciones con crecimiento exponencial</li>
                    <li><strong>Decaimiento radiactivo:</strong> N(t) = N‚ÇÄ¬∑e^(-Œªt) describe desintegraci√≥n de is√≥topos</li>
                    <li><strong>Escalas logar√≠tmicas:</strong> pH = -log[H‚Å∫], escala Richter para terremotos</li>
                    <li><strong>Ritmos biol√≥gicos:</strong> Funciones trigonom√©tricas modelan ciclos circadianos</li>
                </ul>
            </div>

            <div class="application-card">
                <h3>üí∞ Econom√≠a y Finanzas</h3>
                <ul>
                    <li><strong>Inter√©s compuesto continuo:</strong> A = P¬∑e ≥·µó calcula valor futuro de inversiones</li>
                    <li><strong>Crecimiento econ√≥mico:</strong> PIB, inflaci√≥n modelados exponencialmente</li>
                    <li><strong>Amortizaci√≥n de pr√©stamos:</strong> Logaritmos calculan tiempo de pago</li>
                    <li><strong>An√°lisis de tendencias:</strong> Datos econ√≥micos con transformaci√≥n logar√≠tmica</li>
                </ul>
            </div>

            <div class="application-card">
                <h3>üî¨ F√≠sica e Ingenier√≠a</h3>
                <ul>
                    <li><strong>Oscilaciones:</strong> x(t) = A¬∑sin(œât + œÜ) describe movimiento arm√≥nico simple</li>
                    <li><strong>Ondas electromagn√©ticas:</strong> Funciones trigonom√©tricas modelan luz, sonido, radio</li>
                    <li><strong>Circuitos AC:</strong> Corriente y voltaje alternos son funciones seno/coseno</li>
                    <li><strong>Decaimiento de temperatura:</strong> Ley de enfriamiento de Newton usa exponenciales</li>
                </ul>
            </div>

            <div class="application-card">
                <h3>üíª Computaci√≥n y Tecnolog√≠a</h3>
                <ul>
                    <li><strong>Complejidad de algoritmos:</strong> O(log n) indica eficiencia logar√≠tmica</li>
                    <li><strong>Procesamiento de se√±ales:</strong> Transformada de Fourier usa funciones trigonom√©tricas</li>
                    <li><strong>Criptograf√≠a:</strong> Exponenciales en cifrados RSA y curvas el√≠pticas</li>
                    <li><strong>Compresi√≥n de datos:</strong> Escalas logar√≠tmicas en audio (dB) y video</li>
                </ul>
            </div>

            <div class="application-card">
                <h3>üé® Gr√°ficos y Dise√±o</h3>
                <ul>
                    <li><strong>Animaciones:</strong> Funciones trigonom√©tricas crean movimientos suaves y c√≠clicos</li>
                    <li><strong>Efectos visuales:</strong> Ondas, espirales usando sin/cos</li>
                    <li><strong>Perspectiva 3D:</strong> Proyecciones usan funciones trigonom√©tricas</li>
                    <li><strong>Ajustes de imagen:</strong> Correcciones gamma usan funciones exponenciales</li>
                </ul>
            </div>
        </div>

        <!-- Tab 4: Teor√≠a y Pr√°ctica -->
        <div class="content-section" id="teoria">
            <h2>üìñ Teor√≠a y Pr√°ctica</h2>

            <h3>1. Funci√≥n Exponencial</h3>
            <div class="info-box">
                <div class="formula-box">
                    f(x) = aÀ£ donde a > 0, a ‚â† 1
                </div>
                <p><strong>Propiedades:</strong></p>
                <ul>
                    <li>Dom(f) = ‚Ñù, Im(f) = (0, ‚àû)</li>
                    <li>a‚Å∞ = 1 para todo a > 0</li>
                    <li>aÀ£ ¬∑ a ∏ = aÀ£‚Å∫ ∏</li>
                    <li>aÀ£ / a ∏ = aÀ£‚Åª ∏</li>
                    <li>(aÀ£) ∏ = aÀ£ ∏</li>
                    <li>Si a > 1: creciente; Si 0 < a < 1: decreciente</li>
                </ul>
                <div class="exam-important">
                    <strong>Importante:</strong> e = lim(1 + 1/n)‚Åø cuando n‚Üí‚àû ‚âà 2.71828
                </div>
            </div>

            <div class="calculator-box">
                <h4>üßÆ Calculadora de Funci√≥n Exponencial</h4>
                <p>Eval√∫a f(x) = a^x para diferentes valores de a y x:</p>
                <div class="input-group">
                    <label>Base (a):</label>
                    <input type="number" id="expBase" value="2" step="0.1" min="0.1">
                </div>
                <div class="input-group">
                    <label>Exponente (x):</label>
                    <input type="number" id="expX" value="3" step="0.1">
                </div>
                <button onclick="calcularExponencial()" class="btn-calculate">Calcular</button>
                <div id="expResult" class="result-box"></div>
            </div>

            <h3>2. Funci√≥n Logar√≠tmica</h3>
            <div class="info-box">
                <div class="formula-box">
                    y = log‚Çê(x) ‚áî a ∏ = x
                </div>
                <p><strong>Propiedades:</strong></p>
                <ul>
                    <li>Dom(f) = (0, ‚àû), Im(f) = ‚Ñù</li>
                    <li>log‚Çê(1) = 0, log‚Çê(a) = 1</li>
                    <li>log‚Çê(x¬∑y) = log‚Çê(x) + log‚Çê(y)</li>
                    <li>log‚Çê(x/y) = log‚Çê(x) - log‚Çê(y)</li>
                    <li>log‚Çê(x‚Åø) = n¬∑log‚Çê(x)</li>
                    <li>log‚Çê(x) = ln(x)/ln(a) (cambio de base)</li>
                </ul>
                <div class="exam-important">
                    <strong>Funciones inversas:</strong> ln(eÀ£) = x y e^(ln(x)) = x
                </div>
            </div>

            <div class="calculator-box">
                <h4>üßÆ Calculadora de Logaritmo</h4>
                <p>Calcula log_a(x) para diferentes bases:</p>
                <div class="input-group">
                    <label>Base (a):</label>
                    <input type="number" id="logBase" value="10" step="0.1" min="0.1">
                </div>
                <div class="input-group">
                    <label>Argumento (x):</label>
                    <input type="number" id="logX" value="100" step="0.1" min="0.01">
                </div>
                <button onclick="calcularLogaritmo()" class="btn-calculate">Calcular</button>
                <div id="logResult" class="result-box"></div>
            </div>

            <h3>3. Ecuaciones Exponenciales y Logar√≠tmicas</h3>
            <div class="info-box">
                <p><strong>M√©todo para ecuaciones exponenciales:</strong> Aplicar logaritmos a ambos lados</p>
                <div class="example-box">
                    <strong>Ejemplo:</strong> Resolver 2À£ = 8<br>
                    ln(2À£) = ln(8)<br>
                    x¬∑ln(2) = ln(8)<br>
                    x = ln(8)/ln(2) = 3
                </div>
                <p><strong>M√©todo para ecuaciones logar√≠tmicas:</strong> Usar propiedades y exponenciar</p>
                <div class="example-box">
                    <strong>Ejemplo:</strong> Resolver log‚ÇÇ(x) + log‚ÇÇ(x-3) = 2<br>
                    log‚ÇÇ(x(x-3)) = 2<br>
                    x(x-3) = 2¬≤ = 4<br>
                    x¬≤ - 3x - 4 = 0 ‚Üí x = 4 (verificar x > 0 y x > 3)
                </div>
            </div>

            <div class="calculator-box">
                <h4>üßÆ Resolver Ecuaci√≥n Exponencial</h4>
                <p>Resuelve a^x = b (encuentra x):</p>
                <div class="input-group">
                    <label>Base (a):</label>
                    <input type="number" id="eqExpBase" value="2" step="0.1" min="0.1">
                </div>
                <div class="input-group">
                    <label>Resultado (b):</label>
                    <input type="number" id="eqExpB" value="8" step="0.1" min="0.01">
                </div>
                <button onclick="resolverEcuacionExponencial()" class="btn-calculate">Resolver</button>
                <div id="eqExpResult" class="result-box"></div>
            </div>

            <h3>4. Funciones Trigonom√©tricas</h3>
            <table class="comparison-table">
                <thead>
                    <tr><th>Funci√≥n</th><th>Dominio</th><th>Imagen</th><th>Per√≠odo</th></tr>
                </thead>
                <tbody>
                    <tr><td>sin(x)</td><td>‚Ñù</td><td>[-1, 1]</td><td>2œÄ</td></tr>
                    <tr><td>cos(x)</td><td>‚Ñù</td><td>[-1, 1]</td><td>2œÄ</td></tr>
                    <tr><td>tan(x)</td><td>‚Ñù-{œÄ/2+kœÄ}</td><td>‚Ñù</td><td>œÄ</td></tr>
                </tbody>
            </table>

            <div class="info-box">
                <p><strong>Identidades fundamentales:</strong></p>
                <ul>
                    <li>sin¬≤(x) + cos¬≤(x) = 1 (identidad pitag√≥rica)</li>
                    <li>tan(x) = sin(x)/cos(x)</li>
                    <li>sin(-x) = -sin(x), cos(-x) = cos(x)</li>
                    <li>sin(x + 2œÄ) = sin(x), cos(x + 2œÄ) = cos(x)</li>
                </ul>
            </div>

            <h3>5. Funciones Trigonom√©tricas Inversas</h3>
            <table class="comparison-table">
                <thead>
                    <tr><th>Funci√≥n</th><th>Dominio</th><th>Imagen</th></tr>
                </thead>
                <tbody>
                    <tr><td>arcsin(x)</td><td>[-1, 1]</td><td>[-œÄ/2, œÄ/2]</td></tr>
                    <tr><td>arccos(x)</td><td>[-1, 1]</td><td>[0, œÄ]</td></tr>
                    <tr><td>arctan(x)</td><td>‚Ñù</td><td>(-œÄ/2, œÄ/2)</td></tr>
                </tbody>
            </table>
        </div>

        <!-- Tab 5: Entrenamiento -->
        <div class="content-section" id="entrenamiento">
            <h2>üéØ Entrenamiento</h2>

            <div class="info-box bg-gradient-primary-white">
                <p class="white-text-mt0">Practica con problemas sobre funciones exponenciales, logar√≠tmicas y trigonom√©tricas. Cada respuesta correcta suma +10 puntos, cada incorrecta resta -5 puntos.</p>
            </div>

            <div id="training-container">
                <div id="training-question" class="question-box">
                    <p id="training-question-text"></p>
                </div>
                <div id="training-options" class="options-container"></div>
                <button onclick="checkTrainingAnswer()" id="training-submit-btn" class="btn-primary" style="display:none;">Verificar Respuesta</button>
                <div id="training-feedback" class="feedback-box"></div>
                <button onclick="nextTrainingQuestion()" id="training-next-btn" class="btn-secondary" style="display:none;">Siguiente Pregunta</button>
            </div>

            <div class="stats-box">
                <p>Preguntas respondidas: <span id="training-answered">0</span></p>
                <p>Respuestas correctas: <span id="training-correct">0</span></p>
                <p>Respuestas incorrectas: <span id="training-incorrect">0</span></p>
            </div>
        </div>

        <!-- Tab 6: Examen Final -->
        <div class="content-section" id="examen">
            <h2>üìù Examen Final de Funciones Elementales II</h2>

            <div class="info-box bg-gradient-primary-white">
                <p class="white-text-mt0">Completa este examen para demostrar tu dominio de funciones exponenciales, logar√≠tmicas y trigonom√©tricas.</p>
                <p class="white-text-mt0"><strong>Requisitos:</strong> 70% o m√°s para aprobar (14/20 respuestas correctas)</p>
                <p class="white-text-mt0"><strong>Recompensa:</strong> Obt√©n el trofeo "Maestro de Funciones II" üèÜ</p>
            </div>

            <div id="exam-container">
                <div id="exam-start" class="exam-start-box">
                    <h3>¬øListo para comenzar?</h3>
                    <p>El examen contiene 20 preguntas sobre todos los temas de funciones elementales II.</p>
                    <p>No se otorgan puntos durante el examen, solo evaluaci√≥n.</p>
                    <button onclick="startExam()" class="btn-primary btn-large">Comenzar Examen</button>
                </div>

                <div id="exam-questions" style="display:none;">
                    <div class="exam-progress">
                        <p>Pregunta <span id="current-question">1</span> de <span id="total-questions">20</span></p>
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                    </div>

                    <div id="exam-question" class="question-box">
                        <p id="exam-question-text"></p>
                    </div>
                    <div id="exam-options" class="options-container"></div>
                    <button onclick="nextExamQuestion()" id="exam-next-btn" class="btn-primary">Siguiente</button>
                </div>

                <div id="exam-results" style="display:none;">
                    <h3>Resultados del Examen</h3>
                    <div class="results-box">
                        <p class="result-score">Puntuaci√≥n: <span id="exam-score"></span>%</p>
                        <p>Respuestas correctas: <span id="exam-correct"></span> de <span id="exam-total"></span></p>
                        <p id="exam-status"></p>
                    </div>
                    <div id="exam-trophy" style="display:none;" class="trophy-box">
                        <h3>üèÜ ¬°Felicitaciones!</h3>
                        <p>Has obtenido el trofeo: <strong>"Maestro de Funciones II"</strong></p>
                    </div>
                    <button onclick="retakeExam()" class="btn-secondary">Reintentar Examen</button>
                </div>
            </div>
        </div>
    </div>

    <script src="../../../../js/storage.js"></script>
    <script src="../../../../js/gamification.js"></script>
    <script src="../../../../js/components.js"></script>
    <script>
        // Initialize components
        initializeHeader('Funciones Elementales II', '../../../../index.html');
        initializeTabs([
            { id: 'glosario', name: 'Glosario', icon: 'üìñ' },
            { id: 'simbolos', name: 'S√≠mbolos', icon: 'üî£' },
            { id: 'introduccion', name: 'Introducci√≥n', icon: 'üìö' },
            { id: 'teoria', name: 'Teor√≠a', icon: 'üìê' },
            { id: 'entrenamiento', name: 'Entrenamiento', icon: 'üéØ' },
            { id: 'examen', name: 'Examen Final', icon: 'üìù' }
        ]);
        initializeScore();

        // Calculadora de Funci√≥n Exponencial
        function calcularExponencial() {
            const a = parseFloat(document.getElementById('expBase').value);
            const x = parseFloat(document.getElementById('expX').value);
            
            if (a <= 0) {
                document.getElementById('expResult').innerHTML = '<p class="error">La base debe ser positiva (a > 0)</p>';
                return;
            }
            
            const result = Math.pow(a, x);
            
            let html = '<div class="calculation-result">';
            html += `<p><strong>f(x) = ${a}^${x} = ${result.toFixed(4)}</strong></p>`;
            html += '<p class="explanation">';
            
            if (a === Math.E) {
                html += 'Funci√≥n exponencial natural e^x';
            } else if (a > 1) {
                html += 'Funci√≥n exponencial creciente (a > 1)';
            } else if (a < 1) {
                html += 'Funci√≥n exponencial decreciente (0 < a < 1)';
            }
            
            html += '</p>';
            html += `<p>Cuando x = 0: ${a}^0 = 1</p>`;
            html += '</div>';
            
            document.getElementById('expResult').innerHTML = html;
        }

        // Calculadora de Logaritmo
        function calcularLogaritmo() {
            const a = parseFloat(document.getElementById('logBase').value);
            const x = parseFloat(document.getElementById('logX').value);
            
            if (a <= 0 || a === 1) {
                document.getElementById('logResult').innerHTML = '<p class="error">La base debe ser positiva y diferente de 1</p>';
                return;
            }
            
            if (x <= 0) {
                document.getElementById('logResult').innerHTML = '<p class="error">El argumento debe ser positivo (x > 0)</p>';
                return;
            }
            
            const result = Math.log(x) / Math.log(a);
            
            let html = '<div class="calculation-result">';
            html += `<p><strong>log<sub>${a}</sub>(${x}) = ${result.toFixed(4)}</strong></p>`;
            html += '<p class="explanation">';
            
            if (Math.abs(a - Math.E) < 0.01) {
                html += `ln(${x}) = ${result.toFixed(4)} (logaritmo natural)`;
            } else if (a === 10) {
                html += `log(${x}) = ${result.toFixed(4)} (logaritmo decimal)`;
            }
            
            html += '</p>';
            html += `<p>Verificaci√≥n: ${a}^${result.toFixed(4)} = ${Math.pow(a, result).toFixed(4)}</p>`;
            html += '</div>';
            
            document.getElementById('logResult').innerHTML = html;
        }

        // Resolver Ecuaci√≥n Exponencial
        function resolverEcuacionExponencial() {
            const a = parseFloat(document.getElementById('eqExpBase').value);
            const b = parseFloat(document.getElementById('eqExpB').value);
            
            if (a <= 0 || a === 1) {
                document.getElementById('eqExpResult').innerHTML = '<p class="error">La base debe ser positiva y diferente de 1</p>';
                return;
            }
            
            if (b <= 0) {
                document.getElementById('eqExpResult').innerHTML = '<p class="error">El resultado debe ser positivo</p>';
                return;
            }
            
            const x = Math.log(b) / Math.log(a);
            
            let html = '<div class="calculation-result">';
            html += `<p><strong>Ecuaci√≥n: ${a}^x = ${b}</strong></p>`;
            html += '<p class="steps">Pasos de resoluci√≥n:</p>';
            html += '<ol>';
            html += `<li>Aplicar logaritmo: log<sub>${a}</sub>(${a}^x) = log<sub>${a}</sub>(${b})</li>`;
            html += `<li>Simplificar: x = log<sub>${a}</sub>(${b})</li>`;
            html += `<li>Calcular: x = ln(${b})/ln(${a}) = ${x.toFixed(4)}</li>`;
            html += '</ol>';
            html += `<p class="result-highlight"><strong>Soluci√≥n: x = ${x.toFixed(4)}</strong></p>`;
            html += `<p>Verificaci√≥n: ${a}^${x.toFixed(4)} = ${Math.pow(a, x).toFixed(4)} ‚âà ${b}</p>`;
            html += '</div>';
            
            document.getElementById('eqExpResult').innerHTML = html;
        }

        // Training questions
        const trainingQuestions = [
            {
                question: "¬øCu√°l es el valor de e^0?",
                options: ["0", "1", "e", "‚àû"],
                correct: 1,
                explanation: "Cualquier n√∫mero elevado a la potencia 0 es igual a 1, incluyendo e^0 = 1"
            },
            {
                question: "Si ln(x) = 2, entonces x = ?",
                options: ["2", "e¬≤", "2e", "e/2"],
                correct: 1,
                explanation: "Por definici√≥n: ln(x) = 2 significa e¬≤ = x, entonces x = e¬≤ ‚âà 7.389"
            },
            {
                question: "¬øCu√°l es el dominio de f(x) = ln(x)?",
                options: ["‚Ñù", "(0, ‚àû)", "[-1, 1]", "[1, ‚àû)"],
                correct: 1,
                explanation: "El logaritmo solo est√° definido para n√∫meros positivos, por lo que Dom(ln) = (0, ‚àû)"
            },
            {
                question: "log‚ÇÇ(8) = ?",
                options: ["2", "3", "4", "8"],
                correct: 1,
                explanation: "log‚ÇÇ(8) = 3 porque 2¬≥ = 8"
            },
            {
                question: "¬øCu√°l es el per√≠odo de sin(x)?",
                options: ["œÄ", "2œÄ", "œÄ/2", "4œÄ"],
                correct: 1,
                explanation: "La funci√≥n seno tiene per√≠odo 2œÄ: sin(x + 2œÄ) = sin(x)"
            },
            {
                question: "Si 2^x = 16, entonces x = ?",
                options: ["2", "3", "4", "8"],
                correct: 2,
                explanation: "2^4 = 16, por lo tanto x = 4"
            },
            {
                question: "¬øCu√°l es la imagen de cos(x)?",
                options: ["‚Ñù", "(0, ‚àû)", "[-1, 1]", "(-‚àû, -1]"],
                correct: 2,
                explanation: "El coseno oscila entre -1 y 1, entonces Im(cos) = [-1, 1]"
            },
            {
                question: "ln(e¬≥) = ?",
                options: ["e", "3", "e¬≥", "3e"],
                correct: 1,
                explanation: "ln y exponencial son inversas: ln(e¬≥) = 3"
            },
            {
                question: "log‚ÇÅ‚ÇÄ(1000) = ?",
                options: ["2", "3", "10", "100"],
                correct: 1,
                explanation: "log‚ÇÅ‚ÇÄ(1000) = log‚ÇÅ‚ÇÄ(10¬≥) = 3"
            },
            {
                question: "arcsin(1) = ?",
                options: ["0", "œÄ/6", "œÄ/4", "œÄ/2"],
                correct: 3,
                explanation: "arcsin(1) = œÄ/2 porque sin(œÄ/2) = 1"
            },
            {
                question: "¬øCu√°l es el valor de e^(ln(5))?",
                options: ["e", "5", "ln(5)", "5e"],
                correct: 1,
                explanation: "Exponencial y logaritmo natural son inversas: e^(ln(5)) = 5"
            },
            {
                question: "Si log_a(x) + log_a(y) = log_a(z), entonces z = ?",
                options: ["x + y", "x - y", "x¬∑y", "x/y"],
                correct: 2,
                explanation: "Por propiedad: log_a(x) + log_a(y) = log_a(x¬∑y), entonces z = x¬∑y"
            },
            {
                question: "¬øCu√°l es el dominio de arcsin(x)?",
                options: ["‚Ñù", "[-1, 1]", "(0, ‚àû)", "[-œÄ/2, œÄ/2]"],
                correct: 1,
                explanation: "arcsin solo est√° definido para valores de seno v√°lidos: Dom(arcsin) = [-1, 1]"
            },
            {
                question: "tan(œÄ/4) = ?",
                options: ["0", "1/2", "1", "‚àö2"],
                correct: 2,
                explanation: "tan(œÄ/4) = sin(œÄ/4)/cos(œÄ/4) = (‚àö2/2)/(‚àö2/2) = 1"
            },
            {
                question: "Si 3^x = 1, entonces x = ?",
                options: ["-1", "0", "1", "3"],
                correct: 1,
                explanation: "Cualquier n√∫mero elevado a 0 es 1: 3^0 = 1, entonces x = 0"
            }
        ];

        let currentTrainingIndex = -1;
        let trainingStats = {
            answered: 0,
            correct: 0,
            incorrect: 0
        };
        let selectedTrainingOption = -1;

        function startTraining() {
            nextTrainingQuestion();
        }

        function nextTrainingQuestion() {
            // Clear previous state
            selectedTrainingOption = -1;
            document.getElementById('training-feedback').innerHTML = '';
            document.getElementById('training-submit-btn').style.display = 'none';
            document.getElementById('training-next-btn').style.display = 'none';
            
            // Select random question
            currentTrainingIndex = Math.floor(Math.random() * trainingQuestions.length);
            const q = trainingQuestions[currentTrainingIndex];
            
            // Display question
            document.getElementById('training-question-text').textContent = q.question;
            
            // Display options
            let optionsHTML = '';
            q.options.forEach((option, index) => {
                optionsHTML += `<div class="option-btn" onclick="selectTrainingOption(${index})">${option}</div>`;
            });
            document.getElementById('training-options').innerHTML = optionsHTML;
            document.getElementById('training-submit-btn').style.display = 'block';
        }

        function selectTrainingOption(index) {
            selectedTrainingOption = index;
            const options = document.querySelectorAll('#training-options .option-btn');
            options.forEach((opt, i) => {
                opt.classList.remove('selected');
                if (i === index) opt.classList.add('selected');
            });
        }

        function checkTrainingAnswer() {
            if (selectedTrainingOption === -1) {
                alert('Por favor selecciona una respuesta');
                return;
            }
            
            const q = trainingQuestions[currentTrainingIndex];
            const isCorrect = selectedTrainingOption === q.correct;
            
            trainingStats.answered++;
            if (isCorrect) {
                trainingStats.correct++;
                addPoints(10);
                document.getElementById('training-feedback').innerHTML = 
                    `<div class="feedback-correct">‚úÖ ¬°Correcto! +10 puntos<br>${q.explanation}</div>`;
            } else {
                trainingStats.incorrect++;
                addPoints(-5);
                document.getElementById('training-feedback').innerHTML = 
                    `<div class="feedback-incorrect">‚ùå Incorrecto. -5 puntos<br>Respuesta correcta: ${q.options[q.correct]}<br>${q.explanation}</div>`;
            }
            
            // Update stats
            document.getElementById('training-answered').textContent = trainingStats.answered;
            document.getElementById('training-correct').textContent = trainingStats.correct;
            document.getElementById('training-incorrect').textContent = trainingStats.incorrect;
            
            // Show next button, hide submit
            document.getElementById('training-submit-btn').style.display = 'none';
            document.getElementById('training-next-btn').style.display = 'block';
            
            // Disable option selection
            const options = document.querySelectorAll('#training-options .option-btn');
            options.forEach(opt => opt.style.pointerEvents = 'none');
        }

        // Exam questions
        const examQuestions = [
            {
                question: "¬øCu√°l es el valor de e^1?",
                options: ["1", "2.718", "3.14", "10"],
                correct: 1
            },
            {
                question: "Si ln(x) = 0, entonces x = ?",
                options: ["0", "1", "e", "‚àû"],
                correct: 1
            },
            {
                question: "log‚ÇÉ(27) = ?",
                options: ["2", "3", "9", "27"],
                correct: 1
            },
            {
                question: "¬øCu√°l es el per√≠odo de cos(x)?",
                options: ["œÄ", "2œÄ", "œÄ/2", "1"],
                correct: 1
            },
            {
                question: "arctan(0) = ?",
                options: ["-1", "0", "1", "œÄ/4"],
                correct: 1
            },
            {
                question: "Si 5^x = 125, entonces x = ?",
                options: ["2", "3", "5", "25"],
                correct: 1
            },
            {
                question: "¬øCu√°l es la imagen de sin(x)?",
                options: ["‚Ñù", "(0, ‚àû)", "[-1, 1]", "[-œÄ, œÄ]"],
                correct: 2
            },
            {
                question: "e^(ln(7)) = ?",
                options: ["e", "7", "ln(7)", "7e"],
                correct: 1
            },
            {
                question: "log(100) = ? (base 10)",
                options: ["1", "2", "10", "100"],
                correct: 1
            },
            {
                question: "sin(œÄ/2) = ?",
                options: ["-1", "0", "1/2", "1"],
                correct: 3
            },
            {
                question: "Si log_2(x) = 5, entonces x = ?",
                options: ["10", "16", "25", "32"],
                correct: 3
            },
            {
                question: "cos(0) = ?",
                options: ["-1", "0", "1/2", "1"],
                correct: 3
            },
            {
                question: "¬øCu√°l es el dominio de ln(x - 2)?",
                options: ["‚Ñù", "(2, ‚àû)", "[-2, ‚àû)", "[0, ‚àû)"],
                correct: 1
            },
            {
                question: "tan(0) = ?",
                options: ["-1", "0", "1", "No definido"],
                correct: 1
            },
            {
                question: "arccos(0) = ?",
                options: ["0", "œÄ/6", "œÄ/4", "œÄ/2"],
                correct: 3
            },
            {
                question: "log_a(1) = ? para cualquier a > 0, a ‚â† 1",
                options: ["-1", "0", "1", "a"],
                correct: 1
            },
            {
                question: "Si 2^x = 1/8, entonces x = ?",
                options: ["-4", "-3", "3", "8"],
                correct: 1
            },
            {
                question: "¬øCu√°l es la imagen de arctan(x)?",
                options: ["‚Ñù", "[-1, 1]", "(-œÄ/2, œÄ/2)", "[0, œÄ]"],
                correct: 2
            },
            {
                question: "ln(1) = ?",
                options: ["-1", "0", "1", "e"],
                correct: 1
            },
            {
                question: "sin¬≤(x) + cos¬≤(x) = ?",
                options: ["0", "1", "2", "sin(2x)"],
                correct: 1
            },
            {
                question: "Si ln(x) = ln(3) + ln(4), entonces x = ?",
                options: ["7", "12", "ln(7)", "e^7"],
                correct: 1
            },
            {
                question: "¬øCu√°nto vale log_4(16)?",
                options: ["1", "2", "4", "16"],
                correct: 1
            },
            {
                question: "arcsin(0) = ?",
                options: ["-œÄ/2", "0", "œÄ/2", "œÄ"],
                correct: 1
            },
            {
                question: "e^0 = ?",
                options: ["0", "1", "e", "No definido"],
                correct: 1
            },
            {
                question: "¬øCu√°l es el per√≠odo de tan(x)?",
                options: ["œÄ/2", "œÄ", "2œÄ", "No peri√≥dica"],
                correct: 1
            }
        ];

        let currentExamQuestions = [];
        let currentExamIndex = 0;
        let examAnswers = [];

        function startExam() {
            // Select 20 random questions
            currentExamQuestions = [];
            const used = new Set();
            while (currentExamQuestions.length < 20 && currentExamQuestions.length < examQuestions.length) {
                const index = Math.floor(Math.random() * examQuestions.length);
                if (!used.has(index)) {
                    used.add(index);
                    currentExamQuestions.push(examQuestions[index]);
                }
            }
            
            currentExamIndex = 0;
            examAnswers = new Array(currentExamQuestions.length).fill(-1);
            
            document.getElementById('exam-start').style.display = 'none';
            document.getElementById('exam-questions').style.display = 'block';
            document.getElementById('total-questions').textContent = currentExamQuestions.length;
            
            showExamQuestion();
        }

        function showExamQuestion() {
            const q = currentExamQuestions[currentExamIndex];
            
            document.getElementById('current-question').textContent = currentExamIndex + 1;
            document.getElementById('exam-question-text').textContent = q.question;
            
            let optionsHTML = '';
            q.options.forEach((option, index) => {
                const selected = examAnswers[currentExamIndex] === index ? 'selected' : '';
                optionsHTML += `<div class="option-btn ${selected}" onclick="selectExamOption(${index})">${option}</div>`;
            });
            document.getElementById('exam-options').innerHTML = optionsHTML;
            
            const progress = ((currentExamIndex + 1) / currentExamQuestions.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            
            const btnText = currentExamIndex < currentExamQuestions.length - 1 ? 'Siguiente' : 'Finalizar Examen';
            document.getElementById('exam-next-btn').textContent = btnText;
        }

        function selectExamOption(index) {
            examAnswers[currentExamIndex] = index;
            const options = document.querySelectorAll('#exam-options .option-btn');
            options.forEach((opt, i) => {
                opt.classList.remove('selected');
                if (i === index) opt.classList.add('selected');
            });
        }

        function nextExamQuestion() {
            if (examAnswers[currentExamIndex] === -1) {
                alert('Por favor selecciona una respuesta');
                return;
            }
            
            currentExamIndex++;
            
            if (currentExamIndex < currentExamQuestions.length) {
                showExamQuestion();
            } else {
                showExamResults();
            }
        }

        function showExamResults() {
            let correct = 0;
            currentExamQuestions.forEach((q, i) => {
                if (examAnswers[i] === q.correct) correct++;
            });
            
            const score = Math.round((correct / currentExamQuestions.length) * 100);
            const passed = score >= 70;
            
            document.getElementById('exam-questions').style.display = 'none';
            document.getElementById('exam-results').style.display = 'block';
            
            document.getElementById('exam-score').textContent = score;
            document.getElementById('exam-correct').textContent = correct;
            document.getElementById('exam-total').textContent = currentExamQuestions.length;
            
            const statusEl = document.getElementById('exam-status');
            if (passed) {
                statusEl.innerHTML = '<p class="exam-passed">‚úÖ ¬°Examen Aprobado!</p>';
                document.getElementById('exam-trophy').style.display = 'block';
                
                // Award trophy
                awardTrophy('funciones-elementales-2', 'Maestro de Funciones II', 'üèÜ');
                
                // Save exam result
                saveExamResult('funciones-elementales-2', score, true);
            } else {
                statusEl.innerHTML = '<p class="exam-failed">‚ùå No aprobaste. Necesitas 70% o m√°s.</p>';
                document.getElementById('exam-trophy').style.display = 'none';
                saveExamResult('funciones-elementales-2', score, false);
            }
        }

        function retakeExam() {
            document.getElementById('exam-results').style.display = 'none';
            document.getElementById('exam-start').style.display = 'block';
        }

        // Initialize training on load
        window.addEventListener('load', () => {
            startTraining();
        });
    </script>
</body>
</html>

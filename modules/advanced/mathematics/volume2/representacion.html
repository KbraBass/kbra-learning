<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Representaci√≥n de Funciones - Matem√°ticas Avanzadas</title>
    <link rel="stylesheet" href="../../../../css/core.css">
    <link rel="stylesheet" href="../../../../css/components.css">
</head>
<body>
    <div id="header-container"></div>
    <div id="tabs-container"></div>
    <div id="score-container"></div>

    <div class="container">
        <!-- Tab 1: Glosario -->
        <div class="content-section active" id="glosario">
            <h2>üìñ Glosario de Representaci√≥n de Funciones</h2>
            
            <div class="info-box">
                <p>Aprende los t√©rminos clave relacionados con la representaci√≥n gr√°fica de funciones:</p>
            </div>

            <div class="term-card">
                <h3>üî∑ As√≠ntota</h3>
                <p><strong>Definici√≥n:</strong> Una recta a la que la funci√≥n se aproxima indefinidamente sin llegar a tocarla. Puede ser vertical (AV), horizontal (AH) u oblicua (AO).</p>
                <p><strong>Ejemplo:</strong> f(x) = 1/(x-2) tiene una as√≠ntota vertical en x = 2.</p>
            </div>

            <div class="term-card">
                <h3>üî∑ Extremo Relativo</h3>
                <p><strong>Definici√≥n:</strong> Un punto donde la funci√≥n alcanza un m√°ximo o m√≠nimo local. Se encuentra donde f'(x) = 0.</p>
                <p><strong>Ejemplo:</strong> f(x) = -x¬≤ + 4x tiene un m√°ximo en x = 2.</p>
            </div>

            <div class="term-card">
                <h3>üî∑ Punto de Inflexi√≥n</h3>
                <p><strong>Definici√≥n:</strong> Un punto donde la funci√≥n cambia de c√≥ncava a convexa o viceversa. Se encuentra donde f''(x) = 0 y cambia de signo.</p>
                <p><strong>Ejemplo:</strong> f(x) = x¬≥ tiene un punto de inflexi√≥n en x = 0.</p>
            </div>

            <div class="term-card">
                <h3>üî∑ Concavidad y Convexidad</h3>
                <p><strong>Definici√≥n:</strong> La concavidad describe c√≥mo se curva la funci√≥n. Si f''(x) > 0, la funci√≥n es convexa (‚à™). Si f''(x) < 0, es c√≥ncava (‚à©).</p>
                <p><strong>Ejemplo:</strong> f(x) = x¬≤ es convexa en todo ‚Ñù porque f''(x) = 2 > 0.</p>
            </div>

            <div class="term-card">
                <h3>üî∑ Crecimiento y Decrecimiento</h3>
                <p><strong>Definici√≥n:</strong> Una funci√≥n crece en un intervalo si f'(x) > 0, y decrece si f'(x) < 0 en ese intervalo.</p>
                <p><strong>Ejemplo:</strong> f(x) = x¬≤ crece en (0, +‚àû) porque f'(x) = 2x > 0 para x > 0.</p>
            </div>
        </div>

        <!-- Tab 2: S√≠mbolos -->
        <div class="content-section" id="simbolos">
            <h2>üî£ S√≠mbolos Matem√°ticos</h2>
            
            <div class="info-box">
                <p>Conoce la notaci√≥n matem√°tica utilizada en el an√°lisis de funciones:</p>
            </div>

            <div class="symbol-card">
                <h3>f'(x)</h3>
                <p><strong>Significado:</strong> Derivada primera de f(x)</p>
                <p><strong>Uso:</strong> Indica la tasa de cambio y el crecimiento/decrecimiento de la funci√≥n</p>
                <p><strong>Ejemplo:</strong> Si f(x) = x¬≤, entonces f'(x) = 2x</p>
            </div>

            <div class="symbol-card">
                <h3>f''(x)</h3>
                <p><strong>Significado:</strong> Derivada segunda de f(x)</p>
                <p><strong>Uso:</strong> Indica la concavidad y ayuda a clasificar extremos</p>
                <p><strong>Ejemplo:</strong> Si f(x) = x¬≤, entonces f''(x) = 2</p>
            </div>

            <div class="symbol-card">
                <h3>AV, AH, AO</h3>
                <p><strong>Significado:</strong> As√≠ntota Vertical, Horizontal, Oblicua</p>
                <p><strong>Uso:</strong> Describen el comportamiento de la funci√≥n en los extremos o cerca de discontinuidades</p>
                <p><strong>Ejemplo:</strong> AV: x = a; AH: y = L; AO: y = mx + n</p>
            </div>

            <div class="symbol-card">
                <h3>lim<sub>x‚Üía</sub> f(x)</h3>
                <p><strong>Significado:</strong> L√≠mite de f(x) cuando x tiende a a</p>
                <p><strong>Uso:</strong> Esencial para determinar as√≠ntotas y continuidad</p>
                <p><strong>Ejemplo:</strong> lim<sub>x‚Üí‚àû</sub> 1/x = 0 (as√≠ntota horizontal y = 0)</p>
            </div>

            <div class="symbol-card">
                <h3>Dom(f), Im(f)</h3>
                <p><strong>Significado:</strong> Dominio e Imagen de f</p>
                <p><strong>Uso:</strong> Definen los valores de x permitidos y los valores de y alcanzados</p>
                <p><strong>Ejemplo:</strong> Dom(1/x) = ‚Ñù \\ {0}</p>
            </div>

            <div class="symbol-card">
                <h3>‚à™, ‚à©</h3>
                <p><strong>Significado:</strong> S√≠mbolos de convexidad y concavidad</p>
                <p><strong>Uso:</strong> ‚à™ indica convexa (sonr√≠e), ‚à© indica c√≥ncava (triste)</p>
                <p><strong>Ejemplo:</strong> f''(x) > 0 ‚Üí ‚à™ (convexa)</p>
            </div>

            <div class="symbol-card">
                <h3>PI</h3>
                <p><strong>Significado:</strong> Punto de Inflexi√≥n</p>
                <p><strong>Uso:</strong> Marca donde cambia la concavidad</p>
                <p><strong>Ejemplo:</strong> En f(x) = x¬≥, PI en (0, 0)</p>
            </div>
        </div>

        <!-- Tab 3: Introducci√≥n -->
        <div class="content-section" id="introduccion">
            <h2>üìö Introducci√≥n: Representaci√≥n de Funciones</h2>
            
            <div class="info-box bg-gradient-primary-white">
                <h3 class="white-text-mt0">¬øPor qu√© es importante representar funciones gr√°ficamente?</h3>
                <p class="white-text">La representaci√≥n gr√°fica de funciones es fundamental en matem√°ticas, ciencia e ingenier√≠a porque permite visualizar el comportamiento de fen√≥menos complejos, identificar patrones y tomar decisiones informadas basadas en el an√°lisis visual.</p>
            </div>

            <div class="application-card">
                <h3>üèóÔ∏è Arquitectura e Ingenier√≠a</h3>
                <p><strong>Aplicaci√≥n:</strong> Dise√±o de estructuras, an√°lisis de tensiones y deformaciones</p>
                <p><strong>Ejemplo:</strong> Representar la funci√≥n de flexi√≥n de una viga para identificar puntos de m√°xima tensi√≥n (extremos) y cambios en la curvatura (puntos de inflexi√≥n).</p>
            </div>

            <div class="application-card">
                <h3>üìà Econom√≠a y Finanzas</h3>
                <p><strong>Aplicaci√≥n:</strong> Optimizaci√≥n de beneficios, an√°lisis de costos marginales</p>
                <p><strong>Ejemplo:</strong> Graficar la funci√≥n de beneficio B(x) para encontrar el nivel de producci√≥n x que maximiza las ganancias (extremo relativo).</p>
            </div>

            <div class="application-card">
                <h3>üß™ F√≠sica y Qu√≠mica</h3>
                <p><strong>Aplicaci√≥n:</strong> An√°lisis de movimiento, trayectorias, reacciones qu√≠micas</p>
                <p><strong>Ejemplo:</strong> Representar la posici√≥n de un objeto en funci√≥n del tiempo para determinar cu√°ndo alcanza su velocidad m√°xima (derivada cero) o cambia de aceleraci√≥n (punto de inflexi√≥n).</p>
            </div>

            <div class="application-card">
                <h3>üíª Computaci√≥n y Tecnolog√≠a</h3>
                <p><strong>Aplicaci√≥n:</strong> Optimizaci√≥n de algoritmos, an√°lisis de complejidad, machine learning</p>
                <p><strong>Ejemplo:</strong> Graficar funciones de p√©rdida en redes neuronales para encontrar m√≠nimos globales que optimicen el aprendizaje.</p>
            </div>

            <div class="application-card">
                <h3>üåç Ciencias Ambientales</h3>
                <p><strong>Aplicaci√≥n:</strong> Modelado de poblaciones, an√°lisis de ecosistemas</p>
                <p><strong>Ejemplo:</strong> Representar el crecimiento poblacional P(t) para identificar puntos de inflexi√≥n que indican cambios en la tasa de crecimiento (capacidad de carga).</p>
            </div>
        </div>

        <!-- Tab 4: Teor√≠a y Pr√°ctica -->
        <div class="content-section" id="teoria">
            <h2>üìê Teor√≠a y Pr√°ctica: Representaci√≥n de Funciones</h2>

            <h3>1. Pasos para Representar una Funci√≥n</h3>
            <div class="info-box">
                <ol>
                    <li><strong>Dominio y continuidad:</strong> Determinar d√≥nde est√° definida la funci√≥n</li>
                    <li><strong>As√≠ntotas:</strong> Calcular as√≠ntotas verticales, horizontales y oblicuas</li>
                    <li><strong>Crecimiento/decrecimiento:</strong> Estudiar el signo de f'(x)</li>
                    <li><strong>Extremos relativos:</strong> Encontrar puntos donde f'(x) = 0</li>
                    <li><strong>Concavidad:</strong> Analizar el signo de f''(x)</li>
                    <li><strong>Puntos de inflexi√≥n:</strong> Encontrar donde f''(x) = 0 y cambia de signo</li>
                    <li><strong>Gr√°fica completa:</strong> Integrar toda la informaci√≥n</li>
                </ol>
            </div>

            <h3>2. As√≠ntotas</h3>
            <table class="comparison-table">
                <thead>
                    <tr><th>Tipo</th><th>Condici√≥n</th><th>Ejemplo</th></tr>
                </thead>
                <tbody>
                    <tr><td>Vertical (AV)</td><td>lim<sub>x‚Üía</sub> f(x) = ¬±‚àû</td><td>x = a</td></tr>
                    <tr><td>Horizontal (AH)</td><td>lim<sub>x‚Üí¬±‚àû</sub> f(x) = L</td><td>y = L</td></tr>
                    <tr><td>Oblicua (AO)</td><td>lim<sub>x‚Üí¬±‚àû</sub> [f(x)-(mx+n)] = 0</td><td>y = mx+n</td></tr>
                </tbody>
            </table>

            <h3>3. Crecimiento y Decrecimiento</h3>
            <div class="info-box">
                <ul>
                    <li><strong>f'(x) > 0:</strong> f crece en ese intervalo ‚Üó</li>
                    <li><strong>f'(x) < 0:</strong> f decrece en ese intervalo ‚Üò</li>
                    <li><strong>f'(x) = 0:</strong> posibles extremos (m√°ximos o m√≠nimos)</li>
                </ul>
                <div class="exam-important">
                    <strong>Criterio:</strong> Estudiar el signo de f'(x) en los intervalos determinados por los puntos cr√≠ticos
                </div>
            </div>

            <h3>4. Extremos Relativos</h3>
            <div class="info-box">
                <p>Si f'(a) = 0, tenemos un punto cr√≠tico. Para clasificarlo:</p>
                <ul>
                    <li><strong>Criterio de la 1¬™ derivada:</strong>
                        <ul>
                            <li>M√°ximo: f' cambia de + a -</li>
                            <li>M√≠nimo: f' cambia de - a +</li>
                        </ul>
                    </li>
                    <li><strong>Criterio de la 2¬™ derivada:</strong>
                        <ul>
                            <li>f''(a) < 0 ‚Üí m√°ximo</li>
                            <li>f''(a) > 0 ‚Üí m√≠nimo</li>
                            <li>f''(a) = 0 ‚Üí criterio no concluyente</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <h3>5. Concavidad y Convexidad</h3>
            <div class="info-box">
                <ul>
                    <li><strong>f''(x) > 0:</strong> Convexa (‚à™, sonr√≠e) - la funci√≥n se curva hacia arriba</li>
                    <li><strong>f''(x) < 0:</strong> C√≥ncava (‚à©, triste) - la funci√≥n se curva hacia abajo</li>
                </ul>
            </div>

            <h3>6. Puntos de Inflexi√≥n</h3>
            <div class="info-box">
                <p>Un punto de inflexi√≥n ocurre donde f''(x) = 0 Y f'' cambia de signo</p>
                <p>Es el punto donde la funci√≥n cambia de c√≥ncava a convexa o viceversa</p>
                <div class="exam-important">
                    <strong>Importante:</strong> f''(a) = 0 no garantiza un PI; debe haber cambio de signo
                </div>
            </div>

            <h3>üõ†Ô∏è Calculadoras Interactivas</h3>

            <div class="tool-card">
                <h4>üìà Analizador de Crecimiento</h4>
                <p>Estudia el crecimiento de f(x) = ax¬≤ + bx + c</p>
                <div class="tool-input-group">
                    <label>Coeficiente a:</label>
                    <input type="number" step="any" id="crec-a" placeholder="Ej: 1">
                </div>
                <div class="tool-input-group">
                    <label>Coeficiente b:</label>
                    <input type="number" step="any" id="crec-b" placeholder="Ej: 0">
                </div>
                <div class="tool-input-group">
                    <label>Coeficiente c:</label>
                    <input type="number" step="any" id="crec-c" placeholder="Ej: 0">
                </div>
                <button class="calc-button" onclick="analyzeGrowth()">Analizar Crecimiento</button>
                <div class="calc-result" id="crec-result">Ingresa los coeficientes de la funci√≥n cuadr√°tica</div>
            </div>

            <div class="tool-card">
                <h4>üéØ Localizador de Extremos</h4>
                <p>Encuentra extremos de f(x) = ax¬≤ + bx + c</p>
                <div class="tool-input-group">
                    <label>Coeficiente a:</label>
                    <input type="number" step="any" id="ext-a" placeholder="Ej: -1">
                </div>
                <div class="tool-input-group">
                    <label>Coeficiente b:</label>
                    <input type="number" step="any" id="ext-b" placeholder="Ej: 4">
                </div>
                <div class="tool-input-group">
                    <label>Coeficiente c:</label>
                    <input type="number" step="any" id="ext-c" placeholder="Ej: 0">
                </div>
                <button class="calc-button" onclick="findExtrema()">Calcular Extremos</button>
                <div class="calc-result" id="ext-result">Ingresa los coeficientes de la funci√≥n cuadr√°tica</div>
            </div>

            <div class="tool-card">
                <h4>üìä Analizador de Concavidad</h4>
                <p>Determina la concavidad de f(x) = ax¬≤ + bx + c</p>
                <div class="tool-input-group">
                    <label>Coeficiente a:</label>
                    <input type="number" step="any" id="conc-a" placeholder="Ej: 1">
                </div>
                <button class="calc-button" onclick="analyzeConcavity()">Analizar Concavidad</button>
                <div class="calc-result" id="conc-result">Ingresa el coeficiente a de la funci√≥n cuadr√°tica</div>
            </div>
        </div>

        <!-- Tab 5: Entrenamiento -->
        <div class="content-section" id="entrenamiento">
            <h2>‚úèÔ∏è Entrenamiento</h2>
            
            <div class="info-box bg-gradient-success-white">
                <h4 class="white-text-mt0">üí™ Practica tus habilidades</h4>
                <p class="white-text">Resuelve estos ejercicios para dominar la representaci√≥n de funciones. Cada respuesta correcta suma +10 puntos, cada error resta -5 puntos.</p>
            </div>

            <div id="training-container"></div>
        </div>

        <!-- Tab 6: Examen Final -->
        <div class="content-section" id="examen">
            <h2>üìù Examen Final de Representaci√≥n de Funciones</h2>
            
            <div class="info-box bg-gradient-warning-white">
                <h4 class="text-warning-dark">üìã Instrucciones</h4>
                <p>Completa este examen para demostrar tu dominio de la representaci√≥n de funciones.</p>
                <p><strong>Requisitos:</strong> 70% o m√°s para aprobar (14/20 respuestas correctas)</p>
                <p><strong>Recompensa:</strong> Obt√©n el trofeo "Maestro de Representaci√≥n" üèÜ</p>
            </div>

            <div id="exam-container"></div>
            <div class="exam-actions">
                <button id="submit-exam" class="btn btn-primary btn-lg" onclick="submitExam()" style="display:none;">
                    Enviar Examen
                </button>
            </div>
            <div id="exam-result"></div>
        </div>
    </div>

    <script src="../../../../lib/storage.js"></script>
    <script src="../../../../lib/gamification.js"></script>
    <script src="../../../../lib/components.js"></script>
    <script>
        const MODULE_ID = 'representacion';
        const MODULE_TITLE = 'Representaci√≥n de Funciones';
        const TROPHY_ID = 'representacion_trophy';

        document.addEventListener('DOMContentLoaded', function() {
            Components.createHeader(MODULE_TITLE, '../../../../index.html');
            Components.createTabs([
                { id: 'glosario', label: 'Glosario', icon: 'üìñ' },
                { id: 'simbolos', label: 'S√≠mbolos', icon: 'üî£' },
                { id: 'introduccion', label: 'Introducci√≥n', icon: 'üìö' },
                { id: 'teoria', label: 'Teor√≠a', icon: 'üìê' },
                { id: 'entrenamiento', label: 'Entrenamiento', icon: '‚úèÔ∏è' },
                { id: 'examen', label: 'Examen Final', icon: 'üìù' }
            ], 'glosario');
            Components.createScoreDisplay();
            
            loadTraining();
            loadExam();
            Gamification.updateDisplay(MODULE_ID);
        });

        // Training exercises
        const trainingQuestions = [
            { id: 1, question: 'Si f\'(x) = 2x y f\'(3) = 6 > 0, ¬øla funci√≥n crece en x=3? (1=S√ç, 0=NO)', answer: '1', points: 10 },
            { id: 2, question: 'Si f\'(x) < 0 en un intervalo, ¬øqu√© hace la funci√≥n? (1=crece, 0=decrece)', answer: '0', points: 10 },
            { id: 3, question: 'f\'(x) = 2x = 0, ¬øcu√°l es el punto cr√≠tico?', answer: '0', points: 10 },
            { id: 4, question: 'Si f\'\'(x) = 2 > 0, ¬øla funci√≥n es convexa? (1=S√ç, 0=NO)', answer: '1', points: 10 },
            { id: 5, question: 'Si f\'\'(x) = -2 < 0, ¬øla funci√≥n es c√≥ncava? (1=S√ç, 0=NO)', answer: '1', points: 10 },
            { id: 6, question: 'f(x) = 1/(x-5), ¬øas√≠ntota vertical en x=?', answer: '5', points: 10 },
            { id: 7, question: 'lim(x‚Üí‚àû) 3x¬≤/x¬≤ = ? (as√≠ntota horizontal)', answer: '3', points: 10 },
            { id: 8, question: 'f\'(2)=0, f\'\'(2)=-3<0, ¬øes m√°ximo o m√≠nimo? (1=m√°x, 0=m√≠n)', answer: '1', points: 10 },
            { id: 9, question: 'f\'\'(x) = 6x = 0, ¬øpunto de inflexi√≥n en x=?', answer: '0', points: 10 },
            { id: 10, question: 'f(x)=x¬≥, f\'(1)=3>0, ¬øcrece en x=1? (1=S√ç, 0=NO)', answer: '1', points: 10 },
            { id: 11, question: 'Si f\' cambia de + a -, ¬øqu√© hay? (1=m√°x, 0=m√≠n)', answer: '1', points: 10 },
            { id: 12, question: 'f(x)=-x¬≤+6x, f\'(x)=-2x+6=0, x=?', answer: '3', points: 10 },
            { id: 13, question: 'f(x)=x¬≤, f\'\'(x)=2. ¬øConvexa en todo ‚Ñù? (1=S√ç, 0=NO)', answer: '1', points: 10 },
            { id: 14, question: 'lim(x‚Üí2‚Å∫) 1/(x-2) = +‚àû, AV en x=?', answer: '2', points: 10 },
            { id: 15, question: 'f\'\'(a)>0 en extremo, ¬øm√°x o m√≠n? (1=m√°x, 0=m√≠n)', answer: '0', points: 10 }
        ];

        function loadTraining() {
            const container = document.getElementById('training-container');
            container.innerHTML = trainingQuestions.map(q => `
                <div class="exercise-card" id="training-${q.id}">
                    <h4>Pregunta ${q.id}</h4>
                    <p>${q.question}</p>
                    <input type="text" id="training-answer-${q.id}" class="input-field" placeholder="Tu respuesta">
                    <button class="btn btn-primary" onclick="checkTraining(${q.id})">Verificar</button>
                    <div id="training-feedback-${q.id}" class="feedback"></div>
                </div>
            `).join('');
        }

        function checkTraining(questionId) {
            const question = trainingQuestions.find(q => q.id === questionId);
            const userAnswer = document.getElementById(`training-answer-${questionId}`).value.trim();
            const feedback = document.getElementById(`training-feedback-${questionId}`);
            const card = document.getElementById(`training-${questionId}`);
            
            const isCorrect = Math.abs(parseFloat(userAnswer) - parseFloat(question.answer)) < 0.01;
            
            if (isCorrect) {
                feedback.className = 'feedback success';
                feedback.textContent = `¬°Correcto! ‚ú® +${question.points} puntos`;
                card.classList.add('completed');
                document.getElementById(`training-answer-${questionId}`).disabled = true;
                Gamification.completeExercise(MODULE_ID, true);
            } else {
                feedback.className = 'feedback error';
                feedback.textContent = '‚ùå Incorrecto. -5 puntos. Intenta de nuevo.';
                Gamification.completeExercise(MODULE_ID, false);
            }
            
            Gamification.updateDisplay(MODULE_ID);
        }

        // Exam questions
        const examQuestions = [
            { id: 1, question: 'f(x)=x¬≤, f\'(x)=2x. ¬øf\'(-1)=?', answer: '-2' },
            { id: 2, question: 'f\'(x)>0 en (2,5), ¬øf crece o decrece? (1=crece, 0=decrece)', answer: '1' },
            { id: 3, question: 'f\'\'(x)=-4<0, ¬øconvexa o c√≥ncava? (1=conv, 0=c√≥nc)', answer: '0' },
            { id: 4, question: 'f(x)=1/(x-3), AV en x=?', answer: '3' },
            { id: 5, question: 'lim(x‚Üí‚àû) 5x¬≤/x¬≤ = ?', answer: '5' },
            { id: 6, question: 'f\'(x)=3x¬≤-3=0, x¬≤=1, x=? (valor positivo)', answer: '1' },
            { id: 7, question: 'f\'(2)=0, f\'\'(2)=5>0, ¬øm√°x o m√≠n? (1=m√°x, 0=m√≠n)', answer: '0' },
            { id: 8, question: 'f\'\'(x)=12x=0, PI en x=?', answer: '0' },
            { id: 9, question: 'f(x)=-2x¬≤+8x, f\'(x)=-4x+8=0, x=?', answer: '2' },
            { id: 10, question: 'f(x)=x¬≥-3x, f\'(x)=3x¬≤-3, f\'(1)=?', answer: '0' },
            { id: 11, question: 'f\'\'(x)=6>0, ¬øconvexa en todo ‚Ñù? (1=S√ç, 0=NO)', answer: '1' },
            { id: 12, question: 'f\' cambia de - a +, ¬øm√°x o m√≠n? (1=m√°x, 0=m√≠n)', answer: '0' },
            { id: 13, question: 'lim(x‚Üí1‚Åª) 1/(x-1) = -‚àû, AV en x=?', answer: '1' },
            { id: 14, question: 'f(x)=x‚Å¥, f\'\'(0)=?', answer: '0' },
            { id: 15, question: 'f\'(x)<0 en (-3,0), ¬ødecrece? (1=S√ç, 0=NO)', answer: '1' },
            { id: 16, question: 'f(x)=4/x, AH cuando x‚Üí‚àû, y=?', answer: '0' },
            { id: 17, question: 'f\'(a)=0, f\'\'(a)=-2, ¬øm√°x o m√≠n? (1=m√°x, 0=m√≠n)', answer: '1' },
            { id: 18, question: 'f\'\'(x)=-2x, f\'\'(3)=?', answer: '-6' },
            { id: 19, question: 'f(x)=x¬≤-4x+3, v√©rtice en x=-b/(2a), x=?', answer: '2' },
            { id: 20, question: 'f\'(x)=0 en x=5, f cambia de ‚Üó a ‚Üò, ¬øm√°x? (1=S√ç, 0=NO)', answer: '1' },
            { id: 21, question: 'f(x)=2x¬≥, f\'\'(x)=12x, PI en x=?', answer: '0' },
            { id: 22, question: 'f\'\'(x)=2a, a=-3, f\'\'(x)=?', answer: '-6' },
            { id: 23, question: 'lim(x‚Üí‚àû)(x+1)/x = ?', answer: '1' },
            { id: 24, question: 'f\'(x)=4x-4=0, punto cr√≠tico x=?', answer: '1' },
            { id: 25, question: 'f(x) convexa si f\'\'(x)>0. f\'\'(x)=3, ¬øconvexa? (1=S√ç, 0=NO)', answer: '1' }
        ];

        let selectedExamQuestions = [];
        let examAnswers = {};

        function loadExam() {
            // Select 20 random questions
            const shuffled = [...examQuestions].sort(() => Math.random() - 0.5);
            selectedExamQuestions = shuffled.slice(0, 20);
            
            const container = document.getElementById('exam-container');
            container.innerHTML = selectedExamQuestions.map((q, index) => `
                <div class="exercise-card">
                    <h4>Pregunta ${index + 1}</h4>
                    <p>${q.question}</p>
                    <input type="text" id="exam-answer-${q.id}" class="input-field" placeholder="Tu respuesta">
                </div>
            `).join('');
            
            document.getElementById('submit-exam').style.display = 'block';
        }

        function submitExam() {
            let correct = 0;
            const total = selectedExamQuestions.length;
            
            selectedExamQuestions.forEach(q => {
                const userAnswer = document.getElementById(`exam-answer-${q.id}`).value.trim();
                if (Math.abs(parseFloat(userAnswer) - parseFloat(q.answer)) < 0.01) {
                    correct++;
                }
            });
            
            const percentage = (correct / total) * 100;
            const passed = percentage >= 70;
            
            const resultDiv = document.getElementById('exam-result');
            resultDiv.className = `exam-result ${passed ? 'success' : 'error'}`;
            resultDiv.innerHTML = `
                <h3>${passed ? '¬°Aprobado! üéâ' : 'No aprobado üò¢'}</h3>
                <p>Puntuaci√≥n: ${correct}/${total} (${percentage.toFixed(1)}%)</p>
                <p>${passed ? 'Requisito: 70% ‚úÖ' : 'Requisito: 70% ‚ùå'}</p>
                ${passed ? '<p>¬°Has ganado el trofeo "Maestro de Representaci√≥n"! üèÜ</p>' : '<p>Sigue practicando e intenta de nuevo.</p>'}
            `;
            
            if (passed) {
                Gamification.awardTrophy(MODULE_ID, TROPHY_ID, 'Maestro de Representaci√≥n', '¬°Has dominado la representaci√≥n de funciones!');
            }
            
            // Disable exam
            selectedExamQuestions.forEach(q => {
                document.getElementById(`exam-answer-${q.id}`).disabled = true;
            });
            document.getElementById('submit-exam').style.display = 'none';
            
            Gamification.updateDisplay(MODULE_ID);
        }

        // Calculator functions
        function analyzeGrowth() {
            const a = parseFloat(document.getElementById('crec-a').value);
            const b = parseFloat(document.getElementById('crec-b').value);
            const c = parseFloat(document.getElementById('crec-c').value);
            const result = document.getElementById('crec-result');
            
            if (isNaN(a) || isNaN(b) || isNaN(c)) {
                result.innerHTML = '‚ö†Ô∏è Ingresa todos los coeficientes';
                return;
            }
            
            const critical = -b / (2 * a);
            
            let analysis = '';
            if (a > 0) {
                analysis = `Decrece en (-‚àû, ${critical.toFixed(2)})<br>Crece en (${critical.toFixed(2)}, +‚àû)`;
            } else if (a < 0) {
                analysis = `Crece en (-‚àû, ${critical.toFixed(2)})<br>Decrece en (${critical.toFixed(2)}, +‚àû)`;
            } else {
                analysis = 'No es funci√≥n cuadr√°tica (a=0)';
            }
            
            result.innerHTML = `
                <strong>f(x) = ${a}x¬≤ + ${b}x + ${c}</strong><br>
                <strong>f'(x) = ${2*a}x + ${b}</strong><br>
                <strong>Punto cr√≠tico:</strong> x = ${critical.toFixed(2)}<br>
                ${analysis}
            `;
        }

        function findExtrema() {
            const a = parseFloat(document.getElementById('ext-a').value);
            const b = parseFloat(document.getElementById('ext-b').value);
            const c = parseFloat(document.getElementById('ext-c').value);
            const result = document.getElementById('ext-result');
            
            if (isNaN(a) || isNaN(b) || isNaN(c)) {
                result.innerHTML = '‚ö†Ô∏è Ingresa todos los coeficientes';
                return;
            }
            
            if (a === 0) {
                result.innerHTML = 'No es funci√≥n cuadr√°tica (a=0)';
                return;
            }
            
            const x = -b / (2 * a);
            const y = a*x*x + b*x + c;
            const type = a > 0 ? 'M√≠nimo' : 'M√°ximo';
            
            result.innerHTML = `
                <strong>f(x) = ${a}x¬≤ + ${b}x + ${c}</strong><br>
                <strong>${type} en:</strong> x = ${x.toFixed(2)}<br>
                <strong>Valor:</strong> f(${x.toFixed(2)}) = ${y.toFixed(2)}<br>
                <strong>f''(x) = ${2*a}</strong> ${a > 0 ? '> 0 (m√≠nimo)' : '< 0 (m√°ximo)'}
            `;
        }

        function analyzeConcavity() {
            const a = parseFloat(document.getElementById('conc-a').value);
            const result = document.getElementById('conc-result');
            
            if (isNaN(a)) {
                result.innerHTML = '‚ö†Ô∏è Ingresa el coeficiente a';
                return;
            }
            
            const fpp = 2 * a;
            let concavity;
            if (fpp > 0) concavity = 'Convexa (‚à™) en todo ‚Ñù';
            else if (fpp < 0) concavity = 'C√≥ncava (‚à©) en todo ‚Ñù';
            else concavity = 'Ni c√≥ncava ni convexa (a=0, no es cuadr√°tica)';
            
            result.innerHTML = `
                <strong>f(x) = ${a}x¬≤ + bx + c</strong><br>
                <strong>f''(x) = ${fpp}</strong><br>
                <strong>${concavity}</strong>
            `;
        }
    </script>
</body>
</html>
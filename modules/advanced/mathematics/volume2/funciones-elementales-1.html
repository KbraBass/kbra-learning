<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funciones Elementales I - MatemÃ¡ticas Avanzadas</title>
    <link rel="stylesheet" href="../../../../css/core.css">
    <link rel="stylesheet" href="../../../../css/components.css">
</head>
<body>
    <div id="header-container"></div>
    <div id="tabs-container"></div>
    <div id="score-container"></div>

    <div class="container">
        <!-- Tab 1: Glosario -->
        <div class="content-section active" id="glosario">
            <h2>ğŸ“– Glosario de Funciones Elementales I</h2>

            <div class="info-box bg-gradient-primary-white">
                <p class="white-text-mt0">Aprende los tÃ©rminos clave relacionados con las funciones elementales:</p>
            </div>

            <div class="term-card">
                <h3>ğŸ”µ FunciÃ³n</h3>
                <p><strong>DefiniciÃ³n:</strong> Una funciÃ³n f: A â†’ B es una regla o correspondencia que asigna a cada elemento x del conjunto A (dominio) exactamente un elemento y del conjunto B (codominio), denotado y = f(x).</p>
                <p><strong>Ejemplo:</strong> f(x) = 2x + 3 es una funciÃ³n que a cada nÃºmero real x le asigna el nÃºmero 2x + 3.</p>
            </div>

            <div class="term-card">
                <h3>ğŸ”µ Dominio e Imagen</h3>
                <p><strong>DefiniciÃ³n:</strong> El dominio Dom(f) es el conjunto de todos los valores permitidos de x. La imagen Im(f) o rango Ran(f) es el conjunto de todos los valores que toma f(x).</p>
                <p><strong>Ejemplo:</strong> Para f(x) = âˆšx, Dom(f) = [0, âˆ) e Im(f) = [0, âˆ).</p>
            </div>

            <div class="term-card">
                <h3>ğŸ”µ FunciÃ³n PolinÃ³mica</h3>
                <p><strong>DefiniciÃ³n:</strong> Una funciÃ³n de la forma P(x) = aâ‚™xâ¿ + aâ‚™â‚‹â‚xâ¿â»Â¹ + ... + aâ‚x + aâ‚€, donde los coeficientes aáµ¢ son nÃºmeros reales y n es un entero no negativo (grado del polinomio).</p>
                <p><strong>Ejemplo:</strong> f(x) = xÂ³ - 2xÂ² + 5x - 7 es un polinomio de grado 3 (cÃºbico).</p>
            </div>

            <div class="term-card">
                <h3>ğŸ”µ FunciÃ³n Racional</h3>
                <p><strong>DefiniciÃ³n:</strong> Una funciÃ³n de la forma f(x) = P(x)/Q(x), donde P y Q son polinomios y Q(x) â‰  0. El dominio excluye los valores donde Q(x) = 0.</p>
                <p><strong>Ejemplo:</strong> f(x) = (x+1)/(xÂ²-4) con Dom(f) = â„ - {-2, 2}.</p>
            </div>

            <div class="term-card">
                <h3>ğŸ”µ ComposiciÃ³n de Funciones</h3>
                <p><strong>DefiniciÃ³n:</strong> La composiciÃ³n de dos funciones f y g, denotada (fâˆ˜g)(x) = f(g(x)), es una nueva funciÃ³n que primero aplica g y luego f al resultado.</p>
                <p><strong>Ejemplo:</strong> Si f(x) = xÂ² y g(x) = x+1, entonces (fâˆ˜g)(x) = (x+1)Â².</p>
            </div>
        </div>

        <!-- Tab 2: SÃ­mbolos -->
        <div class="content-section" id="simbolos">
            <h2>ğŸ”£ SÃ­mbolos MatemÃ¡ticos</h2>

            <div class="info-box bg-gradient-success-white">
                <p class="white-text-mt0">SÃ­mbolos esenciales para trabajar con funciones elementales:</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol-large">f(x)</span>
                    <span class="symbol-name">FunciÃ³n f evaluada en x</span>
                </div>
                <p><strong>Uso:</strong> Representa el valor que toma la funciÃ³n f cuando la variable independiente es x.</p>
                <p><strong>Ejemplo:</strong> Si f(x) = 2x + 3, entonces f(5) = 2(5) + 3 = 13.</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol-large">f: A â†’ B</span>
                    <span class="symbol-name">FunciÃ³n de A en B</span>
                </div>
                <p><strong>Uso:</strong> Indica que f es una funciÃ³n con dominio A y codominio B.</p>
                <p><strong>Ejemplo:</strong> f: â„ â†’ â„ definida por f(x) = xÂ².</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol-large">Dom(f) / Im(f)</span>
                    <span class="symbol-name">Dominio e Imagen</span>
                </div>
                <p><strong>Uso:</strong> Dom(f) representa el dominio y Im(f) o Ran(f) la imagen (rango) de f.</p>
                <p><strong>Ejemplo:</strong> Para f(x) = 1/x, Dom(f) = â„ - {0}.</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol-large">fâ»Â¹(x)</span>
                    <span class="symbol-name">FunciÃ³n Inversa</span>
                </div>
                <p><strong>Uso:</strong> La funciÃ³n inversa de f satisface f(fâ»Â¹(x)) = x y fâ»Â¹(f(x)) = x.</p>
                <p><strong>Ejemplo:</strong> Si f(x) = 2x, entonces fâ»Â¹(x) = x/2.</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol-large">fâˆ˜g</span>
                    <span class="symbol-name">ComposiciÃ³n de Funciones</span>
                </div>
                <p><strong>Uso:</strong> (fâˆ˜g)(x) = f(g(x)). Se lee "f compuesta con g".</p>
                <p><strong>Ejemplo:</strong> Si f(x) = xÂ² y g(x) = x+1, entonces (fâˆ˜g)(x) = (x+1)Â².</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol-large">âˆš / â¿âˆš</span>
                    <span class="symbol-name">RaÃ­z Cuadrada y RaÃ­z n-Ã©sima</span>
                </div>
                <p><strong>Uso:</strong> âˆšx es la raÃ­z cuadrada de x. â¿âˆšx es la raÃ­z n-Ã©sima de x.</p>
                <p><strong>Ejemplo:</strong> âˆš16 = 4 y Â³âˆš27 = 3.</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol-large">xâ¿</span>
                    <span class="symbol-name">Potencia o Exponente</span>
                </div>
                <p><strong>Uso:</strong> Representa x multiplicado por sÃ­ mismo n veces.</p>
                <p><strong>Ejemplo:</strong> xÂ² = xÂ·x, xÂ³ = xÂ·xÂ·x.</p>
            </div>
        </div>

        <!-- Tab 3: IntroducciÃ³n -->
        <div class="content-section" id="introduccion">
            <h2>ğŸŒŸ IntroducciÃ³n a las Funciones Elementales I</h2>

            <div class="info-box bg-gradient-info-white">
                <p class="white-text-mt0">Las funciones elementales son fundamentales en matemÃ¡ticas y tienen aplicaciones en numerosos campos:</p>
            </div>

            <div class="application-card">
                <h3>ğŸ”¬ FÃ­sica e IngenierÃ­a</h3>
                <p><strong>AplicaciÃ³n:</strong> Las funciones polinÃ³micas modelan trayectorias de proyectiles (parÃ¡bolas), movimiento acelerado, y relaciones entre variables fÃ­sicas.</p>
                <p><strong>Ejemplo real:</strong> La altura h(t) = -4.9tÂ² + 20t + 2 describe la altura en metros de un objeto lanzado hacia arriba, donde t es el tiempo en segundos.</p>
            </div>

            <div class="application-card">
                <h3>ğŸ’° EconomÃ­a y Finanzas</h3>
                <p><strong>AplicaciÃ³n:</strong> Las funciones racionales modelan costos promedio, oferta y demanda, utilidades marginales. Ayudan a optimizar producciÃ³n y maximizar ganancias.</p>
                <p><strong>Ejemplo real:</strong> El costo promedio C(x) = (1000 + 50x)/x por unidad, donde x es el nÃºmero de unidades producidas.</p>
            </div>

            <div class="application-card">
                <h3>ğŸŒ¡ï¸ Ciencias Naturales</h3>
                <p><strong>AplicaciÃ³n:</strong> Las funciones radicales aparecen en leyes fÃ­sicas como la ley de gravitaciÃ³n, velocidad de escape, y en modelos de crecimiento poblacional.</p>
                <p><strong>Ejemplo real:</strong> La velocidad v = âˆš(2gh) de un objeto en caÃ­da libre, donde g es gravedad y h la altura.</p>
            </div>

            <div class="application-card">
                <h3>ğŸ’» Ciencias de la ComputaciÃ³n</h3>
                <p><strong>AplicaciÃ³n:</strong> La composiciÃ³n de funciones es esencial en programaciÃ³n funcional, procesamiento de datos, y algoritmos de transformaciÃ³n. Las funciones inversas se usan en criptografÃ­a.</p>
                <p><strong>Ejemplo real:</strong> Cadenas de transformaciones de datos: normalizar(filtrar(ordenar(datos))).</p>
            </div>

            <div class="application-card">
                <h3>ğŸ¨ GrÃ¡ficos y DiseÃ±o</h3>
                <p><strong>AplicaciÃ³n:</strong> Las funciones polinÃ³micas y racionales se usan para crear curvas suaves en diseÃ±o grÃ¡fico, animaciÃ³n, y modelado 3D.</p>
                <p><strong>Ejemplo real:</strong> Curvas de BÃ©zier (funciones polinÃ³micas) para dibujar trayectorias suaves en software de diseÃ±o.</p>
            </div>
        </div>

        <!-- Tab 4: TeorÃ­a y PrÃ¡ctica -->
        <div class="content-section" id="teoria">
            <h2>ğŸ“š TeorÃ­a y PrÃ¡ctica</h2>

            <h3>1. Concepto de FunciÃ³n</h3>
            <div class="info-box">
                <div class="formula-box">
                    Una funciÃ³n f: A â†’ B es una regla que asigna a cada elemento x âˆˆ A exactamente un elemento y âˆˆ B
                </div>
                <p><strong>NotaciÃ³n:</strong> y = f(x), donde x es la variable independiente e y la dependiente</p>
                <p><strong>Dominio:</strong> Conjunto de valores permitidos para x</p>
                <p><strong>Imagen:</strong> Conjunto de valores que toma f(x)</p>
            </div>

            <h3>2. Funciones PolinÃ³micas</h3>
            <div class="info-box">
                <div class="formula-box">
                    P(x) = aâ‚™xâ¿ + aâ‚™â‚‹â‚xâ¿â»Â¹ + ... + aâ‚x + aâ‚€
                </div>
                <p><strong>CaracterÃ­sticas:</strong></p>
                <ul>
                    <li>Dominio: â„ (todos los reales)</li>
                    <li>Continuas en todo â„</li>
                    <li>Grado n â†’ mÃ¡ximo n raÃ­ces</li>
                </ul>
                <p><strong>Casos especiales:</strong></p>
                <ul>
                    <li>Grado 0: f(x) = c (constante)</li>
                    <li>Grado 1: f(x) = mx + b (lineal)</li>
                    <li>Grado 2: f(x) = axÂ² + bx + c (cuadrÃ¡tica)</li>
                    <li>Grado 3: f(x) = axÂ³ + bxÂ² + cx + d (cÃºbica)</li>
                </ul>
            </div>

            <div class="tool-card">
                <h3>ğŸ“Š Evaluador de Funciones PolinÃ³micas</h3>
                <p>EvalÃºa funciones cuadrÃ¡ticas f(x) = axÂ² + bx + c en un punto</p>
                
                <div class="tool-input-group">
                    <label>Coeficientes [a,b,c]:</label>
                    <input type="text" id="poly-coef" placeholder="Ej: 1,-3,2">
                </div>
                
                <div class="tool-input-group">
                    <label>Valor de x:</label>
                    <input type="number" step="any" id="poly-x" placeholder="Ej: 2">
                </div>
                
                <button class="calc-button" onclick="evaluatePolynomial()">Evaluar</button>
                <div class="calc-result" id="poly-result">Ingresa los datos</div>
            </div>

            <h3>3. Funciones Racionales</h3>
            <div class="info-box">
                <div class="formula-box">
                    f(x) = P(x)/Q(x) donde P y Q son polinomios
                </div>
                <p><strong>Dominio:</strong> â„ - {x : Q(x) = 0}</p>
                <p>Se excluyen los valores que anulan el denominador</p>
                <div class="exam-important">
                    <strong>Importante:</strong> Siempre buscar las raÃ­ces del denominador para encontrar el dominio
                </div>
            </div>

            <div class="tool-card">
                <h3>ğŸ” Calculadora de Dominio (Funciones Racionales)</h3>
                <p>Encuentra el dominio excluyendo las raÃ­ces del denominador</p>
                
                <div class="tool-input-group">
                    <label>RaÃ­ces del denominador (separadas por comas):</label>
                    <input type="text" id="domain-roots" placeholder="Ej: -2,2">
                </div>
                
                <button class="calc-button" onclick="calculateDomain()">Calcular Dominio</button>
                <div class="calc-result" id="domain-result">Ingresa las raÃ­ces</div>
            </div>

            <h3>4. Funciones Radicales</h3>
            <div class="info-box">
                <div class="formula-box">
                    f(x) = â¿âˆšg(x)
                </div>
                <p><strong>Dominio:</strong></p>
                <ul>
                    <li>Si n es par: g(x) â‰¥ 0</li>
                    <li>Si n es impar: â„ (todos los reales)</li>
                </ul>
                <p><strong>Ejemplo:</strong> f(x) = âˆš(x-2) â†’ Dom(f) = [2, âˆ)</p>
            </div>

            <h3>5. ComposiciÃ³n de Funciones</h3>
            <div class="info-box">
                <div class="formula-box">
                    (fâˆ˜g)(x) = f(g(x))
                </div>
                <p><strong>Dominio de fâˆ˜g:</strong> {x âˆˆ Dom(g) : g(x) âˆˆ Dom(f)}</p>
                <p><strong>Proceso:</strong></p>
                <ol>
                    <li>Evaluar g(x)</li>
                    <li>Sustituir el resultado en f</li>
                </ol>
            </div>

            <div class="tool-card">
                <h3>ğŸ”„ Calculadora de ComposiciÃ³n</h3>
                <p>Calcula (fâˆ˜g)(x) = f(g(x)) para f(y) = ay + b</p>
                
                <div class="tool-input-group">
                    <label>Resultado de g(x):</label>
                    <input type="number" step="any" id="comp-gx" placeholder="Ej: 5">
                </div>
                
                <div class="tool-input-group">
                    <label>Coeficientes de f [a,b] para f(y)=ay+b:</label>
                    <input type="text" id="comp-f" placeholder="Ej: 2,3">
                </div>
                
                <button class="calc-button" onclick="calculateComposition()">Calcular</button>
                <div class="calc-result" id="comp-result">Ingresa los datos</div>
            </div>

            <h3>6. FunciÃ³n Inversa</h3>
            <div class="info-box">
                <p>fâ»Â¹ es la inversa de f si:</p>
                <div class="formula-box">
                    f(fâ»Â¹(x)) = x y fâ»Â¹(f(x)) = x
                </div>
                <p><strong>Para hallar fâ»Â¹:</strong></p>
                <ol>
                    <li>Escribir y = f(x)</li>
                    <li>Despejar x en funciÃ³n de y</li>
                    <li>Intercambiar x e y</li>
                </ol>
                <div class="exam-important">
                    <strong>CondiciÃ³n:</strong> f debe ser inyectiva (uno a uno)
                </div>
            </div>
        </div>

        <!-- Tab 5: Entrenamiento -->
        <div class="content-section" id="entrenamiento">
            <h2>ğŸ’ª Entrenamiento</h2>
            
            <div class="info-box bg-gradient-warning-white">
                <h4 class="white-text-mt0">ğŸ¯ Practica tus habilidades</h4>
                <p class="white-text">Responde correctamente para ganar <strong>+10 puntos</strong>. Las respuestas incorrectas restan <strong>-5 puntos</strong>.</p>
            </div>

            <div id="training-container"></div>
        </div>

        <!-- Tab 6: Examen Final -->
        <div class="content-section" id="examen">
            <h2>ğŸ“ Examen Final de Funciones Elementales I</h2>
            
            <div class="info-box bg-gradient-danger-white">
                <h4 class="white-text-mt0">ğŸ“‹ Completa este examen para demostrar tu dominio</h4>
                <p class="white-text"><strong>Requisitos:</strong> 70% o mÃ¡s para aprobar (14/20 respuestas correctas)</p>
                <p class="white-text"><strong>Recompensa:</strong> ObtÃ©n el trofeo "Maestro de Funciones I" ğŸ†</p>
            </div>

            <div id="exam-container"></div>
            
            <div class="exam-actions">
                <button class="btn-exam" onclick="submitExam()">Enviar Examen</button>
                <button class="btn-exam-secondary" onclick="resetExam()">Reiniciar</button>
            </div>
            
            <div id="exam-results"></div>
        </div>
    </div>

    <script src="../../../../lib/storage.js"></script>
    <script src="../../../../lib/gamification.js"></script>
    <script src="../../../../lib/components.js"></script>
    <script>
        const MODULE_ID = 'funciones-elementales-1';
        const MODULE_TITLE = 'Funciones Elementales I';
        const TROPHY_ID = 'funciones-elem-1';

        document.addEventListener('DOMContentLoaded', function() {
            Components.createHeader(MODULE_TITLE, 'index.html');
            Components.createTabs([
                { id: 'glosario', label: 'Glosario', icon: 'ğŸ“–' },
                { id: 'simbolos', label: 'SÃ­mbolos', icon: 'ğŸ”£' },
                { id: 'introduccion', label: 'IntroducciÃ³n', icon: 'ğŸŒŸ' },
                { id: 'teoria', label: 'TeorÃ­a', icon: 'ğŸ“š' },
                { id: 'entrenamiento', label: 'Entrenamiento', icon: 'ğŸ’ª' },
                { id: 'examen', label: 'Examen Final', icon: 'ğŸ“' }
            ], 'glosario');
            Components.createScoreDisplay();
            loadTrainingExercises();
            loadExam();
            Gamification.updateDisplay(MODULE_ID);
        });

        // Training exercises
        const trainingExercises = [
            { id: 1, question: 'Si f(x) = 2x + 3, Â¿cuÃ¡nto vale f(5)?', answer: '13', hint: 'f(5) = 2(5) + 3 = 10 + 3 = 13' },
            { id: 2, question: 'Para f(x) = 1/(x-3), Â¿quÃ© valor estÃ¡ excluido del dominio?', answer: '3', hint: 'x - 3 = 0 â†’ x = 3' },
            { id: 3, question: 'Para f(x) = âˆš(x-4), Â¿cuÃ¡l es el valor mÃ­nimo de x en el dominio?', answer: '4', hint: 'x - 4 â‰¥ 0 â†’ x â‰¥ 4, mÃ­nimo es 4' },
            { id: 4, question: 'Si f(x) = xÂ² y g(x) = x+1, Â¿cuÃ¡nto vale (fâˆ˜g)(0)?', answer: '1', hint: 'g(0) = 0+1 = 1, f(1) = 1Â² = 1' },
            { id: 5, question: 'Si f(x) = 3x - 6, Â¿cuÃ¡nto vale fâ»Â¹(0)?', answer: '2', hint: '0 = 3x - 6 â†’ 3x = 6 â†’ x = 2' },
            { id: 6, question: 'Â¿CuÃ¡l es el grado del polinomio P(x) = xÂ³ - 2x + 1?', answer: '3', hint: 'El mayor exponente es 3' },
            { id: 7, question: 'Para f(x) = 1/(xÂ²-1), Â¿cuÃ¡ntos valores estÃ¡n excluidos del dominio?', answer: '2', hint: 'xÂ² - 1 = 0 â†’ x = Â±1 (dos valores)' },
            { id: 8, question: 'Si f(x) = xÂ³, Â¿cuÃ¡nto vale f(-2)?', answer: '-8', hint: '(-2)Â³ = (-2)Ã—(-2)Ã—(-2) = -8' },
            { id: 9, question: 'Si f(x) = âˆšx, Â¿cuÃ¡nto vale f(16)?', answer: '4', hint: 'âˆš16 = 4' },
            { id: 10, question: 'Si f(x) = x + 5, Â¿cuÃ¡nto vale fâ»Â¹(10)?', answer: '5', hint: '10 = x + 5 â†’ x = 5' },
            { id: 11, question: 'Para f(x) = 2xÂ² + 3x - 1, Â¿cuÃ¡nto vale f(0)?', answer: '-1', hint: 'f(0) = 2(0)Â² + 3(0) - 1 = -1' },
            { id: 12, question: 'Si f(x) = xÂ² y g(x) = 2x, Â¿cuÃ¡nto vale (fâˆ˜g)(3)?', answer: '36', hint: 'g(3) = 2(3) = 6, f(6) = 6Â² = 36' },
            { id: 13, question: 'Â¿CuÃ¡l es el grado de f(x) = 5xâ´ - 2xÂ² + 7?', answer: '4', hint: 'El mayor exponente es 4' },
            { id: 14, question: 'Si f(x) = 1/x, Â¿quÃ© nÃºmero estÃ¡ excluido del dominio?', answer: '0', hint: 'No se puede dividir por 0' },
            { id: 15, question: 'Para f(x) = âˆš(2x-6), Â¿cuÃ¡l es el valor mÃ­nimo de x?', answer: '3', hint: '2x - 6 â‰¥ 0 â†’ 2x â‰¥ 6 â†’ x â‰¥ 3' }
        ];

        function loadTrainingExercises() {
            const container = document.getElementById('training-container');
            container.innerHTML = trainingExercises.map(ex => `
                <div class="exercise-card">
                    <h4>Ejercicio ${ex.id}</h4>
                    <p>${ex.question}</p>
                    <input type="number" step="any" id="train-${ex.id}" class="input-field" placeholder="Tu respuesta">
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="checkTraining(${ex.id})">Verificar</button>
                        <button class="btn btn-secondary" onclick="showHint(${ex.id})">ğŸ’¡ Pista</button>
                    </div>
                    <div id="hint-${ex.id}" class="hint-box" style="display:none;">${ex.hint}</div>
                    <div id="feedback-${ex.id}" class="feedback"></div>
                </div>
            `).join('');
        }

        function checkTraining(id) {
            const exercise = trainingExercises.find(ex => ex.id === id);
            const input = document.getElementById(`train-${id}`);
            const feedback = document.getElementById(`feedback-${id}`);
            const userAnswer = parseFloat(input.value.trim());
            const correctAnswer = parseFloat(exercise.answer);
            const isCorrect = Math.abs(userAnswer - correctAnswer) < 0.01;
            
            if (isCorrect) {
                feedback.className = 'feedback success';
                feedback.textContent = 'Â¡Correcto! âœ¨ +10 puntos';
                input.disabled = true;
                Gamification.completeExercise(MODULE_ID, true);
            } else {
                feedback.className = 'feedback error';
                feedback.textContent = 'Incorrecto. -5 puntos. Intenta de nuevo.';
                Gamification.completeExercise(MODULE_ID, false);
            }
            feedback.style.display = 'block';
            Gamification.updateDisplay(MODULE_ID);
        }

        function showHint(id) {
            const hint = document.getElementById(`hint-${id}`);
            hint.style.display = hint.style.display === 'none' ? 'block' : 'none';
        }

        // Exam questions
        const examQuestions = [
            { id: 1, question: 'Si f(x) = 3x - 7, Â¿cuÃ¡nto vale f(4)?', answer: '5' },
            { id: 2, question: 'Para f(x) = 1/(x-5), Â¿quÃ© valor excluye el dominio?', answer: '5' },
            { id: 3, question: 'Para f(x) = âˆš(x-1), Â¿valor mÃ­nimo de x?', answer: '1' },
            { id: 4, question: 'Si f(x) = xÂ² y g(x) = x-2, Â¿(fâˆ˜g)(3)?', answer: '1' },
            { id: 5, question: 'Si f(x) = 2x + 8, Â¿fâ»Â¹(0)?', answer: '-4' },
            { id: 6, question: 'Grado de P(x) = 2xâµ - xÂ³ + 1', answer: '5' },
            { id: 7, question: 'Para f(x) = 1/(xÂ²-9), Â¿cuÃ¡ntos valores excluye?', answer: '2' },
            { id: 8, question: 'Si f(x) = xâ´, Â¿f(-1)?', answer: '1' },
            { id: 9, question: 'Si f(x) = âˆšx, Â¿f(9)?', answer: '3' },
            { id: 10, question: 'Si f(x) = x - 3, Â¿fâ»Â¹(7)?', answer: '10' },
            { id: 11, question: 'Para f(x) = xÂ² + 2x + 1, Â¿f(1)?', answer: '4' },
            { id: 12, question: 'Si f(x) = 2x y g(x) = xÂ², Â¿(fâˆ˜g)(2)?', answer: '8' },
            { id: 13, question: 'Grado de f(x) = 7x - 3', answer: '1' },
            { id: 14, question: 'Para f(x) = 1/(2x), Â¿valor excluido?', answer: '0' },
            { id: 15, question: 'Para f(x) = âˆš(3x), Â¿mÃ­nimo x?', answer: '0' },
            { id: 16, question: 'Si f(x) = xÂ³, Â¿f(2)?', answer: '8' },
            { id: 17, question: 'Si f(x) = 4x - 12, Â¿fâ»Â¹(0)?', answer: '3' },
            { id: 18, question: 'Para f(x) = 1/(xÂ²-4), Â¿cuÃ¡ntos excluidos?', answer: '2' },
            { id: 19, question: 'Si f(x) = xÂ² y g(x) = x+3, Â¿(fâˆ˜g)(1)?', answer: '16' },
            { id: 20, question: 'Para f(x) = âˆš(x-5), Â¿mÃ­nimo x?', answer: '5' },
            { id: 21, question: 'Si f(x) = 5x + 10, Â¿f(2)?', answer: '20' },
            { id: 22, question: 'Grado de P(x) = xÂ² - 4', answer: '2' },
            { id: 23, question: 'Si f(x) = xÂ³, Â¿f(3)?', answer: '27' },
            { id: 24, question: 'Para f(x) = 1/(x-1), Â¿valor excluido?', answer: '1' },
            { id: 25, question: 'Si f(x) = âˆšx, Â¿f(25)?', answer: '5' }
        ];

        let selectedExamQuestions = [];
        let examAnswers = {};

        function loadExam() {
            // Select 20 random questions from the pool
            const shuffled = [...examQuestions].sort(() => Math.random() - 0.5);
            selectedExamQuestions = shuffled.slice(0, 20);
            
            const container = document.getElementById('exam-container');
            container.innerHTML = selectedExamQuestions.map((q, index) => `
                <div class="exam-question">
                    <h4>Pregunta ${index + 1}</h4>
                    <p>${q.question}</p>
                    <input type="number" step="any" id="exam-${q.id}" class="input-field" placeholder="Tu respuesta">
                </div>
            `).join('');
        }

        function submitExam() {
            let correct = 0;
            const total = selectedExamQuestions.length;
            
            selectedExamQuestions.forEach(q => {
                const input = document.getElementById(`exam-${q.id}`);
                const userAnswer = parseFloat(input.value.trim());
                const correctAnswer = parseFloat(q.answer);
                
                if (Math.abs(userAnswer - correctAnswer) < 0.01) {
                    correct++;
                    input.style.border = '2px solid #22c55e';
                } else {
                    input.style.border = '2px solid #ef4444';
                }
                input.disabled = true;
            });
            
            const percentage = (correct / total) * 100;
            const passed = percentage >= 70;
            
            const resultsDiv = document.getElementById('exam-results');
            resultsDiv.className = `exam-results ${passed ? 'success' : 'error'}`;
            resultsDiv.innerHTML = `
                <h3>${passed ? 'Â¡Aprobado! ğŸ‰' : 'No Aprobado ğŸ˜'}</h3>
                <p>PuntuaciÃ³n: ${correct}/${total} (${percentage.toFixed(1)}%)</p>
                <p>${passed ? 'Â¡Has demostrado tu dominio de las funciones elementales I!' : 'Necesitas al menos 70% para aprobar. Â¡Sigue practicando!'}</p>
            `;
            resultsDiv.style.display = 'block';
            
            // Save exam result
            Storage.saveExamResult(MODULE_ID, percentage, passed);
            
            // Award trophy if passed
            if (passed) {
                Gamification.awardTrophy(TROPHY_ID);
            }
            
            Gamification.updateDisplay(MODULE_ID);
        }

        function resetExam() {
            examAnswers = {};
            loadExam();
            document.getElementById('exam-results').style.display = 'none';
        }

        // Tool functions
        function evaluatePolynomial() {
            const coefStr = document.getElementById('poly-coef').value;
            const x = parseFloat(document.getElementById('poly-x').value);
            const result = document.getElementById('poly-result');
            
            if (!coefStr || isNaN(x)) {
                result.textContent = 'âš ï¸ Completa todos los campos';
                result.className = 'calc-result error';
                return;
            }
            
            const coef = coefStr.split(',').map(n => parseFloat(n.trim()));
            if (coef.length !== 3 || coef.some(isNaN)) {
                result.textContent = 'âš ï¸ Ingresa exactamente 3 coeficientes';
                result.className = 'calc-result error';
                return;
            }
            
            const value = coef[0]*x*x + coef[1]*x + coef[2];
            
            result.innerHTML = `<strong>f(x) = ${coef[0]}xÂ² + ${coef[1]}x + ${coef[2]}</strong><br>
                <strong>f(${x}) = ${value.toFixed(2)}</strong>`;
            result.className = 'calc-result success';
        }

        function calculateDomain() {
            const rootsStr = document.getElementById('domain-roots').value;
            const result = document.getElementById('domain-result');
            
            if (!rootsStr) {
                result.textContent = 'âš ï¸ Ingresa las raÃ­ces del denominador';
                result.className = 'calc-result error';
                return;
            }
            
            const roots = rootsStr.split(',').map(n => parseFloat(n.trim())).filter(n => !isNaN(n)).sort((a,b) => a-b);
            
            if (roots.length === 0) {
                result.textContent = 'âš ï¸ No se encontraron raÃ­ces vÃ¡lidas';
                result.className = 'calc-result error';
                return;
            }
            
            result.innerHTML = `<strong>Dominio:</strong> â„ - {${roots.join(', ')}}<br>
                <strong>InterpretaciÃ³n:</strong> Todos los reales excepto ${roots.join(' y ')}`;
            result.className = 'calc-result success';
        }

        function calculateComposition() {
            const gx = parseFloat(document.getElementById('comp-gx').value);
            const fStr = document.getElementById('comp-f').value;
            const result = document.getElementById('comp-result');
            
            if (isNaN(gx) || !fStr) {
                result.textContent = 'âš ï¸ Completa todos los campos';
                result.className = 'calc-result error';
                return;
            }
            
            const coef = fStr.split(',').map(n => parseFloat(n.trim()));
            if (coef.length !== 2 || coef.some(isNaN)) {
                result.textContent = 'âš ï¸ Ingresa exactamente 2 coeficientes [a,b]';
                result.className = 'calc-result error';
                return;
            }
            
            const [a, b] = coef;
            const value = a*gx + b;
            
            result.innerHTML = `<strong>g(x) = ${gx}</strong><br>
                <strong>f(y) = ${a}y + ${b}</strong><br>
                <strong>(fâˆ˜g)(x) = f(g(x)) = ${a}(${gx}) + ${b} = ${value}</strong>`;
            result.className = 'calc-result success';
        }
    </script>
</body>
</html>

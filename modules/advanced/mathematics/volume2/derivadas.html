<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tema 4: Derivadas - MatemÃ¡ticas Avanzadas</title>
    <link rel="stylesheet" href="../../../../css/core.css">
    <link rel="stylesheet" href="../../../../css/components.css">
</head>
<body>
    <div id="header-container"></div>
    <div id="tabs-container"></div>
    <div id="score-container"></div>

    <div class="container">
        <div class="content-section active" id="teoria">
            <h2>ğŸ“š TeorÃ­a: Derivadas</h2>

            <div class="info-box" style="background: var(--gradient-primary); color: white;">
                <h4 style="color: white; margin-top: 0;">ğŸ“– Glosario de SÃ­mbolos</h4>
                <ul style="list-style: none; padding-left: 0; line-height: 2;">
                    <li><strong>f'(x), df/dx</strong> = Derivada de f</li>
                    <li><strong>y'</strong> = Derivada de y</li>
                    <li><strong>dÂ²f/dxÂ²</strong> = Derivada segunda</li>
                    <li><strong>âˆ‚</strong> = Derivada parcial</li>
                    <li><strong>Î”x, Î”y</strong> = Incrementos</li>
                </ul>
            </div>

            <h3>1. Concepto de Derivada</h3>
            <div class="info-box">
                <div class="formula-box">
                    f'(x) = lim(hâ†’0) [f(x+h) - f(x)] / h
                </div>
                <p><strong>Significado:</strong> Tasa de cambio instantÃ¡nea de f en x</p>
                <p><strong>InterpretaciÃ³n geomÃ©trica:</strong> Pendiente de la recta tangente</p>
            </div>

            <h3>2. Reglas de DerivaciÃ³n</h3>
            <table class="comparison-table">
                <thead>
                    <tr><th>FunciÃ³n</th><th>Derivada</th></tr>
                </thead>
                <tbody>
                    <tr><td>c (constante)</td><td>0</td></tr>
                    <tr><td>xâ¿</td><td>nÂ·xâ¿â»Â¹</td></tr>
                    <tr><td>sin(x)</td><td>cos(x)</td></tr>
                    <tr><td>cos(x)</td><td>-sin(x)</td></tr>
                    <tr><td>eË£</td><td>eË£</td></tr>
                    <tr><td>ln(x)</td><td>1/x</td></tr>
                    <tr><td>aË£</td><td>aË£Â·ln(a)</td></tr>
                    <tr><td>logâ‚(x)</td><td>1/(xÂ·ln(a))</td></tr>
                </tbody>
            </table>

            <h3>3. Operaciones con Derivadas</h3>
            <div class="info-box">
                <ul>
                    <li><strong>Suma:</strong> (f + g)' = f' + g'</li>
                    <li><strong>Producto por constante:</strong> (cÂ·f)' = cÂ·f'</li>
                    <li><strong>Producto:</strong> (fÂ·g)' = f'Â·g + fÂ·g'</li>
                    <li><strong>Cociente:</strong> (f/g)' = (f'Â·g - fÂ·g') / gÂ²</li>
                </ul>
            </div>

            <h3>4. Regla de la Cadena</h3>
            <div class="info-box">
                <div class="formula-box">
                    [f(g(x))]' = f'(g(x)) Â· g'(x)
                </div>
                <div class="exam-important">
                    <strong>Fundamental:</strong> Para funciones compuestas
                </div>
                <p><strong>Ejemplo:</strong> [(xÂ²+1)Â³]' = 3(xÂ²+1)Â² Â· 2x</p>
            </div>

            <h3>5. DerivaciÃ³n ImplÃ­cita</h3>
            <div class="info-box">
                <p>Para ecuaciones F(x,y)=0 donde y depende de x:</p>
                <ol>
                    <li>Derivar ambos lados respecto a x</li>
                    <li>Recordar que dy/dx es la incÃ³gnita</li>
                    <li>Despejar dy/dx</li>
                </ol>
                <p><strong>Ejemplo:</strong> xÂ²+yÂ²=25 â†’ 2x+2yÂ·y'=0 â†’ y'=-x/y</p>
            </div>

            <h3>6. Derivadas de Orden Superior</h3>
            <div class="info-box">
                <ul>
                    <li><strong>Segunda derivada:</strong> f''(x) = [f'(x)]'</li>
                    <li><strong>Tercera derivada:</strong> f'''(x) = [f''(x)]'</li>
                    <li><strong>n-Ã©sima derivada:</strong> fâ½â¿â¾(x)</li>
                </ul>
                <p><strong>InterpretaciÃ³n fÃ­sica:</strong> f''(x) es la aceleraciÃ³n si f(x) es la posiciÃ³n</p>
            </div>

            <h3>7. Aplicaciones</h3>
            <div class="info-box">
                <h4>Recta Tangente en (a, f(a)):</h4>
                <div class="formula-box">
                    y - f(a) = f'(a)(x - a)
                </div>
                <h4>Velocidad y AceleraciÃ³n:</h4>
                <ul>
                    <li>v(t) = s'(t) (velocidad)</li>
                    <li>a(t) = v'(t) = s''(t) (aceleraciÃ³n)</li>
                </ul>
            </div>
        </div>

        <div class="content-section" id="ejemplos">
            <h2>ğŸ’¡ Ejemplos Resueltos</h2>

            <div class="info-box" style="border-left-color: var(--color-success);">
                <h4 style="color: var(--color-success);">Ejemplo 1: Potencia</h4>
                <p><strong>Problema:</strong> f(x) = xâ´</p>
                <p><strong>SoluciÃ³n:</strong> f'(x) = 4xÂ³</p>
                <p><strong>Respuesta:</strong> 4xÂ³</p>
            </div>

            <div class="info-box" style="border-left-color: var(--color-success);">
                <h4 style="color: var(--color-success);">Ejemplo 2: Producto</h4>
                <p><strong>Problema:</strong> f(x) = xÂ² Â· sin(x)</p>
                <p><strong>SoluciÃ³n:</strong> f'(x) = 2xÂ·sin(x) + xÂ²Â·cos(x)</p>
                <p><strong>Respuesta:</strong> 2xÂ·sin(x) + xÂ²Â·cos(x)</p>
            </div>

            <div class="info-box" style="border-left-color: var(--color-success);">
                <h4 style="color: var(--color-success);">Ejemplo 3: Cociente</h4>
                <p><strong>Problema:</strong> f(x) = x/(x+1)</p>
                <p><strong>SoluciÃ³n:</strong> f'(x) = [1Â·(x+1) - xÂ·1]/(x+1)Â² = 1/(x+1)Â²</p>
                <p><strong>Respuesta:</strong> 1/(x+1)Â²</p>
            </div>

            <div class="info-box" style="border-left-color: var(--color-success);">
                <h4 style="color: var(--color-success);">Ejemplo 4: Cadena</h4>
                <p><strong>Problema:</strong> f(x) = (2x+3)âµ</p>
                <p><strong>SoluciÃ³n:</strong> f'(x) = 5(2x+3)â´ Â· 2 = 10(2x+3)â´</p>
                <p><strong>Respuesta:</strong> 10(2x+3)â´</p>
            </div>

            <div class="info-box" style="border-left-color: var(--color-success);">
                <h4 style="color: var(--color-success);">Ejemplo 5: Tangente</h4>
                <p><strong>Problema:</strong> Recta tangente a f(x)=xÂ² en x=1</p>
                <p><strong>SoluciÃ³n:</strong> f'(x)=2x, f'(1)=2, f(1)=1 â†’ y-1=2(x-1) â†’ y=2x-1</p>
                <p><strong>Respuesta:</strong> y = 2x - 1</p>
            </div>
        </div>

        <div class="content-section" id="herramientas">
            <h2>ğŸ› ï¸ Herramientas Interactivas</h2>

            <div class="tool-card">
                <h3>ğŸ“ Derivada de Potencias</h3>
                <p>Calcula la derivada de f(x) = axâ¿</p>
                <div class="tool-input-group">
                    <label>Coeficiente a:</label>
                    <input type="number" step="any" id="der-a" placeholder="Ej: 3">
                </div>
                <div class="tool-input-group">
                    <label>Exponente n:</label>
                    <input type="number" step="any" id="der-n" placeholder="Ej: 4">
                </div>
                <button class="calc-button" onclick="calculateDerivative()">Derivar</button>
                <div class="calc-result" id="der-result">Ingresa los datos</div>
            </div>

            <div class="tool-card">
                <h3>ğŸ“ Recta Tangente</h3>
                <p>Encuentra la ecuaciÃ³n de la recta tangente</p>
                <div class="tool-input-group">
                    <label>f(x) = axÂ² + bx + c</label>
                    <input type="text" id="tang-coef" placeholder="Ej: 1,0,0">
                </div>
                <div class="tool-input-group">
                    <label>Punto xâ‚€:</label>
                    <input type="number" step="any" id="tang-x0" placeholder="Ej: 2">
                </div>
                <button class="calc-button" onclick="calculateTangent()">Calcular</button>
                <div class="calc-result" id="tang-result">Ingresa los datos</div>
            </div>

            <div class="tool-card">
                <h3>ğŸ”¢ Derivada en un Punto</h3>
                <p>EvalÃºa f'(xâ‚€) para f(x)=xÂ²</p>
                <div class="tool-input-group">
                    <label>Punto xâ‚€:</label>
                    <input type="number" step="any" id="eval-x0" placeholder="Ej: 3">
                </div>
                <button class="calc-button" onclick="evaluateDerivative()">Evaluar</button>
                <div class="calc-result" id="eval-result">Ingresa el punto</div>
            </div>
        </div>

        <div class="content-section" id="practica">
            <h2>âœï¸ PrÃ¡ctica</h2>
            <div id="exercises-container"></div>
            <div class="navigation-buttons" style="margin-top: 2rem;">
                <button class="btn btn-secondary" onclick="window.location.href='limites.html'">â¬…ï¸ Anterior</button>
                <button class="btn btn-primary" onclick="window.location.href='index.html'">Ãndice</button>
                <button class="btn btn-secondary" onclick="window.location.href='representacion.html'">Siguiente â¡ï¸</button>
            </div>
        </div>

        <div class="content-section" id="resumen">
            <h2>ğŸ“‹ Resumen</h2>
            <div class="info-box">
                <h4>ğŸ¯ Conceptos Clave</h4>
                <ul>
                    <li><strong>Derivada:</strong> Tasa de cambio instantÃ¡nea</li>
                    <li><strong>Potencia:</strong> (xâ¿)' = nÂ·xâ¿â»Â¹</li>
                    <li><strong>Producto:</strong> (fÂ·g)' = f'g + fg'</li>
                    <li><strong>Cociente:</strong> (f/g)' = (f'g-fg')/gÂ²</li>
                    <li><strong>Cadena:</strong> [f(g)]' = f'(g)Â·g'</li>
                    <li><strong>Tangente:</strong> y-f(a) = f'(a)(x-a)</li>
                </ul>
            </div>
            <div class="navigation-buttons" style="margin-top: 2rem;">
                <button class="btn btn-secondary" onclick="window.location.href='limites.html'">â¬…ï¸ Anterior</button>
                <button class="btn btn-primary" onclick="window.location.href='index.html'">Ãndice</button>
                <button class="btn btn-secondary" onclick="window.location.href='representacion.html'">Siguiente â¡ï¸</button>
            </div>
        </div>
    </div>

    <script src="../../../../lib/storage.js"></script>
    <script src="../../../../lib/gamification.js"></script>
    <script src="../../../../lib/components.js"></script>
    <script>
        const MODULE_ID = 'derivadas';
        const MODULE_TITLE = 'Tema 4: Derivadas';

        document.addEventListener('DOMContentLoaded', function() {
            Components.createHeader(MODULE_TITLE, 'index.html');
            Components.createTabs([
                { id: 'teoria', label: 'TeorÃ­a', icon: 'ğŸ“š' },
                { id: 'ejemplos', label: 'Ejemplos', icon: 'ğŸ’¡' },
                { id: 'herramientas', label: 'Herramientas', icon: 'ğŸ› ï¸' },
                { id: 'practica', label: 'PrÃ¡ctica', icon: 'âœï¸' },
                { id: 'resumen', label: 'Resumen', icon: 'ğŸ“‹' }
            ], 'teoria');
            Components.createScoreDisplay();
            loadExercises();
            Gamification.updateDisplay(MODULE_ID);
        });

        const exercises = [
            { id: 1, question: 'Deriva xÂ³', correct: '3', hint: 'nÂ·xâ¿â»Â¹ con n=3 â†’ 3xÂ²' },
            { id: 2, question: 'Deriva 5 (constante)', correct: '0', hint: 'Constantes derivan a 0' },
            { id: 3, question: 'Deriva xâµ [coeficiente de xâ´]', correct: '5', hint: '5xâ´, coef es 5' },
            { id: 4, question: 'Deriva eË£ [coeficiente]', correct: '1', hint: '(eË£)\'=eË£, coef 1' },
            { id: 5, question: 'Deriva ln(x) [denominador]', correct: '1', hint: '1/x, denom es x' },
            { id: 6, question: 'Deriva sin(x) â†’ cos(x), evalÃºa en Ï€ [valor]', correct: '-1', hint: 'cos(Ï€)=-1' },
            { id: 7, question: 'Pendiente tangente f(x)=xÂ² en x=2', correct: '4', hint: 'f\'(x)=2x, f\'(2)=4' },
            { id: 8, question: '(xÂ²)\'=2x, segunda derivada coef', correct: '2', hint: '(2x)\'=2' },
            { id: 9, question: 'Deriva 2xÂ³ [coef de xÂ²]', correct: '6', hint: '6xÂ², coef 6' },
            { id: 10, question: 'f(x)=xâ´, f\'(1)=?', correct: '4', hint: 'f\'(x)=4xÂ³, f\'(1)=4' }
        ];

        function loadExercises() {
            document.getElementById('exercises-container').innerHTML = exercises.map(ex => `
                <div class="exercise-card"><h4>Ejercicio ${ex.id}</h4><p>${ex.question}</p>
                <input type="number" step="any" id="ex${ex.id}" class="input-field" placeholder="Tu respuesta">
                <div class="button-group">
                    <button class="btn btn-primary" onclick="checkAnswer(${ex.id})">Verificar</button>
                    <button class="btn btn-secondary" onclick="showHint(${ex.id})">ğŸ’¡ Pista</button>
                </div>
                <div id="hint${ex.id}" class="hint-box" style="display:none;">${ex.hint}</div>
                <div id="feedback${ex.id}" class="feedback"></div></div>
            `).join('');
        }

        function checkAnswer(exerciseId) {
            const exercise = exercises.find(ex => ex.id === exerciseId);
            const input = document.getElementById('ex' + exerciseId);
            const feedback = document.getElementById('feedback' + exerciseId);
            const userAnswer = parseFloat(input.value.trim());
            const isCorrect = Math.abs(userAnswer - parseFloat(exercise.correct)) <= 0.1;
            
            if (isCorrect) {
                feedback.className = 'feedback success';
                feedback.textContent = 'Â¡Correcto! âœ¨ +10 puntos';
                input.disabled = true;
                Gamification.completeExercise(MODULE_ID, true);
            } else {
                feedback.className = 'feedback error';
                feedback.textContent = 'Incorrecto. Intenta de nuevo.';
                Gamification.completeExercise(MODULE_ID, false);
            }
            feedback.style.display = 'block';
            Gamification.updateDisplay(MODULE_ID);
        }

        function showHint(exerciseId) {
            const hint = document.getElementById('hint' + exerciseId);
            hint.style.display = hint.style.display === 'none' ? 'block' : 'none';
        }

        function calculateDerivative() {
            const a = parseFloat(document.getElementById('der-a').value);
            const n = parseFloat(document.getElementById('der-n').value);
            const result = document.getElementById('der-result');
            
            if (isNaN(a) || isNaN(n)) {
                result.textContent = 'âš ï¸ Completa ambos campos';
                return;
            }
            
            const newCoef = a * n;
            const newExp = n - 1;
            
            result.innerHTML = `
                <strong>FunciÃ³n original:</strong> f(x) = ${a}x^${n}<br>
                <strong>Derivada:</strong> f'(x) = ${newCoef}x^${newExp}
            `;
        }

        function calculateTangent() {
            const coefStr = document.getElementById('tang-coef').value;
            const x0 = parseFloat(document.getElementById('tang-x0').value);
            const result = document.getElementById('tang-result');
            
            if (!coefStr || isNaN(x0)) {
                result.textContent = 'âš ï¸ Completa todos los campos';
                return;
            }
            
            const [a, b, c] = coefStr.split(',').map(n => parseFloat(n.trim()));
            const fx0 = a*x0*x0 + b*x0 + c;
            const fpx0 = 2*a*x0 + b;
            const b_tang = fx0 - fpx0*x0;
            
            result.innerHTML = `
                <strong>Punto:</strong> (${x0}, ${fx0.toFixed(2)})<br>
                <strong>Pendiente:</strong> m = ${fpx0.toFixed(2)}<br>
                <strong>EcuaciÃ³n:</strong> y = ${fpx0.toFixed(2)}x + ${b_tang.toFixed(2)}
            `;
        }

        function evaluateDerivative() {
            const x0 = parseFloat(document.getElementById('eval-x0').value);
            const result = document.getElementById('eval-result');
            
            if (isNaN(x0)) {
                result.textContent = 'âš ï¸ Ingresa el punto';
                return;
            }
            
            const derValue = 2 * x0;
            
            result.innerHTML = `
                <strong>f(x) = xÂ²</strong><br>
                <strong>f'(x) = 2x</strong><br>
                <strong>f'(${x0}) = ${derValue}</strong>
            `;
        }
    </script>
</body>
</html>
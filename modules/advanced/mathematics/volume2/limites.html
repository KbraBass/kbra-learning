<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LÃ­mites - MatemÃ¡ticas Avanzadas</title>
    <link rel="stylesheet" href="../../../../css/core.css">
    <link rel="stylesheet" href="../../../../css/components.css">
</head>
<body>
    <div id="header-container"></div>
    <div id="tabs-container"></div>
    <div id="score-container"></div>

    <div class="container">
        <!-- Tab 1: Glosario -->
        <div class="content-section active" id="glosario">
            <h2>ğŸ“– Glosario de LÃ­mites</h2>

            <div class="info-box bg-gradient-primary-white">
                <p class="white-text-mt0">Aprende los tÃ©rminos clave relacionados con lÃ­mites y continuidad:</p>
            </div>

            <div class="term-card">
                <h3>ğŸ”µ LÃ­mite</h3>
                <p><strong>DefiniciÃ³n:</strong> El valor al que se aproxima una funciÃ³n f(x) cuando x se acerca a un punto a. Se denota lim(xâ†’a) f(x) = L. Significa que f(x) puede hacerse arbitrariamente cercana a L tomando x suficientemente cerca de a.</p>
                <p><strong>Ejemplo:</strong> lim(xâ†’2) xÂ² = 4 porque cuando x se acerca a 2, xÂ² se acerca a 4.</p>
            </div>

            <div class="term-card">
                <h3>ğŸ”µ LÃ­mites Laterales</h3>
                <p><strong>DefiniciÃ³n:</strong> LÃ­mite por la derecha lim(xâ†’aâº) f(x) cuando x se acerca a 'a' con x > a. LÃ­mite por la izquierda lim(xâ†’aâ») f(x) cuando x < a. El lÃ­mite existe si y solo si ambos lÃ­mites laterales existen y son iguales.</p>
                <p><strong>Ejemplo:</strong> Para f(x) = |x|/x, lim(xâ†’0âº) = 1 y lim(xâ†’0â») = -1, entonces lim(xâ†’0) no existe.</p>
            </div>

            <div class="term-card">
                <h3>ğŸ”µ IndeterminaciÃ³n</h3>
                <p><strong>DefiniciÃ³n:</strong> Expresiones como 0/0, âˆ/âˆ, 0Â·âˆ, âˆ-âˆ, 1^âˆ, 0^0, âˆ^0 que requieren tÃ©cnicas especiales (factorizaciÃ³n, racionalizaciÃ³n, L'HÃ´pital) para evaluar el lÃ­mite.</p>
                <p><strong>Ejemplo:</strong> lim(xâ†’1) (xÂ²-1)/(x-1) = 0/0 (indeterminaciÃ³n), pero factorizando: lim(x+1) = 2.</p>
            </div>

            <div class="term-card">
                <h3>ï¿½ï¿½ Regla de L'HÃ´pital</h3>
                <p><strong>DefiniciÃ³n:</strong> TÃ©cnica para resolver indeterminaciones 0/0 o âˆ/âˆ derivando numerador y denominador: si lim f(x)/g(x) es 0/0 o âˆ/âˆ, entonces lim f(x)/g(x) = lim f'(x)/g'(x) (si este Ãºltimo existe).</p>
                <p><strong>Ejemplo:</strong> lim(xâ†’0) sin(x)/x = 0/0 â†’ lim cos(x)/1 = 1.</p>
            </div>

            <div class="term-card">
                <h3>ğŸ”µ Continuidad</h3>
                <p><strong>DefiniciÃ³n:</strong> Una funciÃ³n f es continua en x=a si: (1) f(a) existe, (2) lim(xâ†’a) f(x) existe, y (3) lim(xâ†’a) f(x) = f(a). Si alguna condiciÃ³n falla, hay discontinuidad (evitable, de salto, o infinita).</p>
                <p><strong>Ejemplo:</strong> f(x) = xÂ² es continua en x=2 porque f(2)=4 y lim(xâ†’2) xÂ²=4.</p>
            </div>
        </div>

        <!-- Tab 2: SÃ­mbolos -->
        <div class="content-section" id="simbolos">
            <h2>ğŸ”£ SÃ­mbolos y NotaciÃ³n</h2>

            <div class="info-box bg-gradient-primary-white">
                <p class="white-text-mt0">NotaciÃ³n matemÃ¡tica esencial para lÃ­mites y continuidad:</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">lim<sub>xâ†’a</sub> f(x)</span>
                    <span class="symbol-name">LÃ­mite</span>
                </div>
                <p><strong>Significado:</strong> LÃ­mite de f(x) cuando x tiende a a</p>
                <p><strong>Uso:</strong> lim<sub>xâ†’2</sub> xÂ² = 4. Expresa el valor al que se aproxima f(x).</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">lim<sub>xâ†’aâº</sub>, lim<sub>xâ†’aâ»</sub></span>
                    <span class="symbol-name">LÃ­mites laterales</span>
                </div>
                <p><strong>Significado:</strong> LÃ­mite por la derecha (x > a) y por la izquierda (x < a)</p>
                <p><strong>Uso:</strong> lim<sub>xâ†’0âº</sub> 1/x = +âˆ, lim<sub>xâ†’0â»</sub> 1/x = -âˆ</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">lim<sub>xâ†’âˆ</sub>, lim<sub>xâ†’-âˆ</sub></span>
                    <span class="symbol-name">LÃ­mites al infinito</span>
                </div>
                <p><strong>Significado:</strong> LÃ­mite cuando x crece sin lÃ­mite (positivo o negativo)</p>
                <p><strong>Uso:</strong> lim<sub>xâ†’âˆ</sub> 1/x = 0. Comportamiento asintÃ³tico.</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">0/0, âˆ/âˆ</span>
                    <span class="symbol-name">Indeterminaciones</span>
                </div>
                <p><strong>Significado:</strong> Formas indeterminadas que requieren tÃ©cnicas especiales</p>
                <p><strong>Uso:</strong> Requieren factorizaciÃ³n, racionalizaciÃ³n, o regla de L'HÃ´pital.</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">f'(x)</span>
                    <span class="symbol-name">Derivada</span>
                </div>
                <p><strong>Significado:</strong> Derivada de f (usado en regla de L'HÃ´pital)</p>
                <p><strong>Uso:</strong> lim f(x)/g(x) = lim f'(x)/g'(x) para indeterminaciones 0/0 o âˆ/âˆ</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">âˆ</span>
                    <span class="symbol-name">Infinito</span>
                </div>
                <p><strong>Significado:</strong> Concepto de cantidad sin lÃ­mite (no es un nÃºmero real)</p>
                <p><strong>Uso:</strong> lim<sub>xâ†’0</sub> 1/xÂ² = +âˆ. Crecimiento sin cota.</p>
            </div>

            <div class="symbol-card">
                <div class="symbol-header">
                    <span class="symbol">Îµ, Î´</span>
                    <span class="symbol-name">Ã‰psilon, delta</span>
                </div>
                <p><strong>Significado:</strong> SÃ­mbolos de la definiciÃ³n formal de lÃ­mite (Ã©psilon-delta)</p>
                <p><strong>Uso:</strong> âˆ€Îµ>0, âˆƒÎ´>0: si 0<|x-a|<Î´ entonces |f(x)-L|<Îµ</p>
            </div>
        </div>

        <!-- Tab 3: IntroducciÃ³n -->
        <div class="content-section" id="introduccion">
            <h2>ğŸ“š IntroducciÃ³n a LÃ­mites</h2>

            <div class="info-box bg-gradient-primary-white">
                <p class="white-text-mt0">Los lÃ­mites son fundamentales en cÃ¡lculo y anÃ¡lisis matemÃ¡tico. Â¡Descubre sus aplicaciones!</p>
            </div>

            <div class="application-card">
                <h3>ğŸ—ï¸ IngenierÃ­a y FÃ­sica</h3>
                <ul>
                    <li><strong>Velocidad instantÃ¡nea:</strong> v(t) = lim(Î”tâ†’0) Î”s/Î”t define velocidad en un instante</li>
                    <li><strong>AceleraciÃ³n:</strong> a(t) = lim(Î”tâ†’0) Î”v/Î”t calcula cambio de velocidad instantÃ¡neo</li>
                    <li><strong>Resistencia de materiales:</strong> TensiÃ³n = lim(Aâ†’0) F/A en puntos crÃ­ticos</li>
                    <li><strong>Circuitos elÃ©ctricos:</strong> AnÃ¡lisis de comportamiento cuando tâ†’âˆ o tâ†’0âº</li>
                    <li><strong>MecÃ¡nica de fluidos:</strong> PresiÃ³n en un punto como lÃ­mite de fuerzas</li>
                </ul>
            </div>

            <div class="application-card">
                <h3>ğŸ’° EconomÃ­a y Finanzas</h3>
                <ul>
                    <li><strong>Costo marginal:</strong> C'(x) = lim(Î”xâ†’0) Î”C/Î”x mide costo de una unidad adicional</li>
                    <li><strong>Ingreso marginal:</strong> AnÃ¡lisis de cambio en ingresos mediante lÃ­mites</li>
                    <li><strong>InterÃ©s continuo:</strong> A = lim(nâ†’âˆ) P(1+r/n)^(nt) = Pe^(rt)</li>
                    <li><strong>Elasticidad:</strong> E = lim(Î”Pâ†’0) (Î”Q/Q)/(Î”P/P) en demanda y oferta</li>
                    <li><strong>Valor presente:</strong> VP = lim(tâ†’âˆ) de flujos de efectivo descontados</li>
                </ul>
            </div>

            <div class="application-card">
                <h3>ğŸ§¬ Ciencias Naturales</h3>
                <ul>
                    <li><strong>Tasas de crecimiento:</strong> dP/dt = lim(Î”tâ†’0) Î”P/Î”t en poblaciones</li>
                    <li><strong>Concentraciones:</strong> [C] = lim(Vâ†’0) n/V define concentraciÃ³n puntual</li>
                    <li><strong>CinÃ©tica quÃ­mica:</strong> Velocidad de reacciÃ³n como lÃ­mite de Î”[A]/Î”t</li>
                    <li><strong>DifusiÃ³n molecular:</strong> Flujo = lim(Î”xâ†’0) -DÂ·Î”C/Î”x (Ley de Fick)</li>
                    <li><strong>Decaimiento radiactivo:</strong> N(t) con comportamiento asintÃ³tico a 0</li>
                </ul>
            </div>

            <div class="application-card">
                <h3>ğŸ’» ComputaciÃ³n y TecnologÃ­a</h3>
                <ul>
                    <li><strong>AnÃ¡lisis de algoritmos:</strong> Complejidad temporal lim(nâ†’âˆ) T(n)/f(n)</li>
                    <li><strong>Procesamiento de seÃ±ales:</strong> Respuesta de filtros cuando Ï‰â†’0 o Ï‰â†’âˆ</li>
                    <li><strong>Inteligencia artificial:</strong> Convergencia de gradiente descendente</li>
                    <li><strong>GrÃ¡ficos por computadora:</strong> Suavizado de curvas mediante lÃ­mites</li>
                    <li><strong>Redes neuronales:</strong> LÃ­mites en funciones de activaciÃ³n (sigmoide, tanh)</li>
                </ul>
            </div>

            <div class="application-card">
                <h3>ğŸ“Š MatemÃ¡ticas y AnÃ¡lisis</h3>
                <ul>
                    <li><strong>Derivadas:</strong> f'(x) = lim(hâ†’0) [f(x+h)-f(x)]/h define la derivada</li>
                    <li><strong>Integrales:</strong> âˆ«f(x)dx = lim(nâ†’âˆ) Î£f(xáµ¢)Î”x (sumas de Riemann)</li>
                    <li><strong>Series:</strong> Convergencia de Î£aâ‚™ mediante lim(nâ†’âˆ) Sâ‚™</li>
                    <li><strong>Ecuaciones diferenciales:</strong> Comportamiento asintÃ³tico de soluciones</li>
                    <li><strong>Teoremas fundamentales:</strong> Base del cÃ¡lculo diferencial e integral</li>
                </ul>
            </div>
        </div>

        <!-- Tab 4: TeorÃ­a -->
        <div class="content-section" id="teoria">
            <h2>ğŸ“– TeorÃ­a y PrÃ¡ctica: LÃ­mites</h2>

            <div class="info-box bg-gradient-primary-white">
                <p class="white-text-mt0">Domina los conceptos fundamentales y tÃ©cnicas de cÃ¡lculo de lÃ­mites</p>
            </div>

            <h3>1. Concepto de LÃ­mite</h3>
            <div class="info-box">
                <div class="formula-box">
                    lim<sub>xâ†’a</sub> f(x) = L
                </div>
                <p><strong>Significado intuitivo:</strong> Cuando x se acerca a a, f(x) se acerca a L</p>
                <p><strong>DefiniciÃ³n formal (Îµ-Î´):</strong> Para todo Îµ > 0, existe Î´ > 0 tal que si 0 < |x - a| < Î´ entonces |f(x) - L| < Îµ</p>
                <ul>
                    <li>El lÃ­mite describe el comportamiento cerca de a (no necesariamente en a)</li>
                    <li>f(a) puede no estar definida, pero el lÃ­mite puede existir</li>
                    <li>Si el lÃ­mite existe, es Ãºnico</li>
                </ul>
            </div>

            <h3>2. LÃ­mites Laterales</h3>
            <div class="info-box">
                <p><strong>LÃ­mite por la derecha:</strong> lim<sub>xâ†’aâº</sub> f(x) cuando x se acerca a 'a' con x > a</p>
                <p><strong>LÃ­mite por la izquierda:</strong> lim<sub>xâ†’aâ»</sub> f(x) cuando x se acerca a 'a' con x < a</p>
                <div class="exam-important">
                    <strong>Teorema:</strong> lim<sub>xâ†’a</sub> f(x) existe â‡” lim<sub>xâ†’aâº</sub> f(x) = lim<sub>xâ†’aâ»</sub> f(x)
                </div>
                <p><strong>Ejemplo:</strong> Para f(x) = |x|/x:</p>
                <ul>
                    <li>lim<sub>xâ†’0âº</sub> |x|/x = 1 (x > 0 â†’ |x| = x)</li>
                    <li>lim<sub>xâ†’0â»</sub> |x|/x = -1 (x < 0 â†’ |x| = -x)</li>
                    <li>Como 1 â‰  -1, el lÃ­mite no existe</li>
                </ul>
            </div>

            <h3>3. Propiedades de LÃ­mites</h3>
            <div class="info-box">
                <p>Si lim<sub>xâ†’a</sub> f(x) = L y lim<sub>xâ†’a</sub> g(x) = M, entonces:</p>
                <ul>
                    <li><strong>Suma:</strong> lim[f(x) + g(x)] = L + M</li>
                    <li><strong>Resta:</strong> lim[f(x) - g(x)] = L - M</li>
                    <li><strong>Producto:</strong> lim[f(x) Â· g(x)] = L Â· M</li>
                    <li><strong>Cociente:</strong> lim[f(x) / g(x)] = L / M (si M â‰  0)</li>
                    <li><strong>Potencia:</strong> lim[f(x)]â¿ = Lâ¿</li>
                    <li><strong>Constante:</strong> lim[c Â· f(x)] = c Â· L</li>
                </ul>
            </div>

            <h3>4. Indeterminaciones y TÃ©cnicas</h3>
            <table class="comparison-table">
                <thead>
                    <tr><th>Forma Indeterminada</th><th>TÃ©cnicas de ResoluciÃ³n</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td>0/0</td>
                        <td>Factorizar y simplificar, racionalizar, L'HÃ´pital</td>
                    </tr>
                    <tr>
                        <td>âˆ/âˆ</td>
                        <td>Dividir por mayor potencia, L'HÃ´pital</td>
                    </tr>
                    <tr>
                        <td>0 Â· âˆ</td>
                        <td>Convertir a cociente (0/0 o âˆ/âˆ)</td>
                    </tr>
                    <tr>
                        <td>âˆ - âˆ</td>
                        <td>Factorizar comÃºn, racionalizar</td>
                    </tr>
                    <tr>
                        <td>1^âˆ, 0^0, âˆ^0</td>
                        <td>Usar logaritmos: e^(lim ln f)</td>
                    </tr>
                </tbody>
            </table>

            <h3>5. Regla de L'HÃ´pital</h3>
            <div class="info-box">
                <p><strong>Enunciado:</strong> Si lim f(x)/g(x) es de la forma 0/0 o âˆ/âˆ, entonces:</p>
                <div class="formula-box">
                    lim<sub>xâ†’a</sub> f(x)/g(x) = lim<sub>xâ†’a</sub> f'(x)/g'(x)
                </div>
                <div class="exam-important">
                    <strong>Condiciones:</strong>
                    <ul>
                        <li>Solo aplicable a indeterminaciones 0/0 o âˆ/âˆ</li>
                        <li>f'(x) y g'(x) deben existir cerca de a</li>
                        <li>lim f'(x)/g'(x) debe existir o ser Â±âˆ</li>
                        <li>Puede aplicarse repetidamente si persiste la indeterminaciÃ³n</li>
                    </ul>
                </div>
            </div>

            <h3>6. LÃ­mites al Infinito</h3>
            <div class="info-box">
                <p><strong>Funciones polinÃ³micas:</strong> Domina el tÃ©rmino de mayor grado</p>
                <div class="formula-box">
                    lim<sub>xâ†’âˆ</sub> (aâ‚™xâ¿ + aâ‚™â‚‹â‚xâ¿â»Â¹ + ... + aâ‚€) = Â±âˆ Â· signo(aâ‚™)
                </div>
                <p><strong>Funciones racionales P(x)/Q(x):</strong></p>
                <ul>
                    <li><strong>grado(P) > grado(Q):</strong> lÃ­mite = Â±âˆ</li>
                    <li><strong>grado(P) = grado(Q):</strong> lÃ­mite = coeficiente principal de P / coeficiente principal de Q</li>
                    <li><strong>grado(P) < grado(Q):</strong> lÃ­mite = 0</li>
                </ul>
                <p><strong>LÃ­mites notables:</strong></p>
                <ul>
                    <li>lim<sub>xâ†’âˆ</sub> 1/x = 0</li>
                    <li>lim<sub>xâ†’âˆ</sub> e^x = âˆ, lim<sub>xâ†’-âˆ</sub> e^x = 0</li>
                    <li>lim<sub>xâ†’âˆ</sub> (1 + 1/x)^x = e</li>
                </ul>
            </div>

            <h3>7. Continuidad</h3>
            <div class="info-box">
                <p><strong>DefiniciÃ³n:</strong> f es continua en x = a si:</p>
                <ol>
                    <li>f(a) existe (a estÃ¡ en el dominio)</li>
                    <li>lim<sub>xâ†’a</sub> f(x) existe</li>
                    <li>lim<sub>xâ†’a</sub> f(x) = f(a)</li>
                </ol>
                <p><strong>Tipos de discontinuidad:</strong></p>
                <ul>
                    <li><strong>Evitable:</strong> lim<sub>xâ†’a</sub> f(x) existe pero â‰  f(a) (puede "rellenarse")</li>
                    <li><strong>Salto:</strong> lim<sub>xâ†’aâº</sub> â‰  lim<sub>xâ†’aâ»</sub> (lÃ­mites laterales diferentes)</li>
                    <li><strong>Infinita:</strong> lim<sub>xâ†’a</sub> f(x) = Â±âˆ (asÃ­ntota vertical)</li>
                </ul>
            </div>

            <h3>ğŸ› ï¸ Herramientas Interactivas</h3>

            <div class="tool-card">
                <h4>ğŸ¯ Calculadora de LÃ­mites PolinÃ³micos</h4>
                <p>EvalÃºa lÃ­mites de funciones polinÃ³micas por sustituciÃ³n directa</p>
                <div class="tool-input-group">
                    <label>Coeficientes [a,b,c] para f(x) = axÂ² + bx + c:</label>
                    <input type="text" id="lim-coef" placeholder="Ej: 1,0,1" class="tool-input">
                </div>
                <div class="tool-input-group">
                    <label>x tiende a:</label>
                    <input type="number" step="any" id="lim-a" placeholder="Ej: 2" class="tool-input">
                </div>
                <button class="calc-button" onclick="calculateLimit()">Calcular LÃ­mite</button>
                <div class="calc-result" id="lim-result">Ingresa los datos y haz clic en Calcular</div>
            </div>

            <div class="tool-card">
                <h4>âˆ Analizador de LÃ­mites al Infinito</h4>
                <p>Analiza lÃ­mites de funciones racionales cuando xâ†’âˆ</p>
                <div class="tool-input-group">
                    <label>Grado del numerador:</label>
                    <input type="number" id="inf-num" placeholder="Ej: 2" class="tool-input">
                </div>
                <div class="tool-input-group">
                    <label>Grado del denominador:</label>
                    <input type="number" id="inf-den" placeholder="Ej: 2" class="tool-input">
                </div>
                <div class="tool-input-group">
                    <label>Coeficiente principal del numerador:</label>
                    <input type="number" step="any" id="inf-a" placeholder="Ej: 3" class="tool-input">
                </div>
                <div class="tool-input-group">
                    <label>Coeficiente principal del denominador:</label>
                    <input type="number" step="any" id="inf-b" placeholder="Ej: 1" class="tool-input">
                </div>
                <button class="calc-button" onclick="calculateInfiniteLimit()">Analizar</button>
                <div class="calc-result" id="inf-result">Ingresa los datos y haz clic en Analizar</div>
            </div>

            <div class="tool-card">
                <h4>ğŸ“Š Verificador de Continuidad</h4>
                <p>Verifica si una funciÃ³n es continua en un punto dado</p>
                <div class="tool-input-group">
                    <label>Valor de f(a):</label>
                    <input type="number" step="any" id="cont-fa" placeholder="Ej: 4" class="tool-input">
                </div>
                <div class="tool-input-group">
                    <label>Valor de lim(xâ†’a) f(x):</label>
                    <input type="number" step="any" id="cont-lim" placeholder="Ej: 4" class="tool-input">
                </div>
                <button class="calc-button" onclick="checkContinuity()">Verificar Continuidad</button>
                <div class="calc-result" id="cont-result">Ingresa los datos y haz clic en Verificar</div>
            </div>
        </div>

        <!-- Tab 5: Entrenamiento -->
        <div class="content-section" id="entrenamiento">
            <h2>ğŸ¯ Entrenamiento: LÃ­mites</h2>

            <div class="info-box bg-gradient-primary-white">
                <p class="white-text-mt0">Practica con estos ejercicios para dominar los lÃ­mites. Â¡Cada respuesta correcta suma +10 puntos!</p>
            </div>

            <div id="training-container"></div>

            <div class="navigation-buttons mt-2rem">
                <button class="btn btn-secondary" onclick="window.location.href='representacion.html'">â¬…ï¸ Anterior</button>
                <button class="btn btn-primary" onclick="window.location.href='index.html'">ğŸ  Ãndice</button>
                <button class="btn btn-secondary" onclick="window.location.href='continuidad.html'">Siguiente â¡ï¸</button>
            </div>
        </div>

        <!-- Tab 6: Examen Final -->
        <div class="content-section" id="examen">
            <h2>ğŸ“ Examen Final: LÃ­mites</h2>

            <div class="info-box bg-gradient-primary-white">
                <p class="white-text-mt0">Completa este examen para demostrar tu dominio de los lÃ­mites.</p>
                <p class="white-text"><strong>Requisitos:</strong> 70% o mÃ¡s para aprobar (14/20 respuestas correctas)</p>
                <p class="white-text"><strong>Recompensa:</strong> ObtÃ©n el trofeo "Maestro de LÃ­mites" ğŸ†</p>
            </div>

            <div id="exam-container"></div>

            <div class="navigation-buttons mt-2rem">
                <button class="btn btn-secondary" onclick="window.location.href='representacion.html'">â¬…ï¸ Anterior</button>
                <button class="btn btn-primary" onclick="window.location.href='index.html'">ğŸ  Ãndice</button>
                <button class="btn btn-secondary" onclick="window.location.href='continuidad.html'">Siguiente â¡ï¸</button>
            </div>
        </div>
    </div>

    <script src="../../../../lib/storage.js"></script>
    <script src="../../../../lib/gamification.js"></script>
    <script src="../../../../lib/components.js"></script>
    <script>
        const MODULE_ID = 'limites';
        const MODULE_TITLE = 'LÃ­mites';
        const TROPHY_ID = 'limites';

        // Tab configuration
        const TABS = [
            { id: 'glosario', name: 'Glosario', icon: 'ğŸ“–' },
            { id: 'simbolos', name: 'SÃ­mbolos', icon: 'ğŸ”£' },
            { id: 'introduccion', name: 'IntroducciÃ³n', icon: 'ğŸ“š' },
            { id: 'teoria', name: 'TeorÃ­a', icon: 'ğŸ“–' },
            { id: 'entrenamiento', name: 'Entrenamiento', icon: 'ğŸ¯' },
            { id: 'examen', name: 'Examen Final', icon: 'ğŸ“' }
        ];

        // Training questions (15 questions, +10 correct / -5 incorrect)
        const TRAINING_QUESTIONS = [
            {
                question: "Â¿CuÃ¡l es el valor de lim(xâ†’2) (x + 3)?",
                options: ["3", "5", "No existe", "âˆ"],
                correct: 1,
                explanation: "Por sustituciÃ³n directa: 2 + 3 = 5"
            },
            {
                question: "Si lim(xâ†’aâº) f(x) = 3 y lim(xâ†’aâ») f(x) = 3, Â¿existe lim(xâ†’a) f(x)?",
                options: ["No", "SÃ­, y es 3", "SÃ­, y es 6", "Depende de f(a)"],
                correct: 1,
                explanation: "Si los lÃ­mites laterales coinciden, el lÃ­mite existe y es igual a ese valor"
            },
            {
                question: "Â¿QuÃ© tÃ©cnica se usa para lim(xâ†’1) (xÂ²-1)/(x-1)?",
                options: ["L'HÃ´pital", "FactorizaciÃ³n", "SustituciÃ³n directa", "RacionalizaciÃ³n"],
                correct: 1,
                explanation: "Es 0/0, factorizamos: (x+1)(x-1)/(x-1) = x+1 â†’ 2"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’âˆ) (3xÂ²+1)/(xÂ²-2)?",
                options: ["0", "1", "3", "âˆ"],
                correct: 2,
                explanation: "Mismo grado: cociente de coeficientes principales = 3/1 = 3"
            },
            {
                question: "Â¿La regla de L'HÃ´pital se aplica a la forma 1/0?",
                options: ["SÃ­", "No, solo a 0/0 o âˆ/âˆ", "SÃ­, pero da 0", "Depende"],
                correct: 1,
                explanation: "L'HÃ´pital solo se aplica a indeterminaciones 0/0 o âˆ/âˆ"
            },
            {
                question: "Una funciÃ³n es continua en x=a si:",
                options: ["f(a) existe", "lim(xâ†’a) f(x) = f(a)", "f'(a) existe", "f es derivable"],
                correct: 1,
                explanation: "Continuidad requiere que f(a) exista, lim exista, y lim f(x) = f(a)"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’0) sin(x)/x?",
                options: ["0", "1", "âˆ", "No existe"],
                correct: 1,
                explanation: "LÃ­mite notable: lim(xâ†’0) sin(x)/x = 1 (o usar L'HÃ´pital)"
            },
            {
                question: "Si lim(xâ†’âˆ) P(x)/Q(x) donde grado(P) < grado(Q), el lÃ­mite es:",
                options: ["âˆ", "0", "1", "Cociente de coeficientes"],
                correct: 1,
                explanation: "Si el grado del numerador es menor, el lÃ­mite es 0"
            },
            {
                question: "Â¿QuÃ© tipo de discontinuidad tiene f(x) = 1/x en x=0?",
                options: ["Evitable", "Salto", "Infinita", "No tiene"],
                correct: 2,
                explanation: "lim(xâ†’0) 1/x = Â±âˆ, es una asÃ­ntota vertical (discontinuidad infinita)"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’âˆ) 1/x?",
                options: ["1", "0", "âˆ", "No existe"],
                correct: 1,
                explanation: "Cuando x crece sin lÃ­mite, 1/x se aproxima a 0"
            },
            {
                question: "Para resolver lim con forma âˆ-âˆ, se recomienda:",
                options: ["L'HÃ´pital directamente", "Factorizar o racionalizar", "Sustituir", "Dividir por x"],
                correct: 1,
                explanation: "âˆ-âˆ requiere factorizaciÃ³n o racionalizaciÃ³n para convertir a otra forma"
            },
            {
                question: "Si lim(xâ†’2âº) f(x) = 5 y lim(xâ†’2â») f(x) = 3, entonces:",
                options: ["lim(xâ†’2) f(x) = 4", "lim(xâ†’2) f(x) = 5", "lim(xâ†’2) f(x) no existe", "f(2) = 4"],
                correct: 2,
                explanation: "Los lÃ­mites laterales son diferentes, por lo tanto el lÃ­mite no existe"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’âˆ) e^x?",
                options: ["0", "1", "e", "âˆ"],
                correct: 3,
                explanation: "La funciÃ³n exponencial e^x crece sin lÃ­mite cuando xâ†’âˆ"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’0) (1-cos(x))/xÂ²?",
                options: ["0", "1/2", "1", "No existe"],
                correct: 1,
                explanation: "Forma 0/0, usando L'HÃ´pital dos veces o lÃ­mite notable: 1/2"
            },
            {
                question: "Si f es continua en [a,b] y f(a) < 0 < f(b), entonces:",
                options: ["f no tiene raÃ­ces", "f tiene al menos una raÃ­z en (a,b)", "f'(c) = 0", "f es derivable"],
                correct: 1,
                explanation: "Teorema del valor intermedio: existe c en (a,b) con f(c) = 0"
            }
        ];

        // Exam questions (20 questions from 25-question bank)
        const EXAM_QUESTIONS = [
            {
                question: "Â¿CuÃ¡l es lim(xâ†’3) (xÂ² - 9)/(x - 3)?",
                options: ["0", "3", "6", "No existe"],
                correct: 2,
                explanation: "Factorizando: (x+3)(x-3)/(x-3) = x+3 â†’ 6"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’âˆ) (2xÂ³ + x)/(xÂ³ - 1)?",
                options: ["0", "1", "2", "âˆ"],
                correct: 2,
                explanation: "Mismo grado: 2/1 = 2"
            },
            {
                question: "Si lim(xâ†’a) f(x) = L, Â¿quÃ© se puede afirmar sobre f(a)?",
                options: ["f(a) = L", "f(a) puede no existir", "f(a) â‰  L", "f es continua en a"],
                correct: 1,
                explanation: "El lÃ­mite puede existir aunque f(a) no estÃ© definida"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’0âº) ln(x)?",
                options: ["0", "1", "-âˆ", "âˆ"],
                correct: 2,
                explanation: "Cuando xâ†’0âº, ln(x)â†’-âˆ"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’âˆ) (x+1)/x?",
                options: ["0", "1", "âˆ", "No existe"],
                correct: 1,
                explanation: "(x+1)/x = 1 + 1/x â†’ 1 cuando xâ†’âˆ"
            },
            {
                question: "Usando L'HÃ´pital, lim(xâ†’0) (e^x - 1)/x es:",
                options: ["0", "1", "e", "âˆ"],
                correct: 1,
                explanation: "0/0 â†’ lim e^x/1 = e^0 = 1"
            },
            {
                question: "Â¿QuÃ© valor hace que f(x) = (xÂ²-4)/(x-2) sea continua en x=2?",
                options: ["0", "2", "4", "No se puede"],
                correct: 2,
                explanation: "lim(xâ†’2) (xÂ²-4)/(x-2) = lim(x+2) = 4, definir f(2) = 4"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’0) xÂ·sin(1/x)?",
                options: ["0", "1", "No existe", "âˆ"],
                correct: 0,
                explanation: "Teorema del sandwich: -|x| â‰¤ xÂ·sin(1/x) â‰¤ |x| â†’ 0"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’âˆ) arctan(x)?",
                options: ["0", "Ï€/4", "Ï€/2", "Ï€"],
                correct: 2,
                explanation: "arctan(x) â†’ Ï€/2 cuando xâ†’âˆ"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’1) (xÂ³-1)/(x-1)?",
                options: ["1", "2", "3", "No existe"],
                correct: 2,
                explanation: "(xÂ³-1)/(x-1) = xÂ²+x+1 â†’ 3"
            },
            {
                question: "Si f(x) = xÂ² para xâ‰ 0 y f(0) = 1, Â¿f es continua en x=0?",
                options: ["SÃ­", "No", "Depende", "No estÃ¡ definida"],
                correct: 1,
                explanation: "lim(xâ†’0) xÂ² = 0 â‰  f(0) = 1, no es continua"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’0) (tan(x))/x?",
                options: ["0", "1", "âˆ", "No existe"],
                correct: 1,
                explanation: "tan(x)/x = sin(x)/(xÂ·cos(x)) â†’ 1/1 = 1"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’âˆ) (âˆš(xÂ²+1) - x)?",
                options: ["0", "1/2", "1", "âˆ"],
                correct: 0,
                explanation: "Racionalizar: [âˆš(xÂ²+1) - x]Â·[âˆš(xÂ²+1) + x]/[âˆš(xÂ²+1) + x] = 1/[âˆš(xÂ²+1) + x] â†’ 0"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’âˆ) (1 + 1/x)^x?",
                options: ["1", "e", "âˆ", "0"],
                correct: 1,
                explanation: "DefiniciÃ³n del nÃºmero e: lim(xâ†’âˆ) (1 + 1/x)^x = e"
            },
            {
                question: "Si lim(xâ†’a) [f(x) + g(x)] = 5 y lim(xâ†’a) f(x) = 2, Â¿cuÃ¡l es lim(xâ†’a) g(x)?",
                options: ["2", "3", "5", "7"],
                correct: 1,
                explanation: "lim g(x) = lim[f(x) + g(x)] - lim f(x) = 5 - 2 = 3"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’0) (1 - cos(x))/x?",
                options: ["0", "1/2", "1", "No existe"],
                correct: 0,
                explanation: "Form 0/0, usando L'HÃ´pital: lim sin(x)/1 = 0"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’2â») 1/(x-2)?",
                options: ["-âˆ", "0", "+âˆ", "1"],
                correct: 0,
                explanation: "Cuando xâ†’2â», x-2â†’0â», entonces 1/(x-2)â†’-âˆ"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’âˆ) x/e^x?",
                options: ["0", "1", "e", "âˆ"],
                correct: 0,
                explanation: "Forma âˆ/âˆ, L'HÃ´pital: lim 1/e^x = 0"
            },
            {
                question: "Si f es continua en [0,1] con f(0) = 1 y f(1) = 3, Â¿existe c con f(c) = 2?",
                options: ["SÃ­, por TVI", "No", "Solo si f' existe", "Depende"],
                correct: 0,
                explanation: "Teorema del Valor Intermedio garantiza la existencia de c"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’0) xÂ²Â·sin(1/xÂ²)?",
                options: ["0", "1", "No existe", "âˆ"],
                correct: 0,
                explanation: "Teorema del sandwich: -xÂ² â‰¤ xÂ²Â·sin(1/xÂ²) â‰¤ xÂ² â†’ 0"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’-âˆ) e^x?",
                options: ["0", "1", "e", "-âˆ"],
                correct: 0,
                explanation: "e^x â†’ 0 cuando xâ†’-âˆ"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’0) (e^(2x) - 1)/x?",
                options: ["1", "2", "e", "0"],
                correct: 1,
                explanation: "0/0, L'HÃ´pital: lim 2e^(2x)/1 = 2"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’Ï€) sin(x)?",
                options: ["-1", "0", "1", "Ï€"],
                correct: 1,
                explanation: "Por sustituciÃ³n directa: sin(Ï€) = 0"
            },
            {
                question: "Si lim(xâ†’a) f(x)Â·g(x) = 0 y lim(xâ†’a) g(x) = 0, Â¿quÃ© se puede concluir de lim(xâ†’a) f(x)?",
                options: ["Es 0", "Es âˆ", "No se puede determinar", "Es 1"],
                correct: 2,
                explanation: "Sin mÃ¡s informaciÃ³n sobre f(x), no se puede determinar su lÃ­mite (forma 0Â·?)"
            },
            {
                question: "Â¿CuÃ¡l es lim(xâ†’0) (âˆš(1+x) - 1)/x?",
                options: ["0", "1/2", "1", "2"],
                correct: 1,
                explanation: "0/0, racionalizar o L'HÃ´pital: lim 1/(2âˆš(1+x)) = 1/2"
            }
        ];

        // Initialize components when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            loadTrainingQuestions();
            loadExam();
        });

        // Initialize page with header, tabs, and score
        function initializePage() {
            createHeader(MODULE_TITLE);
            createTabs(TABS);
            createScoreDisplay();
            loadScore();
        }

        // Load training questions
        function loadTrainingQuestions() {
            const container = document.getElementById('training-container');
            if (!container) return;

            TRAINING_QUESTIONS.forEach((q, index) => {
                const questionDiv = createQuestionElement(q, index, 'training');
                container.appendChild(questionDiv);
            });
        }

        // Load exam (20 random questions from the bank)
        function loadExam() {
            const container = document.getElementById('exam-container');
            if (!container) return;

            // Shuffle and select 20 questions
            const shuffled = [...EXAM_QUESTIONS].sort(() => Math.random() - 0.5);
            const selectedQuestions = shuffled.slice(0, 20);

            selectedQuestions.forEach((q, index) => {
                const questionDiv = createQuestionElement(q, index, 'exam');
                container.appendChild(questionDiv);
            });

            // Add submit button
            const submitButton = document.createElement('button');
            submitButton.className = 'btn btn-success btn-large mt-2rem';
            submitButton.textContent = 'âœ… Enviar Examen';
            submitButton.onclick = submitExam;
            container.appendChild(submitButton);

            // Check if already passed
            checkExamStatus();
        }

        // Submit exam and check if passed
        function submitExam() {
            let correct = 0;
            const total = 20;
            const examQuestions = document.querySelectorAll('[data-type="exam"]');

            examQuestions.forEach(questionDiv => {
                const selectedOption = questionDiv.querySelector('input[type="radio"]:checked');
                if (selectedOption) {
                    const questionIndex = parseInt(questionDiv.dataset.index);
                    const isCorrect = parseInt(selectedOption.value) === parseInt(selectedOption.dataset.correct);
                    if (isCorrect) correct++;
                }
            });

            const percentage = (correct / total) * 100;
            const passed = percentage >= 70;

            // Save exam result
            saveExamResult(MODULE_ID, {
                score: correct,
                total: total,
                percentage: percentage,
                passed: passed,
                attempts: getExamAttempts(MODULE_ID) + 1
            });

            // Show results
            if (passed) {
                // Award trophy
                unlockTrophy(TROPHY_ID);
                showTrophyToast(TROPHY_ID);
                
                alert(`ğŸ‰ Â¡Felicitaciones! Has aprobado con ${percentage.toFixed(1)}%\n\nRespuestas correctas: ${correct}/${total}\n\nğŸ† Â¡Has obtenido el trofeo "Maestro de LÃ­mites"!`);
            } else {
                alert(`âŒ No has aprobado. Obtuviste ${percentage.toFixed(1)}%\n\nNecesitas 70% o mÃ¡s para aprobar (14/20 correctas)\nRespuestas correctas: ${correct}/${total}\n\nÂ¡Sigue practicando en la secciÃ³n de Entrenamiento!`);
            }

            // Reload to show updated status
            setTimeout(() => location.reload(), 2000);
        }

        // Check exam status and show if already passed
        function checkExamStatus() {
            const examData = getExamResult(MODULE_ID);
            if (examData && examData.passed) {
                const container = document.getElementById('exam-container');
                const passedDiv = document.createElement('div');
                passedDiv.className = 'info-box bg-success white-text';
                passedDiv.innerHTML = `
                    <h3>âœ… Â¡Examen Aprobado!</h3>
                    <p>Ya has completado este examen exitosamente.</p>
                    <p><strong>PuntuaciÃ³n:</strong> ${examData.score}/${examData.total} (${examData.percentage.toFixed(1)}%)</p>
                    <p><strong>Intentos:</strong> ${examData.attempts}</p>
                    <p>ğŸ† <strong>Trofeo "Maestro de LÃ­mites" desbloqueado</strong></p>
                `;
                container.insertBefore(passedDiv, container.firstChild);
            }
        }

        // Calculator functions
        function calculateLimit() {
            const coefInput = document.getElementById('lim-coef').value;
            const aInput = document.getElementById('lim-a').value;
            const resultDiv = document.getElementById('lim-result');

            if (!coefInput || aInput === '') {
                resultDiv.innerHTML = '<span class="error-text">âš ï¸ Por favor completa todos los campos</span>';
                return;
            }

            try {
                const coefs = coefInput.split(',').map(c => parseFloat(c.trim()));
                if (coefs.length !== 3 || coefs.some(isNaN)) {
                    throw new Error('Formato incorrecto');
                }

                const [a, b, c] = coefs;
                const x = parseFloat(aInput);
                const result = a*x*x + b*x + c;

                resultDiv.innerHTML = `
                    <div class="success-text">
                        <strong>ğŸ“Š Resultado:</strong><br>
                        f(x) = ${a}xÂ² + ${b}x + ${c}<br>
                        lim<sub>xâ†’${x}</sub> f(x) = <strong>${result}</strong><br>
                        <small>Por sustituciÃ³n directa: ${a}(${x})Â² + ${b}(${x}) + ${c} = ${result}</small>
                    </div>
                `;
            } catch (e) {
                resultDiv.innerHTML = '<span class="error-text">âš ï¸ Error en los datos. Use formato: a,b,c</span>';
            }
        }

        function calculateInfiniteLimit() {
            const numGrade = parseInt(document.getElementById('inf-num').value);
            const denGrade = parseInt(document.getElementById('inf-den').value);
            const numCoef = parseFloat(document.getElementById('inf-a').value);
            const denCoef = parseFloat(document.getElementById('inf-b').value);
            const resultDiv = document.getElementById('inf-result');

            if (isNaN(numGrade) || isNaN(denGrade) || isNaN(numCoef) || isNaN(denCoef)) {
                resultDiv.innerHTML = '<span class="error-text">âš ï¸ Por favor completa todos los campos</span>';
                return;
            }

            let result, explanation;
            if (numGrade > denGrade) {
                result = numCoef > 0 ? '+âˆ' : '-âˆ';
                explanation = 'Grado del numerador mayor â†’ lÃ­mite es Â±âˆ';
            } else if (numGrade === denGrade) {
                result = (numCoef / denCoef).toFixed(2);
                explanation = 'Mismo grado â†’ cociente de coeficientes principales';
            } else {
                result = '0';
                explanation = 'Grado del numerador menor â†’ lÃ­mite es 0';
            }

            resultDiv.innerHTML = `
                <div class="success-text">
                    <strong>ğŸ“Š AnÃ¡lisis:</strong><br>
                    Grado numerador: ${numGrade}<br>
                    Grado denominador: ${denGrade}<br>
                    lim<sub>xâ†’âˆ</sub> P(x)/Q(x) = <strong>${result}</strong><br>
                    <small>${explanation}</small>
                </div>
            `;
        }

        function checkContinuity() {
            const fa = parseFloat(document.getElementById('cont-fa').value);
            const limValue = parseFloat(document.getElementById('cont-lim').value);
            const resultDiv = document.getElementById('cont-result');

            if (isNaN(fa) || isNaN(limValue)) {
                resultDiv.innerHTML = '<span class="error-text">âš ï¸ Por favor completa todos los campos</span>';
                return;
            }

            const isContinuous = Math.abs(fa - limValue) < 0.0001;
            const status = isContinuous ? 'âœ… SÃ es continua' : 'âŒ NO es continua';
            const reason = isContinuous 
                ? 'f(a) = lim(xâ†’a) f(x), se cumplen las 3 condiciones' 
                : 'f(a) â‰  lim(xâ†’a) f(x), hay discontinuidad';

            resultDiv.innerHTML = `
                <div class="${isContinuous ? 'success-text' : 'error-text'}">
                    <strong>ğŸ“Š VerificaciÃ³n:</strong><br>
                    f(a) = ${fa}<br>
                    lim(xâ†’a) f(x) = ${limValue}<br>
                    <strong>${status}</strong><br>
                    <small>${reason}</small>
                </div>
            `;
        }
    </script>
</body>
</html>

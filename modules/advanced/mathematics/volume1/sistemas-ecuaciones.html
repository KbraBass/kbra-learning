<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tema 5: Sistemas de Ecuaciones - Matem√°ticas Avanzadas</title>
    <link rel="stylesheet" href="../../../../css/core.css">
    <link rel="stylesheet" href="../../../../css/components.css">
</head>
<body>
    <div id="header-container"></div>
    <div id="tabs-container"></div>
    <div id="score-container"></div>

    <div class="container">
        <!-- Teor√≠a -->
        <div class="content-section active" id="teoria">
            <h2>üìö Teor√≠a: Sistemas de Ecuaciones Lineales</h2>

            <div class="info-box bg-gradient-primary-white">
                <h4 class="color-white mt-0">üìñ Glosario de S√≠mbolos Matem√°ticos</h4>
                <p>S√≠mbolos utilizados en Sistemas de Ecuaciones:</p>
                <ul style="list-style: none; padding-left: 0; line-height: 2; margin-top: 1rem;">
                    <li><strong>{</strong> = Llave que agrupa las ecuaciones de un sistema</li>
                    <li><strong>x, y, z</strong> = Inc√≥gnitas del sistema (valores desconocidos)</li>
                    <li><strong>=</strong> = Igualdad (relaci√≥n entre los dos miembros)</li>
                    <li><strong>SCD</strong> = Sistema Compatible Determinado (soluci√≥n √∫nica)</li>
                    <li><strong>SCI</strong> = Sistema Compatible Indeterminado (infinitas soluciones)</li>
                    <li><strong>SI</strong> = Sistema Incompatible (sin soluci√≥n)</li>
                    <li><strong>|A|</strong> = Determinante de la matriz de coeficientes</li>
                    <li><strong>A|b</strong> = Matriz ampliada (coeficientes + t√©rminos independientes)</li>
                    <li><strong>rango(A)</strong> = Rango de la matriz</li>
                </ul>
            </div>

            <h3>1. ¬øQu√© es un Sistema de Ecuaciones?</h3>
            <div class="info-box">
                <h4>Definici√≥n</h4>
                <p>Un sistema de ecuaciones lineales es un conjunto de ecuaciones que comparten las mismas inc√≥gnitas. La soluci√≥n es el conjunto de valores que satisfacen todas las ecuaciones simult√°neamente.</p>
                <div class="formula-box">
                    { ax + by = c<br>
                    { dx + ey = f
                </div>
            </div>

            <h3>2. Clasificaci√≥n de Sistemas</h3>
            <table class="comparison-table">
                <thead>
                    <tr><th>Tipo</th><th>Descripci√≥n</th><th>Condici√≥n</th></tr>
                </thead>
                <tbody>
                    <tr><td><strong>SCD</strong></td><td>Compatible Determinado</td><td>Soluci√≥n √∫nica</td></tr>
                    <tr><td><strong>SCI</strong></td><td>Compatible Indeterminado</td><td>Infinitas soluciones</td></tr>
                    <tr><td><strong>SI</strong></td><td>Incompatible</td><td>Sin soluci√≥n</td></tr>
                </tbody>
            </table>

            <h3>3. M√©todo de Sustituci√≥n</h3>
            <div class="info-box">
                <h4>Pasos</h4>
                <ol>
                    <li>Despejar una inc√≥gnita en una ecuaci√≥n</li>
                    <li>Sustituir en la otra ecuaci√≥n</li>
                    <li>Resolver la ecuaci√≥n resultante</li>
                    <li>Sustituir el valor hallado en la primera expresi√≥n</li>
                </ol>
            </div>

            <h3>4. M√©todo de Igualaci√≥n</h3>
            <div class="info-box">
                <h4>Pasos</h4>
                <ol>
                    <li>Despejar la misma inc√≥gnita en ambas ecuaciones</li>
                    <li>Igualar las dos expresiones obtenidas</li>
                    <li>Resolver la ecuaci√≥n resultante</li>
                    <li>Sustituir para hallar la otra inc√≥gnita</li>
                </ol>
            </div>

            <h3>5. M√©todo de Reducci√≥n (Eliminaci√≥n)</h3>
            <div class="info-box">
                <h4>Pasos</h4>
                <ol>
                    <li>Multiplicar las ecuaciones para igualar coeficientes</li>
                    <li>Sumar o restar para eliminar una inc√≥gnita</li>
                    <li>Resolver la ecuaci√≥n de una inc√≥gnita</li>
                    <li>Sustituir para hallar la otra</li>
                </ol>
            </div>

            <h3>6. Regla de Cramer</h3>
            <div class="info-box">
                <h4>F√≥rmula</h4>
                <p>Para un sistema de 2 ecuaciones con 2 inc√≥gnitas:</p>
                <div class="formula-box">
                    x = |A<sub>x</sub>| / |A|<br>
                    y = |A<sub>y</sub>| / |A|
                </div>
                <p>Donde <strong>|A|</strong> es el determinante de coeficientes, <strong>|A<sub>x</sub>|</strong> y <strong>|A<sub>y</sub>|</strong> son los determinantes sustituyendo la columna respectiva por los t√©rminos independientes.</p>
                <div class="exam-important">
                    <strong>Condici√≥n:</strong> |A| ‚â† 0 (sistema compatible determinado)
                </div>
            </div>

            <h3>7. M√©todo de Gauss</h3>
            <div class="info-box">
                <p>Transforma la matriz ampliada en forma escalonada mediante operaciones elementales:</p>
                <ul>
                    <li>Intercambiar filas</li>
                    <li>Multiplicar una fila por un n√∫mero no nulo</li>
                    <li>Sumar a una fila otra multiplicada por un n√∫mero</li>
                </ul>
            </div>

            <h3>8. Teorema de Rouch√©-Frobenius</h3>
            <div class="info-box">
                <h4>Criterio de Clasificaci√≥n</h4>
                <p>Sea <strong>rango(A)</strong> el rango de la matriz de coeficientes y <strong>rango(A|b)</strong> el de la ampliada:</p>
                <ul>
                    <li><strong>SCD:</strong> rango(A) = rango(A|b) = n¬∞ inc√≥gnitas</li>
                    <li><strong>SCI:</strong> rango(A) = rango(A|b) < n¬∞ inc√≥gnitas</li>
                    <li><strong>SI:</strong> rango(A) ‚â† rango(A|b)</li>
                </ul>
            </div>
        </div>

        <!-- Ejemplos -->
        <div class="content-section" id="ejemplos">
            <h2>üí° Ejemplos Resueltos</h2>

            <div class="info-box border-left-success">
                <h4 class="color-success">Ejemplo 1: M√©todo de Sustituci√≥n</h4>
                <p><strong>Problema:</strong> { x + y = 5 ; 2x - y = 1 }</p>
                <p><strong>Soluci√≥n:</strong></p>
                <p>Paso 1: Despejamos y de la primera: y = 5 - x</p>
                <p>Paso 2: Sustituimos en la segunda: 2x - (5 - x) = 1</p>
                <p>Paso 3: Resolvemos: 2x - 5 + x = 1 ‚Üí 3x = 6 ‚Üí x = 2</p>
                <p>Paso 4: Sustituimos: y = 5 - 2 = 3</p>
                <p><strong>Respuesta:</strong> x = 2, y = 3</p>
            </div>

            <div class="info-box border-left-success">
                <h4 class="color-success">Ejemplo 2: M√©todo de Reducci√≥n</h4>
                <p><strong>Problema:</strong> { 3x + 2y = 12 ; 5x - 2y = 4 }</p>
                <p><strong>Soluci√≥n:</strong></p>
                <p>Paso 1: Los coeficientes de y ya son opuestos</p>
                <p>Paso 2: Sumamos ambas ecuaciones: 8x = 16 ‚Üí x = 2</p>
                <p>Paso 3: Sustituimos en la primera: 3(2) + 2y = 12 ‚Üí 2y = 6 ‚Üí y = 3</p>
                <p><strong>Respuesta:</strong> x = 2, y = 3</p>
            </div>

            <div class="info-box border-left-success">
                <h4 class="color-success">Ejemplo 3: Regla de Cramer</h4>
                <p><strong>Problema:</strong> { 2x + y = 5 ; x - 3y = -8 }</p>
                <p><strong>Soluci√≥n:</strong></p>
                <p>|A| = 2(-3) - 1(1) = -6 - 1 = -7</p>
                <p>|A<sub>x</sub>| = 5(-3) - 1(-8) = -15 + 8 = -7</p>
                <p>|A<sub>y</sub>| = 2(-8) - 5(1) = -16 - 5 = -21</p>
                <p>x = -7 / -7 = 1</p>
                <p>y = -21 / -7 = 3</p>
                <p><strong>Respuesta:</strong> x = 1, y = 3</p>
            </div>

            <div class="info-box" style="border-left-color: var(--color-warning);">
                <h4 style="color: var(--color-warning);">Ejemplo 4: Sistema Incompatible</h4>
                <p><strong>Problema:</strong> { x + y = 5 ; x + y = 3 }</p>
                <p><strong>Soluci√≥n:</strong></p>
                <p>Restando ambas ecuaciones: 0 = 2 (contradicci√≥n)</p>
                <p><strong>Conclusi√≥n:</strong> Sistema Incompatible (SI), sin soluci√≥n</p>
            </div>

            <div class="info-box" style="border-left-color: var(--color-info);">
                <h4 style="color: var(--color-info);">Ejemplo 5: Sistema Compatible Indeterminado</h4>
                <p><strong>Problema:</strong> { 2x + y = 4 ; 4x + 2y = 8 }</p>
                <p><strong>Soluci√≥n:</strong></p>
                <p>La segunda ecuaci√≥n es el doble de la primera (ecuaciones dependientes)</p>
                <p><strong>Conclusi√≥n:</strong> Sistema Compatible Indeterminado (SCI), infinitas soluciones: y = 4 - 2x</p>
            </div>
        </div>

        <!-- Herramientas -->
        <div class="content-section" id="herramientas">
            <h2>üõ†Ô∏è Herramientas Interactivas</h2>

            <div class="tool-card">
                <h3>üî¢ Resoluci√≥n por Regla de Cramer</h3>
                <p>Resuelve un sistema 2√ó2 usando la regla de Cramer</p>
                
                <div class="tool-input-group">
                    <label>Primera ecuaci√≥n: ax + by = c</label>
                    <input type="text" id="cramer-eq1" placeholder="Ej: 2,1,5 (a,b,c separados por comas)">
                </div>
                
                <div class="tool-input-group">
                    <label>Segunda ecuaci√≥n: dx + ey = f</label>
                    <input type="text" id="cramer-eq2" placeholder="Ej: 1,-3,-8">
                </div>
                
                <button class="calc-button" onclick="solveCramer()">Resolver</button>
                <div class="calc-result" id="cramer-result">Ingresa las dos ecuaciones</div>
            </div>

            <div class="tool-card">
                <h3>üìä Clasificador de Sistemas</h3>
                <p>Determina si un sistema es SCD, SCI o SI</p>
                
                <div class="tool-input-group">
                    <label>Primera ecuaci√≥n: ax + by = c</label>
                    <input type="text" id="class-eq1" placeholder="Ej: 1,1,5">
                </div>
                
                <div class="tool-input-group">
                    <label>Segunda ecuaci√≥n: dx + ey = f</label>
                    <input type="text" id="class-eq2" placeholder="Ej: 1,1,3">
                </div>
                
                <button class="calc-button" onclick="classifySystem()">Clasificar</button>
                <div class="calc-result" id="class-result">Ingresa las dos ecuaciones</div>
            </div>
        </div>

        <!-- Pr√°ctica -->
        <div class="content-section" id="practica">
            <h2>‚úèÔ∏è Pr√°ctica</h2>

            <div id="exercises-container"></div>

            <div class="navigation-buttons mt-2">
                <button class="btn btn-secondary" onclick="window.location.href='matrices.html'">‚¨ÖÔ∏è Tema Anterior</button>
                <button class="btn btn-primary" onclick="window.location.href='../index.html'">Volver a Matem√°ticas</button>
            </div>
        </div>

        <!-- Resumen -->
        <div class="content-section" id="resumen">
            <h2>üìã Resumen del Tema</h2>

            <div class="info-box">
                <h4>üéØ Conceptos Clave</h4>
                <ul>
                    <li><strong>Sistema de ecuaciones:</strong> Conjunto de ecuaciones con inc√≥gnitas comunes</li>
                    <li><strong>SCD:</strong> Soluci√≥n √∫nica (|A| ‚â† 0)</li>
                    <li><strong>SCI:</strong> Infinitas soluciones (ecuaciones dependientes)</li>
                    <li><strong>SI:</strong> Sin soluci√≥n (ecuaciones contradictorias)</li>
                    <li><strong>M√©todos:</strong> Sustituci√≥n, igualaci√≥n, reducci√≥n, Cramer, Gauss</li>
                    <li><strong>Regla de Cramer:</strong> x = |A<sub>x</sub>|/|A|, y = |A<sub>y</sub>|/|A|</li>
                    <li><strong>Rouch√©-Frobenius:</strong> Compara rangos de A y A|b</li>
                </ul>
            </div>

            <div class="navigation-buttons mt-2">
                <button class="btn btn-secondary" onclick="window.location.href='matrices.html'">‚¨ÖÔ∏è Tema Anterior</button>
                <button class="btn btn-primary" onclick="window.location.href='../index.html'">Volver a Matem√°ticas</button>
            </div>
        </div>
    </div>

    <script src="../../../../lib/storage.js"></script>
    <script src="../../../../lib/gamification.js"></script>
    <script src="../../../../lib/components.js"></script>
    <script>
        const MODULE_ID = 'sistemas-ecuaciones';
        const MODULE_TITLE = 'Tema 5: Sistemas de Ecuaciones Lineales';

        document.addEventListener('DOMContentLoaded', function() {
            Components.createHeader(MODULE_TITLE, '../index.html');
            
            const tabs = [
                { id: 'teoria', label: 'Teor√≠a', icon: 'üìö' },
                { id: 'ejemplos', label: 'Ejemplos', icon: 'üí°' },
                { id: 'herramientas', label: 'Herramientas', icon: 'üõ†Ô∏è' },
                { id: 'practica', label: 'Pr√°ctica', icon: '‚úèÔ∏è' },
                { id: 'resumen', label: 'Resumen', icon: 'üìã' }
            ];
            Components.createTabs(tabs, 'teoria');
            Components.createScoreDisplay();
            
            loadExercises();
            Gamification.updateDisplay(MODULE_ID);
        });

        const exercises = [
            { id: 1, question: 'Resolver: { x + y = 10 ; x - y = 2 }. ¬øCu√°nto vale x?', type: 'number', correct: '6', hint: 'Suma ambas ecuaciones: 2x = 12, entonces x = 6' },
            { id: 2, question: 'Sistema: { x + y = 5 ; x + y = 3 }. ¬øQu√© tipo es? (1=SCD, 2=SCI, 3=SI)', type: 'number', correct: '3', hint: 'Restando: 0 = 2, contradicci√≥n. Es Sistema Incompatible (SI) ‚Üí 3' },
            { id: 3, question: 'Resolver: { 2x + y = 7 ; x = 3 }. ¬øCu√°nto vale y?', type: 'number', correct: '1', hint: 'Sustituye x=3 en la primera: 2(3) + y = 7 ‚Üí y = 1' },
            { id: 4, question: 'Si |A| = 0, ¬øpuede usarse Cramer? (1=S√ç, 0=NO)', type: 'number', correct: '0', hint: 'Cramer requiere |A| ‚â† 0. Si |A| = 0, NO se puede usar ‚Üí 0' },
            { id: 5, question: 'Resolver: { 3x + 2y = 12 ; 5x - 2y = 4 }. ¬øCu√°nto vale x?', type: 'number', correct: '2', hint: 'Suma ambas: 8x = 16, entonces x = 2' },
            { id: 6, question: 'Sistema: { 2x + y = 4 ; 4x + 2y = 8 }. ¬øQu√© tipo? (1=SCD, 2=SCI, 3=SI)', type: 'number', correct: '2', hint: 'La segunda es 2√ó la primera. Infinitas soluciones ‚Üí SCI ‚Üí 2' },
            { id: 7, question: 'Resolver: { x + 2y = 8 ; x = 4 }. ¬øCu√°nto vale y?', type: 'number', correct: '2', hint: 'Sustituye x=4: 4 + 2y = 8 ‚Üí 2y = 4 ‚Üí y = 2' },
            { id: 8, question: 'Si rango(A) ‚â† rango(A|b), ¬øqu√© tipo de sistema es? (1=SCD, 2=SCI, 3=SI)', type: 'number', correct: '3', hint: 'Por Rouch√©-Frobenius, rangos diferentes ‚Üí Sistema Incompatible ‚Üí 3' },
            { id: 9, question: 'Resolver: { x - y = 1 ; x + y = 5 }. ¬øCu√°nto vale y?', type: 'number', correct: '2', hint: 'Suma: 2x = 6 ‚Üí x = 3. Luego: 3 - y = 1 ‚Üí y = 2' },
            { id: 10, question: 'Sistema: { x = 2 ; y = 3 }. ¬øQu√© tipo es? (1=SCD, 2=SCI, 3=SI)', type: 'number', correct: '1', hint: 'Soluci√≥n √∫nica: x=2, y=3. Es SCD ‚Üí 1' }
        ];

        function loadExercises() {
            const container = document.getElementById('exercises-container');
            container.innerHTML = exercises.map(ex => `
                <div class="exercise-card" data-exercise="${ex.id}">
                    <h4>Ejercicio ${ex.id}</h4>
                    <p>${ex.question}</p>
                    <input type="number" step="any" id="ex${ex.id}" class="input-field" placeholder="Tu respuesta">
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="checkAnswer(${ex.id})">Verificar</button>
                        <button class="btn btn-secondary" onclick="showHint(${ex.id})">üí° Pista</button>
                    </div>
                    <div id="hint${ex.id}" class="hint-box d-none">${ex.hint}</div>
                    <div id="feedback${ex.id}" class="feedback"></div>
                </div>
            `).join('');
        }

        function checkAnswer(exerciseId) {
            const exercise = exercises.find(ex => ex.id === exerciseId);
            const input = document.getElementById('ex' + exerciseId);
            const feedback = document.getElementById('feedback' + exerciseId);
            const userAnswer = input.value.trim();

            if (!userAnswer) {
                feedback.className = 'feedback error';
                feedback.textContent = 'Por favor, ingresa una respuesta.';
                feedback.style.display = 'block';
                return;
            }

            const isCorrect = userAnswer === exercise.correct;
            
            if (isCorrect) {
                feedback.className = 'feedback success';
                feedback.textContent = '¬°Correcto! ‚ú® +10 puntos';
                input.disabled = true;
                Gamification.completeExercise(MODULE_ID, true);
            } else {
                feedback.className = 'feedback error';
                feedback.textContent = 'Incorrecto. Intenta de nuevo o usa la pista.';
                Gamification.completeExercise(MODULE_ID, false);
            }
            
            feedback.style.display = 'block';
            Gamification.updateDisplay(MODULE_ID);
        }

        function showHint(exerciseId) {
            const hint = document.getElementById('hint' + exerciseId);
            hint.style.display = hint.style.display === 'none' ? 'block' : 'none';
        }

        // Interactive tools
        function solveCramer() {
            const eq1Str = document.getElementById('cramer-eq1').value;
            const eq2Str = document.getElementById('cramer-eq2').value;
            const result = document.getElementById('cramer-result');
            
            if (!eq1Str || !eq2Str) {
                result.textContent = '‚ö†Ô∏è Por favor, ingresa ambas ecuaciones';
                return;
            }
            
            const [a, b, c] = eq1Str.split(',').map(n => parseFloat(n.trim()));
            const [d, e, f] = eq2Str.split(',').map(n => parseFloat(n.trim()));
            
            if ([a,b,c,d,e,f].some(isNaN)) {
                result.textContent = '‚ö†Ô∏è Formato incorrecto. Usa: a,b,c';
                return;
            }
            
            const detA = a*e - b*d;
            
            if (detA === 0) {
                result.innerHTML = '<strong>|A| = 0</strong><br>No se puede usar Cramer (sistema no tiene soluci√≥n √∫nica)';
                return;
            }
            
            const detAx = c*e - b*f;
            const detAy = a*f - c*d;
            
            const x = detAx / detA;
            const y = detAy / detA;
            
            result.innerHTML = `
                <strong>Sistema:</strong><br>
                ${a}x + ${b}y = ${c}<br>
                ${d}x + ${e}y = ${f}<br><br>
                <strong>Determinantes:</strong><br>
                |A| = ${detA}<br>
                |A<sub>x</sub>| = ${detAx}<br>
                |A<sub>y</sub>| = ${detAy}<br><br>
                <strong>Soluci√≥n:</strong><br>
                x = ${x.toFixed(2)}<br>
                y = ${y.toFixed(2)}
            `;
        }

        function classifySystem() {
            const eq1Str = document.getElementById('class-eq1').value;
            const eq2Str = document.getElementById('class-eq2').value;
            const result = document.getElementById('class-result');
            
            if (!eq1Str || !eq2Str) {
                result.textContent = '‚ö†Ô∏è Por favor, ingresa ambas ecuaciones';
                return;
            }
            
            const [a, b, c] = eq1Str.split(',').map(n => parseFloat(n.trim()));
            const [d, e, f] = eq2Str.split(',').map(n => parseFloat(n.trim()));
            
            if ([a,b,c,d,e,f].some(isNaN)) {
                result.textContent = '‚ö†Ô∏è Formato incorrecto. Usa: a,b,c';
                return;
            }
            
            const detA = a*e - b*d;
            
            let classification = '';
            let explanation = '';
            
            if (detA !== 0) {
                classification = 'SCD (Compatible Determinado)';
                explanation = '|A| ‚â† 0 ‚Üí Soluci√≥n √∫nica';
            } else {
                // Check if equations are proportional
                const ratio1 = (a !== 0) ? d/a : (b !== 0) ? e/b : 0;
                const ratio2 = (a !== 0) ? (c/a) : (b !== 0) ? (f/b) : 0;
                
                if (Math.abs(ratio1 - ratio2) < 0.001) {
                    classification = 'SCI (Compatible Indeterminado)';
                    explanation = '|A| = 0 y ecuaciones proporcionales ‚Üí Infinitas soluciones';
                } else {
                    classification = 'SI (Incompatible)';
                    explanation = '|A| = 0 y ecuaciones NO proporcionales ‚Üí Sin soluci√≥n';
                }
            }
            
            result.innerHTML = `
                <strong>Sistema:</strong><br>
                ${a}x + ${b}y = ${c}<br>
                ${d}x + ${e}y = ${f}<br><br>
                <strong>Clasificaci√≥n:</strong> ${classification}<br>
                <strong>Raz√≥n:</strong> ${explanation}
            `;
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrices - Matem√°ticas Avanzadas</title>
    <link rel="stylesheet" href="../../../../css/core.css">
    <link rel="stylesheet" href="../../../../css/components.css">
</head>
<body>
    <div id="header-container"></div>
    <div id="tabs-container"></div>
    <div id="score-container"></div>

    <div class="container">
        <!-- TAB 1: Glosario -->
        <div class="content-section active" id="glosario">
            <h2>üìñ Glosario de Matrices</h2>
            
            <div class="info-box">
                <p>Aprende los t√©rminos clave relacionados con las matrices:</p>
            </div>

            <div class="term-card">
                <h3>üî∑ Matriz</h3>
                <p><strong>Definici√≥n:</strong> Una tabla rectangular de n√∫meros organizados en filas y columnas. Una matriz de dimensi√≥n m√ón tiene m filas y n columnas.</p>
                <p><strong>Ejemplo:</strong> A = [1, 2, 3; 4, 5, 6] es una matriz 2√ó3 (2 filas, 3 columnas)</p>
            </div>

            <div class="term-card">
                <h3>üî∑ Determinante</h3>
                <p><strong>Definici√≥n:</strong> Un n√∫mero escalar asociado a una matriz cuadrada que proporciona informaci√≥n sobre sus propiedades. Se denota |A| o det(A).</p>
                <p><strong>Ejemplo:</strong> Para A = [2, 3; 1, 4], el determinante es |A| = 2√ó4 - 3√ó1 = 5</p>
            </div>

            <div class="term-card">
                <h3>üî∑ Matriz Inversa</h3>
                <p><strong>Definici√≥n:</strong> Una matriz A‚Åª¬π que, al multiplicarse con la matriz original A, da como resultado la matriz identidad: A¬∑A‚Åª¬π = I. Solo existe si |A| ‚â† 0.</p>
                <p><strong>Ejemplo:</strong> Si A = [2, 1; 1, 1], entonces A‚Åª¬π = [1, -1; -1, 2]</p>
            </div>

            <div class="term-card">
                <h3>üî∑ Matriz Transpuesta</h3>
                <p><strong>Definici√≥n:</strong> Matriz que se obtiene intercambiando las filas por las columnas de la matriz original. Se denota A·µÄ.</p>
                <p><strong>Ejemplo:</strong> Si A = [1, 2; 3, 4], entonces A·µÄ = [1, 3; 2, 4]</p>
            </div>

            <div class="term-card">
                <h3>üî∑ Rango de una Matriz</h3>
                <p><strong>Definici√≥n:</strong> El n√∫mero m√°ximo de filas (o columnas) linealmente independientes en una matriz. Tambi√©n es el orden del mayor determinante no nulo que se puede calcular.</p>
                <p><strong>Ejemplo:</strong> Una matriz 3√ó3 puede tener rango 1, 2 o 3 dependiendo de sus elementos</p>
            </div>
        </div>

        <!-- TAB 2: S√≠mbolos -->
        <div class="content-section" id="simbolos">
            <h2>üî£ S√≠mbolos Matem√°ticos en Matrices</h2>
            
            <div class="info-box">
                <p>S√≠mbolos y notaci√≥n utilizada en el √°lgebra matricial:</p>
            </div>

            <div class="symbol-card">
                <h3><span class="symbol-large">A, B, C</span></h3>
                <p><strong>Significado:</strong> Matrices (representadas por letras may√∫sculas)</p>
                <p><strong>Uso:</strong> A + B representa la suma de dos matrices</p>
            </div>

            <div class="symbol-card">
                <h3><span class="symbol-large">a<sub>ij</sub></span></h3>
                <p><strong>Significado:</strong> Elemento en la fila i, columna j de una matriz</p>
                <p><strong>Uso:</strong> En A = [1, 2; 3, 4], a‚ÇÅ‚ÇÇ = 2 (fila 1, columna 2)</p>
            </div>

            <div class="symbol-card">
                <h3><span class="symbol-large">m√ón</span></h3>
                <p><strong>Significado:</strong> Dimensi√≥n de la matriz (m filas, n columnas)</p>
                <p><strong>Uso:</strong> Una matriz 2√ó3 tiene 2 filas y 3 columnas</p>
            </div>

            <div class="symbol-card">
                <h3><span class="symbol-large">|A| o det(A)</span></h3>
                <p><strong>Significado:</strong> Determinante de la matriz A</p>
                <p><strong>Uso:</strong> |A| = 0 indica que la matriz es singular (no invertible)</p>
            </div>

            <div class="symbol-card">
                <h3><span class="symbol-large">A<sup>T</sup></span></h3>
                <p><strong>Significado:</strong> Matriz transpuesta de A</p>
                <p><strong>Uso:</strong> Intercambia filas por columnas</p>
            </div>

            <div class="symbol-card">
                <h3><span class="symbol-large">A<sup>-1</sup></span></h3>
                <p><strong>Significado:</strong> Matriz inversa de A</p>
                <p><strong>Uso:</strong> A¬∑A‚Åª¬π = I (matriz identidad)</p>
            </div>

            <div class="symbol-card">
                <h3><span class="symbol-large">I<sub>n</sub></span></h3>
                <p><strong>Significado:</strong> Matriz identidad de orden n</p>
                <p><strong>Uso:</strong> Tiene 1s en la diagonal principal y 0s en el resto</p>
            </div>

            <div class="symbol-card">
                <h3><span class="symbol-large">O</span></h3>
                <p><strong>Significado:</strong> Matriz nula</p>
                <p><strong>Uso:</strong> Todos sus elementos son 0</p>
            </div>
        </div>

        <!-- TAB 3: Introducci√≥n -->
        <div class="content-section" id="introduccion">
            <h2>üåç Introducci√≥n a las Matrices</h2>
            
            <div class="info-box">
                <p>Las matrices son herramientas matem√°ticas fundamentales con aplicaciones en m√∫ltiples √°reas. Descubre c√≥mo se utilizan en la vida real:</p>
            </div>

            <div class="application-card">
                <h3>üéÆ Gr√°ficos por Computadora y Videojuegos</h3>
                <p>Las matrices se utilizan para representar y manipular objetos en 3D. Las transformaciones como rotaci√≥n, traslaci√≥n y escalado se realizan mediante multiplicaci√≥n de matrices.</p>
                <p><strong>Ejemplo pr√°ctico:</strong> En un videojuego, cada personaje y objeto se representa mediante matrices que permiten moverlos, rotarlos y cambiar su tama√±o en tiempo real.</p>
            </div>

            <div class="application-card">
                <h3>ü§ñ Inteligencia Artificial y Machine Learning</h3>
                <p>Los algoritmos de aprendizaje autom√°tico utilizan matrices para almacenar y procesar grandes cantidades de datos. Las redes neuronales se basan en operaciones matriciales para el entrenamiento y predicci√≥n.</p>
                <p><strong>Ejemplo pr√°ctico:</strong> El reconocimiento facial utiliza matrices para comparar y procesar miles de caracter√≠sticas faciales simult√°neamente.</p>
            </div>

            <div class="application-card">
                <h3>üìä Econom√≠a y Finanzas</h3>
                <p>Las matrices permiten modelar sistemas econ√≥micos complejos, analizar carteras de inversi√≥n y resolver problemas de optimizaci√≥n financiera. El an√°lisis de riesgo y la diversificaci√≥n de inversiones se basan en operaciones matriciales.</p>
                <p><strong>Ejemplo pr√°ctico:</strong> Los bancos utilizan matrices para analizar la relaci√≥n entre diferentes activos financieros y optimizar portafolios de inversi√≥n.</p>
            </div>

            <div class="application-card">
                <h3>üî¨ F√≠sica e Ingenier√≠a</h3>
                <p>Las matrices son esenciales para resolver sistemas de ecuaciones que modelan circuitos el√©ctricos, estructuras mec√°nicas, y fen√≥menos cu√°nticos. La mec√°nica cu√°ntica depende completamente del √°lgebra matricial.</p>
                <p><strong>Ejemplo pr√°ctico:</strong> Los ingenieros utilizan matrices para calcular las fuerzas y tensiones en puentes y edificios antes de construirlos.</p>
            </div>

            <div class="application-card">
                <h3>üó∫Ô∏è Sistemas de Navegaci√≥n GPS</h3>
                <p>Los sistemas de posicionamiento global utilizan matrices para calcular coordenadas, corregir errores de se√±al y optimizar rutas. Las transformaciones de coordenadas entre diferentes sistemas de referencia se realizan con matrices.</p>
                <p><strong>Ejemplo pr√°ctico:</strong> Tu tel√©fono usa matrices para convertir se√±ales de sat√©lites en tu ubicaci√≥n exacta en el mapa.</p>
            </div>
        </div>

        <!-- TAB 4: Teor√≠a -->
        <div class="content-section" id="teoria">
            <h2>üìö Teor√≠a: Matrices y Operaciones</h2>

            <!-- Secci√≥n 1: Definici√≥n y Tipos -->
            <h3>1. ¬øQu√© es una Matriz?</h3>
            <div class="info-box">
                <p>Una matriz es una tabla rectangular de n√∫meros organizados en filas y columnas. Una matriz de dimensi√≥n m√ón tiene m filas y n columnas.</p>
                <div class="formula-box">
                    A = (a<sub>ij</sub>) donde i = 1,...,m y j = 1,...,n
                </div>
            </div>

            <!-- Secci√≥n 2: Tipos de Matrices -->
            <h3>2. Tipos de Matrices</h3>
            <div class="info-box">
                <h4>Clasificaci√≥n Principal:</h4>
                <ul>
                    <li><strong>Matriz fila:</strong> 1 fila, n columnas (1√ón)</li>
                    <li><strong>Matriz columna:</strong> m filas, 1 columna (m√ó1)</li>
                    <li><strong>Matriz cuadrada:</strong> m = n (mismo n√∫mero de filas y columnas)</li>
                    <li><strong>Matriz nula (O):</strong> Todos sus elementos son 0</li>
                    <li><strong>Matriz identidad (I):</strong> Cuadrada con 1s en la diagonal y 0s en el resto</li>
                    <li><strong>Matriz diagonal:</strong> Solo tiene elementos en la diagonal principal</li>
                    <li><strong>Matriz triangular:</strong> Elementos nulos por encima o debajo de la diagonal</li>
                </ul>
            </div>

            <!-- Calculadora 1: Suma de Matrices -->
            <h3>3. Suma y Resta de Matrices</h3>
            <div class="tool-card">
                <h4>üì± Calculadora de Suma de Matrices 2√ó2</h4>
                <p>Se suman/restan los elementos correspondientes. Solo se pueden sumar matrices de la misma dimensi√≥n.</p>
                <div class="formula-box">
                    (A + B)<sub>ij</sub> = a<sub>ij</sub> + b<sub>ij</sub>
                </div>
                
                <div class="tool-input-group">
                    <label>Matriz A [a, b; c, d]:</label>
                    <input type="text" id="sum-matrixA" placeholder="Ej: 1,2,3,4">
                </div>
                
                <div class="tool-input-group">
                    <label>Matriz B [a, b; c, d]:</label>
                    <input type="text" id="sum-matrixB" placeholder="Ej: 5,6,7,8">
                </div>
                
                <button class="calc-button" onclick="calculateSum()">Calcular A + B</button>
                <div class="calc-result" id="sum-result">Ingresa ambas matrices</div>
            </div>

            <!-- Calculadora 2: Producto por Escalar -->
            <h3>4. Producto por Escalar</h3>
            <div class="tool-card">
                <h4>üì± Calculadora de Producto por Escalar</h4>
                <p>Se multiplica cada elemento de la matriz por el n√∫mero k.</p>
                <div class="formula-box">
                    (k¬∑A)<sub>ij</sub> = k¬∑a<sub>ij</sub>
                </div>
                
                <div class="tool-input-group">
                    <label>Escalar k:</label>
                    <input type="number" id="scalar-k" placeholder="Ej: 3">
                </div>
                
                <div class="tool-input-group">
                    <label>Matriz A [a, b; c, d]:</label>
                    <input type="text" id="scalar-matrix" placeholder="Ej: 1,2,3,4">
                </div>
                
                <button class="calc-button" onclick="calculateScalar()">Calcular k √ó A</button>
                <div class="calc-result" id="scalar-result">Ingresa k y la matriz</div>
            </div>

            <!-- Secci√≥n 5: Producto de Matrices -->
            <h3>5. Producto de Matrices</h3>
            <div class="info-box">
                <p>Para multiplicar A√óB, el n√∫mero de columnas de A debe ser igual al n√∫mero de filas de B.</p>
                <div class="formula-box">
                    (A¬∑B)<sub>ij</sub> = a<sub>i1</sub>¬∑b<sub>1j</sub> + a<sub>i2</sub>¬∑b<sub>2j</sub> + ... + a<sub>in</sub>¬∑b<sub>nj</sub>
                </div>
                <div class="warning-box">
                    <strong>‚ö†Ô∏è Importante:</strong> El producto de matrices NO es conmutativo: A¬∑B ‚â† B¬∑A
                </div>
            </div>

            <!-- Calculadora 3: Determinante -->
            <h3>6. Determinantes</h3>
            <div class="tool-card">
                <h4>üì± Calculadora de Determinantes 2√ó2</h4>
                <p>El determinante es un n√∫mero asociado a una matriz cuadrada.</p>
                <div class="formula-box">
                    |A| = a<sub>11</sub>¬∑a<sub>22</sub> - a<sub>12</sub>¬∑a<sub>21</sub>
                </div>
                
                <div class="tool-input-group">
                    <label>Elementos de la matriz [a, b; c, d]:</label>
                    <input type="text" id="det-matrix" placeholder="Ej: 3,2,1,4">
                </div>
                
                <button class="calc-button" onclick="calculateDeterminant()">Calcular Determinante</button>
                <div class="calc-result" id="det-result">Ingresa los 4 elementos</div>
            </div>

            <!-- Secci√≥n 7: Propiedades de Determinantes -->
            <div class="info-box">
                <h4>Propiedades de Determinantes:</h4>
                <ul>
                    <li>|A<sup>T</sup>| = |A|</li>
                    <li>Si una fila/columna es nula ‚Üí |A| = 0</li>
                    <li>Si dos filas/columnas son iguales ‚Üí |A| = 0</li>
                    <li>|k¬∑A| = k<sup>n</sup>¬∑|A| (n = orden de la matriz)</li>
                    <li>|A¬∑B| = |A|¬∑|B|</li>
                </ul>
            </div>

            <!-- Secci√≥n 8: Matriz Transpuesta -->
            <h3>7. Matriz Transpuesta</h3>
            <div class="info-box">
                <p>Se obtiene intercambiando filas por columnas: (A<sup>T</sup>)<sub>ij</sub> = a<sub>ji</sub></p>
                <p><strong>Ejemplo:</strong> Si A = [1, 2, 3; 4, 5, 6], entonces A<sup>T</sup> = [1, 4; 2, 5; 3, 6]</p>
            </div>

            <!-- Secci√≥n 9: Matriz Inversa -->
            <h3>8. Matriz Inversa</h3>
            <div class="info-box">
                <p>Una matriz cuadrada A tiene inversa A<sup>-1</sup> si:</p>
                <div class="formula-box">
                    A¬∑A<sup>-1</sup> = A<sup>-1</sup>¬∑A = I
                </div>
                <div class="exam-important">
                    <strong>Condici√≥n de Existencia:</strong> |A| ‚â† 0 (la matriz debe ser no singular)
                </div>
                <h4 class="mt-1rem">C√°lculo de la Inversa 2√ó2:</h4>
                <div class="formula-box">
                    A<sup>-1</sup> = (1/|A|) ¬∑ [a<sub>22</sub>, -a<sub>12</sub>; -a<sub>21</sub>, a<sub>11</sub>]
                </div>
            </div>

            <!-- Secci√≥n 10: Rango -->
            <h3>9. Rango de una Matriz</h3>
            <div class="info-box">
                <p>El rango es el n√∫mero m√°ximo de filas (o columnas) linealmente independientes. Tambi√©n es el orden del mayor determinante no nulo que se puede formar.</p>
            </div>
        </div>

        <!-- TAB 5: Entrenamiento -->
        <div class="content-section" id="entrenamiento">
            <h2>üéØ Entrenamiento: Pr√°ctica con Matrices</h2>
            
            <div class="info-box">
                <p>Practica tus conocimientos sobre matrices. Cada respuesta correcta suma <strong>+10 puntos</strong>, cada error resta <strong>-5 puntos</strong>.</p>
            </div>

            <div id="training-container"></div>
        </div>

        <!-- TAB 6: Examen Final -->
        <div class="content-section" id="examen">
            <h2>üìù Examen Final de Matrices</h2>
            
            <div class="info-box">
                <p>Completa este examen para demostrar tu dominio de las matrices y determinantes.</p>
                <p><strong>Requisitos:</strong> 70% o m√°s para aprobar (14/20 respuestas correctas)</p>
                <p><strong>Recompensa:</strong> Obt√©n el trofeo "Maestro de Matrices" üèÜ</p>
            </div>

            <div id="exam-status"></div>
            <div id="exam-container"></div>
            <div id="exam-results"></div>
        </div>
    </div>

    <script src="../../../../lib/storage.js"></script>
    <script src="../../../../lib/gamification.js"></script>
    <script src="../../../../lib/components.js"></script>
    <script>
        const MODULE_ID = 'matrices';
        const MODULE_TITLE = 'Matrices y Determinantes';

        document.addEventListener('DOMContentLoaded', function() {
            Components.createHeader(MODULE_TITLE, '../index.html');
            
            const tabs = [
                { id: 'glosario', label: 'Glosario', icon: 'üìñ' },
                { id: 'simbolos', label: 'S√≠mbolos', icon: 'üî£' },
                { id: 'introduccion', label: 'Introducci√≥n', icon: 'üåç' },
                { id: 'teoria', label: 'Teor√≠a', icon: 'üìö' },
                { id: 'entrenamiento', label: 'Entrenamiento', icon: 'üéØ' },
                { id: 'examen', label: 'Examen Final', icon: 'üìù' }
            ];
            Components.createTabs(tabs, 'glosario');
            Components.createScoreDisplay();
            
            loadTrainingExercises();
            loadExam();
            Gamification.updateDisplay(MODULE_ID);
        });

        // Training exercises (10 questions for practice)
        const trainingQuestions = [
            { id: 1, question: 'Si A = [2, 3; 1, 4], ¬øcu√°nto vale el elemento a‚ÇÇ‚ÇÅ?', answer: '1', hint: 'a_ij significa fila i, columna j. Entonces a‚ÇÇ‚ÇÅ est√° en fila 2, columna 1.' },
            { id: 2, question: 'Calcular el determinante de A = [4, 2; 3, 1]', answer: '-2', hint: 'Para 2√ó2: |A| = a‚ÇÅ‚ÇÅ√óa‚ÇÇ‚ÇÇ - a‚ÇÅ‚ÇÇ√óa‚ÇÇ‚ÇÅ = 4√ó1 - 2√ó3' },
            { id: 3, question: 'Si A = [1, 0; 0, 1], ¬øqu√© tipo de matriz es? (responde: identidad, nula o diagonal)', answer: 'identidad', hint: 'La matriz identidad tiene 1s en la diagonal y 0s en el resto.' },
            { id: 4, question: 'Si A es 2√ó3 y B es 3√ó4, ¬øcu√°ntas columnas tiene A¬∑B?', answer: '4', hint: 'Si A es m√ón y B es n√óp, entonces A¬∑B es m√óp. Aqu√≠: 2√ó4' },
            { id: 5, question: 'Si |A| = 0, ¬øexiste A‚Åª¬π? (responde: si o no)', answer: 'no', hint: 'La inversa solo existe si |A| ‚â† 0. Si el determinante es cero, NO existe.' },
            { id: 6, question: 'Calcular 2√óA si A = [1, 2; 3, 4]. ¬øElemento (2,2)?', answer: '8', hint: 'Multiplicar por escalar: k¬∑A multiplica cada elemento. 2√ó4 = 8' },
            { id: 7, question: 'Si A es 1√ó3, ¬øcu√°ntas filas tiene A·µÄ?', answer: '3', hint: 'La transpuesta intercambia filas por columnas. 1√ó3 se convierte en 3√ó1' },
            { id: 8, question: 'Calcular |A| si A = [5, 0; 0, 3]', answer: '15', hint: 'Matriz diagonal. |A| = 5√ó3 - 0√ó0 = 15' },
            { id: 9, question: '¬øCu√°nto vale |I‚ÇÇ| (determinante de la identidad 2√ó2)?', answer: '1', hint: 'I‚ÇÇ = [1, 0; 0, 1]. Calcula: 1√ó1 - 0√ó0 = 1' },
            { id: 10, question: 'Si A = [2, 1; 4, 3], calcular elemento (1,2) de 3A', answer: '3', hint: 'Elemento (1,2) de A es 1. Multiplicar por 3: 3√ó1 = 3' }
        ];

        function loadTrainingExercises() {
            const container = document.getElementById('training-container');
            container.innerHTML = trainingQuestions.map(q => `
                <div class="exercise-card">
                    <h4>Ejercicio ${q.id}</h4>
                    <p>${q.question}</p>
                    <input type="text" id="train${q.id}" class="input-field" placeholder="Tu respuesta">
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="checkTraining(${q.id})">Verificar</button>
                        <button class="btn btn-secondary" onclick="showHint(${q.id})">üí° Pista</button>
                    </div>
                    <div id="hint${q.id}" class="hint-box" style="display:none">${q.hint}</div>
                    <div id="feedback${q.id}" class="feedback"></div>
                </div>
            `).join('');
        }

        function checkTraining(id) {
            const question = trainingQuestions.find(q => q.id === id);
            const input = document.getElementById('train' + id);
            const feedback = document.getElementById('feedback' + id);
            const userAnswer = input.value.trim().toLowerCase();

            if (!userAnswer) {
                feedback.className = 'feedback error';
                feedback.textContent = 'Por favor, ingresa una respuesta.';
                feedback.style.display = 'block';
                return;
            }

            const isCorrect = userAnswer === question.answer.toLowerCase();
            
            if (isCorrect) {
                feedback.className = 'feedback success';
                feedback.textContent = '¬°Correcto! ‚ú® +10 puntos';
                input.disabled = true;
                Gamification.completeExercise(MODULE_ID, true);
            } else {
                feedback.className = 'feedback error';
                feedback.textContent = 'Incorrecto. -5 puntos. Intenta de nuevo o usa la pista.';
                Gamification.completeExercise(MODULE_ID, false);
            }
            
            feedback.style.display = 'block';
            Gamification.updateDisplay(MODULE_ID);
        }

        function showHint(id) {
            const hint = document.getElementById('hint' + id);
            hint.style.display = hint.style.display === 'none' ? 'block' : 'none';
        }

        // Exam questions (20 questions)
        const examQuestions = [
            { id: 1, question: '¬øQu√© dimensi√≥n tiene una matriz con 3 filas y 5 columnas?', options: ['3√ó5', '5√ó3', '15√ó1', '8'], correct: 0 },
            { id: 2, question: 'Si A = [6, 2; 8, 4], ¬øcu√°l es el elemento a‚ÇÅ‚ÇÇ?', options: ['6', '2', '8', '4'], correct: 1 },
            { id: 3, question: 'Calcular |A| si A = [2, 3; 1, 5]', options: ['10', '7', '13', '5'], correct: 1 },
            { id: 4, question: '¬øCu√°l es la matriz identidad 2√ó2?', options: ['[1,1;1,1]', '[0,0;0,0]', '[1,0;0,1]', '[2,0;0,2]'], correct: 2 },
            { id: 5, question: 'Si A es 2√ó4 y B es 4√ó3, ¬øqu√© dimensi√≥n tiene A¬∑B?', options: ['2√ó3', '4√ó4', '2√ó4', 'No se puede'], correct: 0 },
            { id: 6, question: '¬øCu√°nto vale el determinante de la matriz nula 2√ó2?', options: ['1', '-1', '0', 'No definido'], correct: 2 },
            { id: 7, question: 'Si |A| = 5 y |B| = 3, ¬øcu√°nto vale |A¬∑B|?', options: ['15', '8', '2', '53'], correct: 0 },
            { id: 8, question: 'Si A = [1, 2; 3, 4], ¬øcu√°l es A·µÄ?', options: ['[1,3;2,4]', '[1,2;3,4]', '[4,3;2,1]', '[2,1;4,3]'], correct: 0 },
            { id: 9, question: '¬øQu√© condici√≥n debe cumplir A para que exista A‚Åª¬π?', options: ['|A| = 1', '|A| ‚â† 0', 'A = A·µÄ', 'A = I'], correct: 1 },
            { id: 10, question: 'Calcular 5¬∑A si A = [1, 0; 2, 3]. Elemento (2,2):', options: ['3', '10', '15', '5'], correct: 2 },
            { id: 11, question: 'Si dos filas de una matriz son iguales, su determinante es:', options: ['1', '-1', '0', '2'], correct: 2 },
            { id: 12, question: '¬øCu√°ntas filas tiene la transpuesta de una matriz 3√ó7?', options: ['3', '7', '21', '10'], correct: 1 },
            { id: 13, question: 'Una matriz diagonal tiene todos sus elementos nulos excepto:', options: ['Fila 1', 'Columna 1', 'Diagonal principal', 'Todas'], correct: 2 },
            { id: 14, question: 'Si A¬∑B = I, entonces B es:', options: ['A', 'A·µÄ', 'A‚Åª¬π', '|A|'], correct: 2 },
            { id: 15, question: 'El producto de matrices es:', options: ['Conmutativo', 'No conmutativo', 'Siempre igual', 'Sim√©trico'], correct: 1 },
            { id: 16, question: 'Si A = [3, 1; 2, 4], calcular |A|:', options: ['10', '12', '11', '14'], correct: 0 },
            { id: 17, question: '¬øQu√© operaci√≥n NO requiere matrices del mismo tama√±o?', options: ['Suma', 'Resta', 'Multiplicaci√≥n', 'Todas requieren'], correct: 2 },
            { id: 18, question: 'El rango de una matriz 3√ó3 puede ser m√°ximo:', options: ['1', '2', '3', '9'], correct: 2 },
            { id: 19, question: 'Si |A| = 0, la matriz A es:', options: ['Invertible', 'Singular', 'Identidad', 'Diagonal'], correct: 1 },
            { id: 20, question: 'Una matriz cuadrada de orden 2 tiene:', options: ['2 elementos', '4 elementos', '8 elementos', '6 elementos'], correct: 1 }
        ];

        function loadExam() {
            const examData = Storage.getExamData(MODULE_ID);
            const statusDiv = document.getElementById('exam-status');
            const container = document.getElementById('exam-container');
            const resultsDiv = document.getElementById('exam-results');

            if (examData && examData.passed) {
                statusDiv.innerHTML = `
                    <div class="exam-completed">
                        <h3>‚úÖ Examen Completado</h3>
                        <p>Puntuaci√≥n: ${examData.score}/20 (${examData.percentage}%)</p>
                        <p>Estado: <strong>APROBADO</strong> üéâ</p>
                        <p>Has ganado el trofeo "Maestro de Matrices" üèÜ</p>
                        <button class="btn btn-secondary" onclick="resetExam()">Reintentar Examen</button>
                    </div>
                `;
                container.style.display = 'none';
                return;
            }

            if (examData && examData.attempts > 0) {
                statusDiv.innerHTML = `
                    <div class="exam-attempts">
                        <p>Intentos realizados: ${examData.attempts}</p>
                        <p>Mejor puntuaci√≥n: ${examData.score}/20 (${examData.percentage}%)</p>
                    </div>
                `;
            }

            container.innerHTML = `
                <div class="exam-instructions">
                    <p>Responde las 20 preguntas del examen. Necesitas 14 respuestas correctas (70%) para aprobar.</p>
                    <button class="btn btn-primary" onclick="startExam()">Comenzar Examen</button>
                </div>
            `;
        }

        function startExam() {
            const container = document.getElementById('exam-container');
            container.innerHTML = examQuestions.map(q => `
                <div class="exam-question">
                    <h4>Pregunta ${q.id}</h4>
                    <p>${q.question}</p>
                    <div class="exam-options">
                        ${q.options.map((opt, idx) => `
                            <label class="exam-option">
                                <input type="radio" name="q${q.id}" value="${idx}">
                                <span>${opt}</span>
                            </label>
                        `).join('')}
                    </div>
                </div>
            `).join('') + `
                <div class="exam-actions">
                    <button class="btn btn-success" onclick="submitExam()">Enviar Examen</button>
                </div>
            `;
        }

        function submitExam() {
            let correct = 0;
            const total = examQuestions.length;

            examQuestions.forEach(q => {
                const selected = document.querySelector(`input[name="q${q.id}"]:checked`);
                if (selected && parseInt(selected.value) === q.correct) {
                    correct++;
                }
            });

            const percentage = Math.round((correct / total) * 100);
            const passed = percentage >= 70;

            Storage.saveExamResult(MODULE_ID, correct, total, passed);

            const resultsDiv = document.getElementById('exam-results');
            resultsDiv.innerHTML = `
                <div class="exam-result ${passed ? 'passed' : 'failed'}">
                    <h3>${passed ? 'üéâ ¬°Aprobado!' : '‚ùå No Aprobado'}</h3>
                    <p>Puntuaci√≥n: ${correct}/${total} (${percentage}%)</p>
                    <p>${passed ? 'Has ganado el trofeo "Maestro de Matrices" üèÜ' : 'Necesitas 70% para aprobar. ¬°Sigue practicando!'}</p>
                    <button class="btn btn-primary" onclick="location.reload()">Continuar</button>
                </div>
            `;

            if (passed) {
                Gamification.unlockTrophy('matrices');
            }

            document.getElementById('exam-container').style.display = 'none';
            Gamification.updateDisplay(MODULE_ID);
        }

        function resetExam() {
            if (confirm('¬øEst√°s seguro de que deseas reiniciar el examen? Perder√°s tu progreso actual.')) {
                Storage.resetExam(MODULE_ID);
                location.reload();
            }
        }

        // Interactive tools
        function calculateSum() {
            const matrixAStr = document.getElementById('sum-matrixA').value;
            const matrixBStr = document.getElementById('sum-matrixB').value;
            const result = document.getElementById('sum-result');
            
            if (!matrixAStr || !matrixBStr) {
                result.textContent = '‚ö†Ô∏è Por favor, ingresa ambas matrices';
                return;
            }
            
            const A = matrixAStr.split(',').map(e => parseFloat(e.trim()));
            const B = matrixBStr.split(',').map(e => parseFloat(e.trim()));
            
            if (A.length !== 4 || B.length !== 4 || A.some(isNaN) || B.some(isNaN)) {
                result.textContent = '‚ö†Ô∏è Cada matriz debe tener 4 n√∫meros';
                return;
            }
            
            const sumMatrix = A.map((a, i) => a + B[i]);
            
            result.innerHTML = `
                <strong>Matriz A:</strong> [${A[0]}, ${A[1]}; ${A[2]}, ${A[3]}]<br>
                <strong>Matriz B:</strong> [${B[0]}, ${B[1]}; ${B[2]}, ${B[3]}]<br>
                <strong>A + B =</strong> [${sumMatrix[0]}, ${sumMatrix[1]}; ${sumMatrix[2]}, ${sumMatrix[3]}]
            `;
        }

        function calculateScalar() {
            const k = parseFloat(document.getElementById('scalar-k').value);
            const matrixStr = document.getElementById('scalar-matrix').value;
            const result = document.getElementById('scalar-result');
            
            if (isNaN(k) || !matrixStr) {
                result.textContent = '‚ö†Ô∏è Por favor, completa todos los campos';
                return;
            }
            
            const matrix = matrixStr.split(',').map(e => parseFloat(e.trim()));
            
            if (matrix.length !== 4 || matrix.some(isNaN)) {
                result.textContent = '‚ö†Ô∏è La matriz debe tener 4 n√∫meros';
                return;
            }
            
            const scaledMatrix = matrix.map(e => k * e);
            
            result.innerHTML = `
                <strong>Escalar:</strong> k = ${k}<br>
                <strong>Matriz A:</strong> [${matrix[0]}, ${matrix[1]}; ${matrix[2]}, ${matrix[3]}]<br>
                <strong>${k} √ó A =</strong> [${scaledMatrix[0]}, ${scaledMatrix[1]}; ${scaledMatrix[2]}, ${scaledMatrix[3]}]
            `;
        }

        function calculateDeterminant() {
            const matrixStr = document.getElementById('det-matrix').value;
            const result = document.getElementById('det-result');
            
            if (!matrixStr) {
                result.textContent = '‚ö†Ô∏è Por favor, ingresa los 4 elementos';
                return;
            }
            
            const elements = matrixStr.split(',').map(e => parseFloat(e.trim()));
            
            if (elements.length !== 4 || elements.some(isNaN)) {
                result.textContent = '‚ö†Ô∏è Debes ingresar exactamente 4 n√∫meros separados por comas';
                return;
            }
            
            const [a, b, c, d] = elements;
            const det = a * d - b * c;
            
            result.innerHTML = `
                <strong>Matriz:</strong> [${a}, ${b}; ${c}, ${d}]<br>
                <strong>C√°lculo:</strong> ${a}√ó${d} - ${b}√ó${c} = ${a*d} - ${b*c}<br>
                <strong>Determinante:</strong> |A| = ${det}
            `;
        }
    </script>
</body>
</html>

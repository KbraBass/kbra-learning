<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tema 4: Matrices - Matem√°ticas Avanzadas</title>
    <link rel="stylesheet" href="../../../../css/core.css">
    <link rel="stylesheet" href="../../../../css/components.css">
</head>
<body>
    <div id="header-container"></div>
    <div id="tabs-container"></div>
    <div id="score-container"></div>

    <div class="container">
        <!-- Teor√≠a -->
        <div class="content-section active" id="teoria">
            <h2>üìö Teor√≠a: Matrices y Determinantes</h2>

            <div class="info-box bg-gradient-primary-white">
                <h4 class="color-white mt-0">üìñ Glosario de S√≠mbolos Matem√°ticos</h4>
                <p>S√≠mbolos utilizados en Matrices:</p>
                <ul style="list-style: none; padding-left: 0; line-height: 2; margin-top: 1rem;">
                    <li><strong>A, B, C</strong> = Matrices (representadas por letras may√∫sculas)</li>
                    <li><strong>a<sub>ij</sub></strong> = Elemento en la fila i, columna j de una matriz</li>
                    <li><strong>A<sup>T</sup></strong> = Matriz transpuesta de A</li>
                    <li><strong>A<sup>-1</sup></strong> = Matriz inversa de A</li>
                    <li><strong>|A| o det(A)</strong> = Determinante de la matriz A</li>
                    <li><strong>I<sub>n</sub></strong> = Matriz identidad de orden n (diagonal de 1s)</li>
                    <li><strong>O</strong> = Matriz nula (todos sus elementos son 0)</li>
                    <li><strong>rango(A)</strong> = Rango de la matriz A</li>
                    <li><strong>m√ón</strong> = Dimensi√≥n de la matriz: m filas, n columnas</li>
                    <li><strong>¬±</strong> = M√°s o menos (operaciones con matrices)</li>
                </ul>
            </div>

            <h3>1. ¬øQu√© es una Matriz?</h3>
            <div class="info-box">
                <h4>Definici√≥n</h4>
                <p>Una matriz es una tabla rectangular de n√∫meros ordenados en filas y columnas. Una matriz de dimensi√≥n m√ón tiene m filas y n columnas.</p>
                <div class="formula-box">
                    A = (a<sub>ij</sub>) donde i = 1,...,m  y  j = 1,...,n
                </div>
            </div>

            <h3>2. Tipos de Matrices</h3>
            <div class="info-box">
                <h4>Clasificaci√≥n</h4>
                <ul>
                    <li><strong>Matriz fila:</strong> 1 fila, n columnas (1√ón)</li>
                    <li><strong>Matriz columna:</strong> m filas, 1 columna (m√ó1)</li>
                    <li><strong>Matriz cuadrada:</strong> m = n (igual n√∫mero de filas y columnas)</li>
                    <li><strong>Matriz nula (O):</strong> Todos sus elementos son 0</li>
                    <li><strong>Matriz identidad (I):</strong> Cuadrada con 1s en la diagonal y 0s en el resto</li>
                    <li><strong>Matriz diagonal:</strong> S√≥lo tiene elementos en la diagonal principal</li>
                    <li><strong>Matriz triangular:</strong> Elementos nulos por encima o debajo de la diagonal</li>
                </ul>
            </div>

            <h3>3. Operaciones con Matrices</h3>
            
            <div class="info-box">
                <h4>Suma y Resta</h4>
                <p>Se suman/restan los elementos correspondientes. Solo se pueden sumar matrices de la misma dimensi√≥n.</p>
                <div class="formula-box">
                    (A + B)<sub>ij</sub> = a<sub>ij</sub> + b<sub>ij</sub>
                </div>
            </div>

            <div class="info-box">
                <h4>Producto por Escalar</h4>
                <p>Se multiplica cada elemento de la matriz por el n√∫mero k.</p>
                <div class="formula-box">
                    (k¬∑A)<sub>ij</sub> = k¬∑a<sub>ij</sub>
                </div>
            </div>

            <div class="info-box">
                <h4>Producto de Matrices</h4>
                <p>Para multiplicar A√óB, el n√∫mero de columnas de A debe ser igual al n√∫mero de filas de B. El elemento (i,j) del producto es:</p>
                <div class="formula-box">
                    (A¬∑B)<sub>ij</sub> = a<sub>i1</sub>¬∑b<sub>1j</sub> + a<sub>i2</sub>¬∑b<sub>2j</sub> + ... + a<sub>in</sub>¬∑b<sub>nj</sub>
                </div>
                <div class="warning-box">
                    <strong>‚ö†Ô∏è Importante:</strong> El producto de matrices NO es conmutativo: A¬∑B ‚â† B¬∑A
                </div>
            </div>

            <div class="info-box">
                <h4>Matriz Transpuesta</h4>
                <p>Se obtiene intercambiando filas por columnas: (A<sup>T</sup>)<sub>ij</sub> = a<sub>ji</sub></p>
            </div>

            <h3>4. Determinantes</h3>
            <div class="info-box">
                <h4>C√°lculo de Determinantes</h4>
                <p>El determinante es un n√∫mero asociado a una matriz cuadrada.</p>
                
                <h4 style="margin-top: 1rem;">Determinante 2√ó2</h4>
                <div class="formula-box">
                    |A| = a<sub>11</sub>¬∑a<sub>22</sub> - a<sub>12</sub>¬∑a<sub>21</sub>
                </div>

                <h4 style="margin-top: 1rem;">Determinante 3√ó3 (Regla de Sarrus)</h4>
                <p>Se suman los productos de las diagonales principales y se restan las secundarias.</p>

                <h4 style="margin-top: 1rem;">Propiedades de Determinantes</h4>
                <ul>
                    <li>|A<sup>T</sup>| = |A|</li>
                    <li>Si una fila/columna es nula ‚Üí |A| = 0</li>
                    <li>Si dos filas/columnas son iguales ‚Üí |A| = 0</li>
                    <li>|k¬∑A| = k<sup>n</sup>¬∑|A| (n = orden de la matriz)</li>
                    <li>|A¬∑B| = |A|¬∑|B|</li>
                </ul>
            </div>

            <h3>5. Matriz Inversa</h3>
            <div class="info-box">
                <h4>Definici√≥n y C√°lculo</h4>
                <p>Una matriz cuadrada A tiene inversa A<sup>-1</sup> si:</p>
                <div class="formula-box">
                    A¬∑A<sup>-1</sup> = A<sup>-1</sup>¬∑A = I
                </div>
                <div class="exam-important">
                    <strong>Condici√≥n de Existencia:</strong> |A| ‚â† 0 (la matriz debe ser no singular)
                </div>

                <h4 style="margin-top: 1rem;">C√°lculo de la Inversa 2√ó2</h4>
                <div class="formula-box">
                    A<sup>-1</sup> = (1/|A|) ¬∑ [a<sub>22</sub>, -a<sub>12</sub>; -a<sub>21</sub>, a<sub>11</sub>]
                </div>
            </div>

            <h3>6. Rango de una Matriz</h3>
            <div class="info-box">
                <p>El rango es el n√∫mero m√°ximo de filas (o columnas) linealmente independientes. Tambi√©n es el orden del mayor determinante no nulo que se puede formar.</p>
            </div>

            <h3>7. M√©todo de Gauss</h3>
            <div class="info-box">
                <h4>Operaciones Elementales</h4>
                <p>Consiste en transformar la matriz en una forma escalonada mediante:</p>
                <ul>
                    <li>Intercambiar dos filas</li>
                    <li>Multiplicar una fila por un n√∫mero no nulo</li>
                    <li>Sumar a una fila otra multiplicada por un n√∫mero</li>
                </ul>
            </div>
        </div>

        <!-- Ejemplos -->
        <div class="content-section" id="ejemplos">
            <h2>üí° Ejemplos Resueltos</h2>

            <div class="info-box border-left-success">
                <h4 class="color-success">Ejemplo 1: Suma de Matrices</h4>
                <p><strong>Problema:</strong> Calcular A + B siendo A = [1, 2; 3, 4] y B = [5, 6; 7, 8]</p>
                <p><strong>Soluci√≥n:</strong></p>
                <p>Sumamos elemento a elemento:</p>
                <p>A + B = [1+5, 2+6; 3+7, 4+8] = [6, 8; 10, 12]</p>
                <p><strong>Respuesta:</strong> [6, 8; 10, 12]</p>
            </div>

            <div class="info-box border-left-success">
                <h4 class="color-success">Ejemplo 2: Producto de Matrices</h4>
                <p><strong>Problema:</strong> Calcular A¬∑B siendo A = [1, 2; 3, 4] y B = [2, 0; 1, 3]</p>
                <p><strong>Soluci√≥n:</strong></p>
                <p>Elemento (1,1): 1√ó2 + 2√ó1 = 4</p>
                <p>Elemento (1,2): 1√ó0 + 2√ó3 = 6</p>
                <p>Elemento (2,1): 3√ó2 + 4√ó1 = 10</p>
                <p>Elemento (2,2): 3√ó0 + 4√ó3 = 12</p>
                <p><strong>Respuesta:</strong> A¬∑B = [4, 6; 10, 12]</p>
            </div>

            <div class="info-box border-left-success">
                <h4 class="color-success">Ejemplo 3: Determinante</h4>
                <p><strong>Problema:</strong> Calcular |A| siendo A = [3, 2; 1, 4]</p>
                <p><strong>Soluci√≥n:</strong></p>
                <p>|A| = 3√ó4 - 2√ó1 = 12 - 2 = 10</p>
                <p><strong>Respuesta:</strong> |A| = 10</p>
            </div>

            <div class="info-box border-left-success">
                <h4 class="color-success">Ejemplo 4: Matriz Transpuesta</h4>
                <p><strong>Problema:</strong> Calcular A<sup>T</sup> siendo A = [1, 2, 3; 4, 5, 6]</p>
                <p><strong>Soluci√≥n:</strong></p>
                <p>Intercambiamos filas por columnas:</p>
                <p>A<sup>T</sup> = [1, 4; 2, 5; 3, 6]</p>
                <p><strong>Respuesta:</strong> Matriz de dimensi√≥n 3√ó2</p>
            </div>

            <div class="info-box border-left-success">
                <h4 class="color-success">Ejemplo 5: Matriz Inversa</h4>
                <p><strong>Problema:</strong> Calcular A<sup>-1</sup> siendo A = [2, 1; 1, 3]</p>
                <p><strong>Soluci√≥n:</strong></p>
                <p>Paso 1: Calcular |A| = 2√ó3 - 1√ó1 = 5</p>
                <p>Paso 2: A<sup>-1</sup> = (1/5) ¬∑ [3, -1; -1, 2]</p>
                <p>A<sup>-1</sup> = [0.6, -0.2; -0.2, 0.4]</p>
                <p><strong>Respuesta:</strong> A<sup>-1</sup> = [0.6, -0.2; -0.2, 0.4]</p>
            </div>
        </div>

        <!-- Herramientas -->
        <div class="content-section" id="herramientas">
            <h2>üõ†Ô∏è Herramientas Interactivas</h2>

            <div class="tool-card">
                <h3>üî¢ Calculadora de Determinantes 2√ó2</h3>
                <p>Calcula el determinante de una matriz 2√ó2</p>
                
                <div class="tool-input-group">
                    <label>Elementos de la matriz [a, b; c, d]:</label>
                    <input type="text" id="det-matrix" placeholder="Ej: 3,2,1,4 (separados por comas)">
                </div>
                
                <button class="calc-button" onclick="calculateDeterminant()">Calcular</button>
                <div class="calc-result" id="det-result">Ingresa los 4 elementos</div>
            </div>

            <div class="tool-card">
                <h3>‚ûï Calculadora de Suma de Matrices 2√ó2</h3>
                <p>Suma dos matrices 2√ó2</p>
                
                <div class="tool-input-group">
                    <label>Matriz A [a, b; c, d]:</label>
                    <input type="text" id="sum-matrixA" placeholder="Ej: 1,2,3,4">
                </div>
                
                <div class="tool-input-group">
                    <label>Matriz B [a, b; c, d]:</label>
                    <input type="text" id="sum-matrixB" placeholder="Ej: 5,6,7,8">
                </div>
                
                <button class="calc-button" onclick="calculateSum()">Sumar</button>
                <div class="calc-result" id="sum-result">Ingresa ambas matrices</div>
            </div>

            <div class="tool-card">
                <h3>‚úñÔ∏è Calculadora de Producto por Escalar</h3>
                <p>Multiplica una matriz 2√ó2 por un n√∫mero</p>
                
                <div class="tool-input-group">
                    <label>Escalar k:</label>
                    <input type="number" id="scalar-k" placeholder="Ej: 3">
                </div>
                
                <div class="tool-input-group">
                    <label>Matriz A [a, b; c, d]:</label>
                    <input type="text" id="scalar-matrix" placeholder="Ej: 1,2,3,4">
                </div>
                
                <button class="calc-button" onclick="calculateScalar()">Multiplicar</button>
                <div class="calc-result" id="scalar-result">Ingresa k y la matriz</div>
            </div>
        </div>

        <!-- Pr√°ctica -->
        <div class="content-section" id="practica">
            <h2>‚úèÔ∏è Pr√°ctica</h2>

            <div id="exercises-container"></div>

            <div class="navigation-buttons mt-2">
                <button class="btn btn-secondary" onclick="window.location.href='geometria-trigonometria.html'">‚¨ÖÔ∏è Tema Anterior</button>
                <button class="btn btn-primary" onclick="window.location.href='../index.html'">Volver a Matem√°ticas</button>
            </div>
        </div>

        <!-- Resumen -->
        <div class="content-section" id="resumen">
            <h2>üìã Resumen del Tema</h2>

            <div class="info-box">
                <h4>üéØ Conceptos Clave</h4>
                <ul>
                    <li><strong>Matriz:</strong> Tabla rectangular m√ón de n√∫meros</li>
                    <li><strong>Tipos:</strong> Nula, identidad, diagonal, triangular</li>
                    <li><strong>Suma/Resta:</strong> Solo entre matrices de igual dimensi√≥n</li>
                    <li><strong>Producto:</strong> A(m√ón)¬∑B(n√óp) = C(m√óp), NO conmutativo</li>
                    <li><strong>Transpuesta:</strong> A<sup>T</sup> intercambia filas por columnas</li>
                    <li><strong>Determinante 2√ó2:</strong> |A| = a‚ÇÅ‚ÇÅ¬∑a‚ÇÇ‚ÇÇ - a‚ÇÅ‚ÇÇ¬∑a‚ÇÇ‚ÇÅ</li>
                    <li><strong>Inversa:</strong> Existe si |A| ‚â† 0, cumple A¬∑A<sup>-1</sup> = I</li>
                    <li><strong>Rango:</strong> M√°ximo n√∫mero de filas/columnas independientes</li>
                </ul>
            </div>

            <div class="navigation-buttons mt-2">
                <button class="btn btn-secondary" onclick="window.location.href='geometria-trigonometria.html'">‚¨ÖÔ∏è Tema Anterior</button>
                <button class="btn btn-primary" onclick="window.location.href='../index.html'">Volver a Matem√°ticas</button>
            </div>
        </div>
    </div>

    <script src="../../../../lib/storage.js"></script>
    <script src="../../../../lib/gamification.js"></script>
    <script src="../../../../lib/components.js"></script>
    <script>
        const MODULE_ID = 'matrices';
        const MODULE_TITLE = 'Tema 4: Matrices y Determinantes';

        document.addEventListener('DOMContentLoaded', function() {
            Components.createHeader(MODULE_TITLE, '../index.html');
            
            const tabs = [
                { id: 'teoria', label: 'Teor√≠a', icon: 'üìö' },
                { id: 'ejemplos', label: 'Ejemplos', icon: 'üí°' },
                { id: 'herramientas', label: 'Herramientas', icon: 'üõ†Ô∏è' },
                { id: 'practica', label: 'Pr√°ctica', icon: '‚úèÔ∏è' },
                { id: 'resumen', label: 'Resumen', icon: 'üìã' }
            ];
            Components.createTabs(tabs, 'teoria');
            Components.createScoreDisplay();
            
            loadExercises();
            Gamification.updateDisplay(MODULE_ID);
        });

        const exercises = [
            { id: 1, question: 'Si A = [2, 3; 1, 4], ¬øcu√°nto vale el elemento a‚ÇÇ‚ÇÅ?', type: 'number', correct: '1', hint: 'a_ij significa fila i, columna j. Entonces a‚ÇÇ‚ÇÅ est√° en fila 2, columna 1.' },
            { id: 2, question: 'Calcular el determinante de A = [4, 2; 3, 1]', type: 'number', correct: '-2', hint: 'Para 2√ó2: |A| = a‚ÇÅ‚ÇÅ√óa‚ÇÇ‚ÇÇ - a‚ÇÅ‚ÇÇ√óa‚ÇÇ‚ÇÅ. Calcula 4√ó1 - 2√ó3 = -2' },
            { id: 3, question: 'Si A = [1, 0; 0, 1], ¬øqu√© tipo de matriz es? (1=Identidad, 2=Nula, 3=Diagonal)', type: 'number', correct: '1', hint: 'La matriz identidad tiene 1s en la diagonal y 0s en el resto.' },
            { id: 4, question: 'Si A es 2√ó3 y B es 3√ó4, ¬øqu√© dimensi√≥n tiene A¬∑B? (responde como: 24 para 2√ó4)', type: 'number', correct: '24', hint: 'Si A es m√ón y B es n√óp, entonces A¬∑B es m√óp. Aqu√≠: 2√ó4 ‚Üí 24' },
            { id: 5, question: 'Si |A| = 0, ¬øexiste A‚Åª¬π? (1=S√ç, 0=NO)', type: 'number', correct: '0', hint: 'La inversa solo existe si |A| ‚â† 0. Si el determinante es cero, NO existe.' },
            { id: 6, question: 'Calcular 2√óA si A = [1, 2; 3, 4]. ¬øElemento (2,2)?', type: 'number', correct: '8', hint: 'Multiplicar por escalar: k¬∑A multiplica cada elemento. 2√ó4 = 8' },
            { id: 7, question: 'Si A = [1, 2, 3], ¬ødimensi√≥n de A·µÄ? (responde como: 31 para 3√ó1)', type: 'number', correct: '31', hint: 'La transpuesta intercambia filas por columnas. 1√ó3 se convierte en 3√ó1 ‚Üí 31' },
            { id: 8, question: 'Calcular |A| si A = [5, 0; 0, 3]', type: 'number', correct: '15', hint: 'Matriz diagonal. |A| = 5√ó3 - 0√ó0 = 15' },
            { id: 9, question: '¬øCu√°nto vale |I‚ÇÇ| (determinante de la identidad 2√ó2)?', type: 'number', correct: '1', hint: 'I‚ÇÇ = [1, 0; 0, 1]. Calcula: 1√ó1 - 0√ó0 = 1' },
            { id: 10, question: 'Si A = [2, 1; 4, 3], calcular elemento (1,2) de 3A', type: 'number', correct: '3', hint: 'Elemento (1,2) de A es 1. Multiplicar por 3: 3√ó1 = 3' }
        ];

        function loadExercises() {
            const container = document.getElementById('exercises-container');
            container.innerHTML = exercises.map(ex => `
                <div class="exercise-card" data-exercise="${ex.id}">
                    <h4>Ejercicio ${ex.id}</h4>
                    <p>${ex.question}</p>
                    <input type="number" step="any" id="ex${ex.id}" class="input-field" placeholder="Tu respuesta">
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="checkAnswer(${ex.id})">Verificar</button>
                        <button class="btn btn-secondary" onclick="showHint(${ex.id})">üí° Pista</button>
                    </div>
                    <div id="hint${ex.id}" class="hint-box d-none">${ex.hint}</div>
                    <div id="feedback${ex.id}" class="feedback"></div>
                </div>
            `).join('');
        }

        function checkAnswer(exerciseId) {
            const exercise = exercises.find(ex => ex.id === exerciseId);
            const input = document.getElementById('ex' + exerciseId);
            const feedback = document.getElementById('feedback' + exerciseId);
            const userAnswer = input.value.trim();

            if (!userAnswer) {
                feedback.className = 'feedback error';
                feedback.textContent = 'Por favor, ingresa una respuesta.';
                feedback.style.display = 'block';
                return;
            }

            const isCorrect = userAnswer === exercise.correct;
            
            if (isCorrect) {
                feedback.className = 'feedback success';
                feedback.textContent = '¬°Correcto! ‚ú® +10 puntos';
                input.disabled = true;
                Gamification.completeExercise(MODULE_ID, true);
            } else {
                feedback.className = 'feedback error';
                feedback.textContent = 'Incorrecto. Intenta de nuevo o usa la pista.';
                Gamification.completeExercise(MODULE_ID, false);
            }
            
            feedback.style.display = 'block';
            Gamification.updateDisplay(MODULE_ID);
        }

        function showHint(exerciseId) {
            const hint = document.getElementById('hint' + exerciseId);
            hint.style.display = hint.style.display === 'none' ? 'block' : 'none';
        }

        // Interactive tools
        function calculateDeterminant() {
            const matrixStr = document.getElementById('det-matrix').value;
            const result = document.getElementById('det-result');
            
            if (!matrixStr) {
                result.textContent = '‚ö†Ô∏è Por favor, ingresa los 4 elementos';
                return;
            }
            
            const elements = matrixStr.split(',').map(e => parseFloat(e.trim()));
            
            if (elements.length !== 4 || elements.some(isNaN)) {
                result.textContent = '‚ö†Ô∏è Debes ingresar exactamente 4 n√∫meros separados por comas';
                return;
            }
            
            const [a, b, c, d] = elements;
            const det = a * d - b * c;
            
            result.innerHTML = `
                <strong>Matriz:</strong> [${a}, ${b}; ${c}, ${d}]<br>
                <strong>C√°lculo:</strong> ${a}√ó${d} - ${b}√ó${c} = ${a*d} - ${b*c}<br>
                <strong>Determinante:</strong> ${det}
            `;
        }

        function calculateSum() {
            const matrixAStr = document.getElementById('sum-matrixA').value;
            const matrixBStr = document.getElementById('sum-matrixB').value;
            const result = document.getElementById('sum-result');
            
            if (!matrixAStr || !matrixBStr) {
                result.textContent = '‚ö†Ô∏è Por favor, ingresa ambas matrices';
                return;
            }
            
            const A = matrixAStr.split(',').map(e => parseFloat(e.trim()));
            const B = matrixBStr.split(',').map(e => parseFloat(e.trim()));
            
            if (A.length !== 4 || B.length !== 4 || A.some(isNaN) || B.some(isNaN)) {
                result.textContent = '‚ö†Ô∏è Cada matriz debe tener 4 n√∫meros';
                return;
            }
            
            const sumMatrix = A.map((a, i) => a + B[i]);
            
            result.innerHTML = `
                <strong>A + B =</strong><br>
                [${sumMatrix[0]}, ${sumMatrix[1]}; ${sumMatrix[2]}, ${sumMatrix[3]}]
            `;
        }

        function calculateScalar() {
            const k = parseFloat(document.getElementById('scalar-k').value);
            const matrixStr = document.getElementById('scalar-matrix').value;
            const result = document.getElementById('scalar-result');
            
            if (isNaN(k) || !matrixStr) {
                result.textContent = '‚ö†Ô∏è Por favor, completa todos los campos';
                return;
            }
            
            const matrix = matrixStr.split(',').map(e => parseFloat(e.trim()));
            
            if (matrix.length !== 4 || matrix.some(isNaN)) {
                result.textContent = '‚ö†Ô∏è La matriz debe tener 4 n√∫meros';
                return;
            }
            
            const scaledMatrix = matrix.map(e => k * e);
            
            result.innerHTML = `
                <strong>${k} √ó A =</strong><br>
                [${scaledMatrix[0]}, ${scaledMatrix[1]}; ${scaledMatrix[2]}, ${scaledMatrix[3]}]
            `;
        }
    </script>
</body>
</html>